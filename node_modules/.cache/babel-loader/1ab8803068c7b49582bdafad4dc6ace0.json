{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/treemap/TreemapView.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/treemap/TreemapView.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwoKLyoKKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24KKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQoqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAoqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwoqIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwp2YXIgZWNoYXJ0cyA9IHJlcXVpcmUoIi4uLy4uL2VjaGFydHMiKTsKCnZhciB6clV0aWwgPSByZXF1aXJlKCJ6cmVuZGVyL2xpYi9jb3JlL3V0aWwiKTsKCnZhciBncmFwaGljID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9ncmFwaGljIik7Cgp2YXIgRGF0YURpZmZlciA9IHJlcXVpcmUoIi4uLy4uL2RhdGEvRGF0YURpZmZlciIpOwoKdmFyIGhlbHBlciA9IHJlcXVpcmUoIi4uL2hlbHBlci90cmVlSGVscGVyIik7Cgp2YXIgQnJlYWRjcnVtYiA9IHJlcXVpcmUoIi4vQnJlYWRjcnVtYiIpOwoKdmFyIFJvYW1Db250cm9sbGVyID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50L2hlbHBlci9Sb2FtQ29udHJvbGxlciIpOwoKdmFyIEJvdW5kaW5nUmVjdCA9IHJlcXVpcmUoInpyZW5kZXIvbGliL2NvcmUvQm91bmRpbmdSZWN0Iik7Cgp2YXIgbWF0cml4ID0gcmVxdWlyZSgienJlbmRlci9saWIvY29yZS9tYXRyaXgiKTsKCnZhciBhbmltYXRpb25VdGlsID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9hbmltYXRpb24iKTsKCnZhciBtYWtlU3R5bGVNYXBwZXIgPSByZXF1aXJlKCIuLi8uLi9tb2RlbC9taXhpbi9tYWtlU3R5bGVNYXBwZXIiKTsKCnZhciBfZm9ybWF0ID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9mb3JtYXQiKTsKCnZhciB3aW5kb3dPcGVuID0gX2Zvcm1hdC53aW5kb3dPcGVuOwovKgoqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiogdW5kZXIgdGhlIExpY2Vuc2UuCiovCgp2YXIgYmluZCA9IHpyVXRpbC5iaW5kOwp2YXIgR3JvdXAgPSBncmFwaGljLkdyb3VwOwp2YXIgUmVjdCA9IGdyYXBoaWMuUmVjdDsKdmFyIGVhY2ggPSB6clV0aWwuZWFjaDsKdmFyIERSQUdfVEhSRVNIT0xEID0gMzsKdmFyIFBBVEhfTEFCRUxfTk9BTUFMID0gWydsYWJlbCddOwp2YXIgUEFUSF9MQUJFTF9FTVBIQVNJUyA9IFsnZW1waGFzaXMnLCAnbGFiZWwnXTsKdmFyIFBBVEhfVVBQRVJMQUJFTF9OT1JNQUwgPSBbJ3VwcGVyTGFiZWwnXTsKdmFyIFBBVEhfVVBQRVJMQUJFTF9FTVBIQVNJUyA9IFsnZW1waGFzaXMnLCAndXBwZXJMYWJlbCddOwp2YXIgWl9CQVNFID0gMTA7IC8vIFNob3VsZCBiaWdnZXIgdGhhbiBldmVyeSB6LgoKdmFyIFpfQkcgPSAxOwp2YXIgWl9DT05URU5UID0gMjsKdmFyIGdldEl0ZW1TdHlsZUVtcGhhc2lzID0gbWFrZVN0eWxlTWFwcGVyKFtbJ2ZpbGwnLCAnY29sb3InXSwgLy8gYGJvcmRlckNvbG9yYCBhbmQgYGJvcmRlcldpZHRoYCBoYXMgYmVlbiBvY2N1cGllZCwKLy8gc28gdXNlIGBzdHJva2VgIHRvIGluZGljYXRlIHRoZSBzdHJva2Ugb2YgdGhlIHJlY3QuClsnc3Ryb2tlJywgJ3N0cm9rZUNvbG9yJ10sIFsnbGluZVdpZHRoJywgJ3N0cm9rZVdpZHRoJ10sIFsnc2hhZG93Qmx1ciddLCBbJ3NoYWRvd09mZnNldFgnXSwgWydzaGFkb3dPZmZzZXRZJ10sIFsnc2hhZG93Q29sb3InXV0pOwoKdmFyIGdldEl0ZW1TdHlsZU5vcm1hbCA9IGZ1bmN0aW9uIGdldEl0ZW1TdHlsZU5vcm1hbChtb2RlbCkgewogIC8vIE5vcm1hbCBzdHlsZSBwcm9wcyBzaG91bGQgaW5jbHVkZSBlbXBoYXNpcyBzdHlsZSBwcm9wcy4KICB2YXIgaXRlbVN0eWxlID0gZ2V0SXRlbVN0eWxlRW1waGFzaXMobW9kZWwpOyAvLyBDbGVhciBzdHlsZXMgc2V0IGJ5IGVtcGhhc2lzLgoKICBpdGVtU3R5bGUuc3Ryb2tlID0gaXRlbVN0eWxlLmZpbGwgPSBpdGVtU3R5bGUubGluZVdpZHRoID0gbnVsbDsKICByZXR1cm4gaXRlbVN0eWxlOwp9OwoKdmFyIF9kZWZhdWx0ID0gZWNoYXJ0cy5leHRlbmRDaGFydFZpZXcoewogIHR5cGU6ICd0cmVlbWFwJywKCiAgLyoqCiAgICogQG92ZXJyaWRlCiAgICovCiAgaW5pdDogZnVuY3Rpb24gaW5pdChvLCBhcGkpIHsKICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHttb2R1bGU6enJlbmRlci9jb250YWluZXIvR3JvdXB9CiAgICAgKi8KICAgIHRoaXMuX2NvbnRhaW5lckdyb3VwOwogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHR5cGUge09iamVjdC48c3RyaW5nLCBBcnJheS48bW9kdWxlOnpyZW5kZXIvY29udGFpbmVyL0dyb3VwPj59CiAgICAgKi8KCiAgICB0aGlzLl9zdG9yYWdlID0gY3JlYXRlU3RvcmFnZSgpOwogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHR5cGUge21vZHVsZTplY2hhcnRzL2RhdGEvVHJlZX0KICAgICAqLwoKICAgIHRoaXMuX29sZFRyZWU7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7bW9kdWxlOmVjaGFydHMvY2hhcnQvdHJlZW1hcC9CcmVhZGNydW1ifQogICAgICovCgogICAgdGhpcy5fYnJlYWRjcnVtYjsKICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHttb2R1bGU6ZWNoYXJ0cy9jb21wb25lbnQvaGVscGVyL1JvYW1Db250cm9sbGVyfQogICAgICovCgogICAgdGhpcy5fY29udHJvbGxlcjsKICAgIC8qKgogICAgICogJ3JlYWR5JywgJ2FuaW1hdGluZycKICAgICAqIEBwcml2YXRlCiAgICAgKi8KCiAgICB0aGlzLl9zdGF0ZSA9ICdyZWFkeSc7CiAgfSwKCiAgLyoqCiAgICogQG92ZXJyaWRlCiAgICovCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoc2VyaWVzTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkgewogICAgdmFyIG1vZGVscyA9IGVjTW9kZWwuZmluZENvbXBvbmVudHMoewogICAgICBtYWluVHlwZTogJ3NlcmllcycsCiAgICAgIHN1YlR5cGU6ICd0cmVlbWFwJywKICAgICAgcXVlcnk6IHBheWxvYWQKICAgIH0pOwoKICAgIGlmICh6clV0aWwuaW5kZXhPZihtb2RlbHMsIHNlcmllc01vZGVsKSA8IDApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMuc2VyaWVzTW9kZWwgPSBzZXJpZXNNb2RlbDsKICAgIHRoaXMuYXBpID0gYXBpOwogICAgdGhpcy5lY01vZGVsID0gZWNNb2RlbDsKICAgIHZhciB0eXBlcyA9IFsndHJlZW1hcFpvb21Ub05vZGUnLCAndHJlZW1hcFJvb3RUb05vZGUnXTsKICAgIHZhciB0YXJnZXRJbmZvID0gaGVscGVyLnJldHJpZXZlVGFyZ2V0SW5mbyhwYXlsb2FkLCB0eXBlcywgc2VyaWVzTW9kZWwpOwogICAgdmFyIHBheWxvYWRUeXBlID0gcGF5bG9hZCAmJiBwYXlsb2FkLnR5cGU7CiAgICB2YXIgbGF5b3V0SW5mbyA9IHNlcmllc01vZGVsLmxheW91dEluZm87CiAgICB2YXIgaXNJbml0ID0gIXRoaXMuX29sZFRyZWU7CiAgICB2YXIgdGhpc1N0b3JhZ2UgPSB0aGlzLl9zdG9yYWdlOyAvLyBNYXJrIG5ldyByb290IHdoZW4gYWN0aW9uIGlzIHRyZWVtYXBSb290VG9Ob2RlLgoKICAgIHZhciByZVJvb3QgPSBwYXlsb2FkVHlwZSA9PT0gJ3RyZWVtYXBSb290VG9Ob2RlJyAmJiB0YXJnZXRJbmZvICYmIHRoaXNTdG9yYWdlID8gewogICAgICByb290Tm9kZUdyb3VwOiB0aGlzU3RvcmFnZS5ub2RlR3JvdXBbdGFyZ2V0SW5mby5ub2RlLmdldFJhd0luZGV4KCldLAogICAgICBkaXJlY3Rpb246IHBheWxvYWQuZGlyZWN0aW9uCiAgICB9IDogbnVsbDsKCiAgICB2YXIgY29udGFpbmVyR3JvdXAgPSB0aGlzLl9naXZlQ29udGFpbmVyR3JvdXAobGF5b3V0SW5mbyk7CgogICAgdmFyIHJlbmRlclJlc3VsdCA9IHRoaXMuX2RvUmVuZGVyKGNvbnRhaW5lckdyb3VwLCBzZXJpZXNNb2RlbCwgcmVSb290KTsKCiAgICAhaXNJbml0ICYmICghcGF5bG9hZFR5cGUgfHwgcGF5bG9hZFR5cGUgPT09ICd0cmVlbWFwWm9vbVRvTm9kZScgfHwgcGF5bG9hZFR5cGUgPT09ICd0cmVlbWFwUm9vdFRvTm9kZScpID8gdGhpcy5fZG9BbmltYXRpb24oY29udGFpbmVyR3JvdXAsIHJlbmRlclJlc3VsdCwgc2VyaWVzTW9kZWwsIHJlUm9vdCkgOiByZW5kZXJSZXN1bHQucmVuZGVyRmluYWxseSgpOwoKICAgIHRoaXMuX3Jlc2V0Q29udHJvbGxlcihhcGkpOwoKICAgIHRoaXMuX3JlbmRlckJyZWFkY3J1bWIoc2VyaWVzTW9kZWwsIGFwaSwgdGFyZ2V0SW5mbyk7CiAgfSwKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBfZ2l2ZUNvbnRhaW5lckdyb3VwOiBmdW5jdGlvbiBfZ2l2ZUNvbnRhaW5lckdyb3VwKGxheW91dEluZm8pIHsKICAgIHZhciBjb250YWluZXJHcm91cCA9IHRoaXMuX2NvbnRhaW5lckdyb3VwOwoKICAgIGlmICghY29udGFpbmVyR3JvdXApIHsKICAgICAgLy8gRklYTUUKICAgICAgLy8g5Yqg5LiA5bGCY29udGFpbmVyR3JvdXDmmK/kuLrkuoZjbGlw77yM5L2G5piv546w5ZyoY2xpcOWKn+iDveW5tuayoeacieWunueOsOOAggogICAgICBjb250YWluZXJHcm91cCA9IHRoaXMuX2NvbnRhaW5lckdyb3VwID0gbmV3IEdyb3VwKCk7CgogICAgICB0aGlzLl9pbml0RXZlbnRzKGNvbnRhaW5lckdyb3VwKTsKCiAgICAgIHRoaXMuZ3JvdXAuYWRkKGNvbnRhaW5lckdyb3VwKTsKICAgIH0KCiAgICBjb250YWluZXJHcm91cC5hdHRyKCdwb3NpdGlvbicsIFtsYXlvdXRJbmZvLngsIGxheW91dEluZm8ueV0pOwogICAgcmV0dXJuIGNvbnRhaW5lckdyb3VwOwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgX2RvUmVuZGVyOiBmdW5jdGlvbiBfZG9SZW5kZXIoY29udGFpbmVyR3JvdXAsIHNlcmllc01vZGVsLCByZVJvb3QpIHsKICAgIHZhciB0aGlzVHJlZSA9IHNlcmllc01vZGVsLmdldERhdGEoKS50cmVlOwogICAgdmFyIG9sZFRyZWUgPSB0aGlzLl9vbGRUcmVlOyAvLyBDbGVhciBsYXN0IHNoYXBlIHJlY29yZHMuCgogICAgdmFyIGxhc3RzRm9yQW5pbWF0aW9uID0gY3JlYXRlU3RvcmFnZSgpOwogICAgdmFyIHRoaXNTdG9yYWdlID0gY3JlYXRlU3RvcmFnZSgpOwogICAgdmFyIG9sZFN0b3JhZ2UgPSB0aGlzLl9zdG9yYWdlOwogICAgdmFyIHdpbGxJbnZpc2libGVFbHMgPSBbXTsKICAgIHZhciBkb1JlbmRlck5vZGUgPSB6clV0aWwuY3VycnkocmVuZGVyTm9kZSwgc2VyaWVzTW9kZWwsIHRoaXNTdG9yYWdlLCBvbGRTdG9yYWdlLCByZVJvb3QsIGxhc3RzRm9yQW5pbWF0aW9uLCB3aWxsSW52aXNpYmxlRWxzKTsgLy8gTm90aWNlOiB3aGVuIHRoaXNUcmVlIGFuZCBvbGRUcmVlIGFyZSB0aGUgc2FtZSB0cmVlIChzZWUgbGlzdC5jbG9uZVNoYWxsb3cpLAogICAgLy8gdGhlIG9sZFRyZWUgaXMgYWN0dWFsbHkgbG9zdGVkLCBzbyB3ZSBjYW4gbm90IGZpbmQgYWxsIG9mIHRoZSBvbGQgZ3JhcGhpYwogICAgLy8gZWxlbWVudHMgZnJvbSB0cmVlLiBTbyB3ZSB1c2UgdGhpcyBzdHJhZ2VneTogbWFrZSBlbGVtZW50IHN0b3JhZ2UsIG1vdmUKICAgIC8vIGZyb20gb2xkIHN0b3JhZ2UgdG8gbmV3IHN0b3JhZ2UsIGNsZWFyIG9sZCBzdG9yYWdlLgoKICAgIGR1YWxUcmF2ZWwodGhpc1RyZWUucm9vdCA/IFt0aGlzVHJlZS5yb290XSA6IFtdLCBvbGRUcmVlICYmIG9sZFRyZWUucm9vdCA/IFtvbGRUcmVlLnJvb3RdIDogW10sIGNvbnRhaW5lckdyb3VwLCB0aGlzVHJlZSA9PT0gb2xkVHJlZSB8fCAhb2xkVHJlZSwgMCk7IC8vIFByb2Nlc3MgYWxsIHJlbW92aW5nLgoKICAgIHZhciB3aWxsRGVsZXRlRWxzID0gY2xlYXJTdG9yYWdlKG9sZFN0b3JhZ2UpOwogICAgdGhpcy5fb2xkVHJlZSA9IHRoaXNUcmVlOwogICAgdGhpcy5fc3RvcmFnZSA9IHRoaXNTdG9yYWdlOwogICAgcmV0dXJuIHsKICAgICAgbGFzdHNGb3JBbmltYXRpb246IGxhc3RzRm9yQW5pbWF0aW9uLAogICAgICB3aWxsRGVsZXRlRWxzOiB3aWxsRGVsZXRlRWxzLAogICAgICByZW5kZXJGaW5hbGx5OiByZW5kZXJGaW5hbGx5CiAgICB9OwoKICAgIGZ1bmN0aW9uIGR1YWxUcmF2ZWwodGhpc1ZpZXdDaGlsZHJlbiwgb2xkVmlld0NoaWxkcmVuLCBwYXJlbnRHcm91cCwgc2FtZVRyZWUsIGRlcHRoKSB7CiAgICAgIC8vIFdoZW4gJ3JlbmRlcicgaXMgdHJpZ2dlcmVkIGJ5IGFjdGlvbiwKICAgICAgLy8gJ3RoaXMnIGFuZCAnb2xkJyBtYXkgYmUgdGhlIHNhbWUgdHJlZSwKICAgICAgLy8gd2UgdXNlIHJhd0luZGV4IGluIHRoYXQgY2FzZS4KICAgICAgaWYgKHNhbWVUcmVlKSB7CiAgICAgICAgb2xkVmlld0NoaWxkcmVuID0gdGhpc1ZpZXdDaGlsZHJlbjsKICAgICAgICBlYWNoKHRoaXNWaWV3Q2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCwgaW5kZXgpIHsKICAgICAgICAgICFjaGlsZC5pc1JlbW92ZWQoKSAmJiBwcm9jZXNzTm9kZShpbmRleCwgaW5kZXgpOwogICAgICAgIH0pOwogICAgICB9IC8vIERpZmYgaGllcmFyY2hpY2FsbHkgKGRpZmYgb25seSBpbiBlYWNoIHN1YnRyZWUsIGJ1dCBub3Qgd2hvbGUpLgogICAgICAvLyBiZWNhdXNlLCBjb25zaXN0ZW5jeSBvZiB2aWV3IGlzIGltcG9ydGFudC4KICAgICAgZWxzZSB7CiAgICAgICAgICBuZXcgRGF0YURpZmZlcihvbGRWaWV3Q2hpbGRyZW4sIHRoaXNWaWV3Q2hpbGRyZW4sIGdldEtleSwgZ2V0S2V5KS5hZGQocHJvY2Vzc05vZGUpLnVwZGF0ZShwcm9jZXNzTm9kZSkucmVtb3ZlKHpyVXRpbC5jdXJyeShwcm9jZXNzTm9kZSwgbnVsbCkpLmV4ZWN1dGUoKTsKICAgICAgICB9CgogICAgICBmdW5jdGlvbiBnZXRLZXkobm9kZSkgewogICAgICAgIC8vIElkZW50aWZ5IGJ5IG5hbWUgb3IgcmF3IGluZGV4LgogICAgICAgIHJldHVybiBub2RlLmdldElkKCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHByb2Nlc3NOb2RlKG5ld0luZGV4LCBvbGRJbmRleCkgewogICAgICAgIHZhciB0aGlzTm9kZSA9IG5ld0luZGV4ICE9IG51bGwgPyB0aGlzVmlld0NoaWxkcmVuW25ld0luZGV4XSA6IG51bGw7CiAgICAgICAgdmFyIG9sZE5vZGUgPSBvbGRJbmRleCAhPSBudWxsID8gb2xkVmlld0NoaWxkcmVuW29sZEluZGV4XSA6IG51bGw7CiAgICAgICAgdmFyIGdyb3VwID0gZG9SZW5kZXJOb2RlKHRoaXNOb2RlLCBvbGROb2RlLCBwYXJlbnRHcm91cCwgZGVwdGgpOwogICAgICAgIGdyb3VwICYmIGR1YWxUcmF2ZWwodGhpc05vZGUgJiYgdGhpc05vZGUudmlld0NoaWxkcmVuIHx8IFtdLCBvbGROb2RlICYmIG9sZE5vZGUudmlld0NoaWxkcmVuIHx8IFtdLCBncm91cCwgc2FtZVRyZWUsIGRlcHRoICsgMSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhclN0b3JhZ2Uoc3RvcmFnZSkgewogICAgICB2YXIgd2lsbERlbGV0ZUVscyA9IGNyZWF0ZVN0b3JhZ2UoKTsKICAgICAgc3RvcmFnZSAmJiBlYWNoKHN0b3JhZ2UsIGZ1bmN0aW9uIChzdG9yZSwgc3RvcmFnZU5hbWUpIHsKICAgICAgICB2YXIgZGVsRWxzID0gd2lsbERlbGV0ZUVsc1tzdG9yYWdlTmFtZV07CiAgICAgICAgZWFjaChzdG9yZSwgZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBlbCAmJiAoZGVsRWxzLnB1c2goZWwpLCBlbC5fX3RtV2lsbERlbGV0ZSA9IDEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHdpbGxEZWxldGVFbHM7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyRmluYWxseSgpIHsKICAgICAgZWFjaCh3aWxsRGVsZXRlRWxzLCBmdW5jdGlvbiAoZWxzKSB7CiAgICAgICAgZWFjaChlbHMsIGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgZWwucGFyZW50ICYmIGVsLnBhcmVudC5yZW1vdmUoZWwpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgZWFjaCh3aWxsSW52aXNpYmxlRWxzLCBmdW5jdGlvbiAoZWwpIHsKICAgICAgICBlbC5pbnZpc2libGUgPSB0cnVlOyAvLyBTZXR0aW5nIGludmlzaWJsZSBpcyBmb3Igb3B0aW1pemluZywgc28gbm8gbmVlZCB0byBzZXQgZGlydHksCiAgICAgICAgLy8ganVzdCBtYXJrIGFzIGludmlzaWJsZS4KCiAgICAgICAgZWwuZGlydHkoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBfZG9BbmltYXRpb246IGZ1bmN0aW9uIF9kb0FuaW1hdGlvbihjb250YWluZXJHcm91cCwgcmVuZGVyUmVzdWx0LCBzZXJpZXNNb2RlbCwgcmVSb290KSB7CiAgICBpZiAoIXNlcmllc01vZGVsLmdldCgnYW5pbWF0aW9uJykpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBkdXJhdGlvbiA9IHNlcmllc01vZGVsLmdldCgnYW5pbWF0aW9uRHVyYXRpb25VcGRhdGUnKTsKICAgIHZhciBlYXNpbmcgPSBzZXJpZXNNb2RlbC5nZXQoJ2FuaW1hdGlvbkVhc2luZycpOwogICAgdmFyIGFuaW1hdGlvbldyYXAgPSBhbmltYXRpb25VdGlsLmNyZWF0ZVdyYXAoKTsgLy8gTWFrZSBkZWxldGUgYW5pbWF0aW9ucy4KCiAgICBlYWNoKHJlbmRlclJlc3VsdC53aWxsRGVsZXRlRWxzLCBmdW5jdGlvbiAoc3RvcmUsIHN0b3JhZ2VOYW1lKSB7CiAgICAgIGVhY2goc3RvcmUsIGZ1bmN0aW9uIChlbCwgcmF3SW5kZXgpIHsKICAgICAgICBpZiAoZWwuaW52aXNpYmxlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50OyAvLyBBbHdheXMgaGFzIHBhcmVudCwgYW5kIHBhcmVudCBpcyBub2RlR3JvdXAuCgogICAgICAgIHZhciB0YXJnZXQ7CgogICAgICAgIGlmIChyZVJvb3QgJiYgcmVSb290LmRpcmVjdGlvbiA9PT0gJ2RyaWxsRG93bicpIHsKICAgICAgICAgIHRhcmdldCA9IHBhcmVudCA9PT0gcmVSb290LnJvb3ROb2RlR3JvdXAgLy8gVGhpcyBpcyB0aGUgY29udGVudCBlbGVtZW50IG9mIHZpZXcgcm9vdC4KICAgICAgICAgIC8vIE9ubHkgYGNvbnRlbnRgIHdpbGwgZW50ZXIgdGhpcyBicmFuY2gsIGJlY2F1c2UKICAgICAgICAgIC8vIGBiYWNrZ3JvdW5kYCBhbmQgYG5vZGVHcm91cGAgd2lsbCBub3QgYmUgZGVsZXRlZC4KICAgICAgICAgID8gewogICAgICAgICAgICBzaGFwZTogewogICAgICAgICAgICAgIHg6IDAsCiAgICAgICAgICAgICAgeTogMCwKICAgICAgICAgICAgICB3aWR0aDogcGFyZW50Ll9fdG1Ob2RlV2lkdGgsCiAgICAgICAgICAgICAgaGVpZ2h0OiBwYXJlbnQuX190bU5vZGVIZWlnaHQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICBvcGFjaXR5OiAwCiAgICAgICAgICAgIH0gLy8gT3RoZXJzLgoKICAgICAgICAgIH0gOiB7CiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgb3BhY2l0eTogMAogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgdGFyZ2V0WCA9IDA7CiAgICAgICAgICB2YXIgdGFyZ2V0WSA9IDA7CgogICAgICAgICAgaWYgKCFwYXJlbnQuX190bVdpbGxEZWxldGUpIHsKICAgICAgICAgICAgLy8gTGV0IG5vZGUgYW5pbWF0ZSB0byByaWdodC1ib3R0b20gY29ybmVyLCBjb29wZXJhdGluZyB3aXRoIGZhZGVvdXQsCiAgICAgICAgICAgIC8vIHdoaWNoIGlzIGFwcHJvcHJpYXRlIGZvciB1c2VyIHVuZGVyc3RhbmRpbmcuCiAgICAgICAgICAgIC8vIERpdmlkZWQgYnkgMiBmb3IgcmVSb290IHJvbGxpbmcgdXAgZWZmZWN0LgogICAgICAgICAgICB0YXJnZXRYID0gcGFyZW50Ll9fdG1Ob2RlV2lkdGggLyAyOwogICAgICAgICAgICB0YXJnZXRZID0gcGFyZW50Ll9fdG1Ob2RlSGVpZ2h0IC8gMjsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQgPSBzdG9yYWdlTmFtZSA9PT0gJ25vZGVHcm91cCcgPyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBbdGFyZ2V0WCwgdGFyZ2V0WV0sCiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgb3BhY2l0eTogMAogICAgICAgICAgICB9CiAgICAgICAgICB9IDogewogICAgICAgICAgICBzaGFwZTogewogICAgICAgICAgICAgIHg6IHRhcmdldFgsCiAgICAgICAgICAgICAgeTogdGFyZ2V0WSwKICAgICAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgICAgICBoZWlnaHQ6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICBvcGFjaXR5OiAwCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICB0YXJnZXQgJiYgYW5pbWF0aW9uV3JhcC5hZGQoZWwsIHRhcmdldCwgZHVyYXRpb24sIGVhc2luZyk7CiAgICAgIH0pOwogICAgfSk7IC8vIE1ha2Ugb3RoZXIgYW5pbWF0aW9ucwoKICAgIGVhY2godGhpcy5fc3RvcmFnZSwgZnVuY3Rpb24gKHN0b3JlLCBzdG9yYWdlTmFtZSkgewogICAgICBlYWNoKHN0b3JlLCBmdW5jdGlvbiAoZWwsIHJhd0luZGV4KSB7CiAgICAgICAgdmFyIGxhc3QgPSByZW5kZXJSZXN1bHQubGFzdHNGb3JBbmltYXRpb25bc3RvcmFnZU5hbWVdW3Jhd0luZGV4XTsKICAgICAgICB2YXIgdGFyZ2V0ID0ge307CgogICAgICAgIGlmICghbGFzdCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN0b3JhZ2VOYW1lID09PSAnbm9kZUdyb3VwJykgewogICAgICAgICAgaWYgKGxhc3Qub2xkKSB7CiAgICAgICAgICAgIHRhcmdldC5wb3NpdGlvbiA9IGVsLnBvc2l0aW9uLnNsaWNlKCk7CiAgICAgICAgICAgIGVsLmF0dHIoJ3Bvc2l0aW9uJywgbGFzdC5vbGQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAobGFzdC5vbGQpIHsKICAgICAgICAgICAgdGFyZ2V0LnNoYXBlID0genJVdGlsLmV4dGVuZCh7fSwgZWwuc2hhcGUpOwogICAgICAgICAgICBlbC5zZXRTaGFwZShsYXN0Lm9sZCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGxhc3QuZmFkZWluKSB7CiAgICAgICAgICAgIGVsLnNldFN0eWxlKCdvcGFjaXR5JywgMCk7CiAgICAgICAgICAgIHRhcmdldC5zdHlsZSA9IHsKICAgICAgICAgICAgICBvcGFjaXR5OiAxCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IC8vIFdoZW4gYW5pbWF0aW9uIGlzIHN0b3BwZWQgZm9yIHN1Y2NlZGVudCBhbmltYXRpb24gc3RhcnRpbmcsCiAgICAgICAgICAvLyBlbC5zdHlsZS5vcGFjaXR5IG1pZ2h0IG5vdCBiZSAxCiAgICAgICAgICBlbHNlIGlmIChlbC5zdHlsZS5vcGFjaXR5ICE9PSAxKSB7CiAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlID0gewogICAgICAgICAgICAgICAgb3BhY2l0eTogMQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFuaW1hdGlvbldyYXAuYWRkKGVsLCB0YXJnZXQsIGR1cmF0aW9uLCBlYXNpbmcpOwogICAgICB9KTsKICAgIH0sIHRoaXMpOwogICAgdGhpcy5fc3RhdGUgPSAnYW5pbWF0aW5nJzsKICAgIGFuaW1hdGlvbldyYXAuZG9uZShiaW5kKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5fc3RhdGUgPSAncmVhZHknOwogICAgICByZW5kZXJSZXN1bHQucmVuZGVyRmluYWxseSgpOwogICAgfSwgdGhpcykpLnN0YXJ0KCk7CiAgfSwKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBfcmVzZXRDb250cm9sbGVyOiBmdW5jdGlvbiBfcmVzZXRDb250cm9sbGVyKGFwaSkgewogICAgdmFyIGNvbnRyb2xsZXIgPSB0aGlzLl9jb250cm9sbGVyOyAvLyBJbml0IGNvbnRyb2xsZXIuCgogICAgaWYgKCFjb250cm9sbGVyKSB7CiAgICAgIGNvbnRyb2xsZXIgPSB0aGlzLl9jb250cm9sbGVyID0gbmV3IFJvYW1Db250cm9sbGVyKGFwaS5nZXRacigpKTsKICAgICAgY29udHJvbGxlci5lbmFibGUodGhpcy5zZXJpZXNNb2RlbC5nZXQoJ3JvYW0nKSk7CiAgICAgIGNvbnRyb2xsZXIub24oJ3BhbicsIGJpbmQodGhpcy5fb25QYW4sIHRoaXMpKTsKICAgICAgY29udHJvbGxlci5vbignem9vbScsIGJpbmQodGhpcy5fb25ab29tLCB0aGlzKSk7CiAgICB9CgogICAgdmFyIHJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KDAsIDAsIGFwaS5nZXRXaWR0aCgpLCBhcGkuZ2V0SGVpZ2h0KCkpOwogICAgY29udHJvbGxlci5zZXRQb2ludGVyQ2hlY2tlcihmdW5jdGlvbiAoZSwgeCwgeSkgewogICAgICByZXR1cm4gcmVjdC5jb250YWluKHgsIHkpOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBfY2xlYXJDb250cm9sbGVyOiBmdW5jdGlvbiBfY2xlYXJDb250cm9sbGVyKCkgewogICAgdmFyIGNvbnRyb2xsZXIgPSB0aGlzLl9jb250cm9sbGVyOwoKICAgIGlmIChjb250cm9sbGVyKSB7CiAgICAgIGNvbnRyb2xsZXIuZGlzcG9zZSgpOwogICAgICBjb250cm9sbGVyID0gbnVsbDsKICAgIH0KICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIF9vblBhbjogZnVuY3Rpb24gX29uUGFuKGUpIHsKICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gJ2FuaW1hdGluZycgJiYgKE1hdGguYWJzKGUuZHgpID4gRFJBR19USFJFU0hPTEQgfHwgTWF0aC5hYnMoZS5keSkgPiBEUkFHX1RIUkVTSE9MRCkpIHsKICAgICAgLy8gVGhlc2UgcGFyYW0gbXVzdCBub3QgYmUgY2FjaGVkLgogICAgICB2YXIgcm9vdCA9IHRoaXMuc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLnRyZWUucm9vdDsKCiAgICAgIGlmICghcm9vdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJvb3RMYXlvdXQgPSByb290LmdldExheW91dCgpOwoKICAgICAgaWYgKCFyb290TGF5b3V0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7CiAgICAgICAgdHlwZTogJ3RyZWVtYXBNb3ZlJywKICAgICAgICBmcm9tOiB0aGlzLnVpZCwKICAgICAgICBzZXJpZXNJZDogdGhpcy5zZXJpZXNNb2RlbC5pZCwKICAgICAgICByb290UmVjdDogewogICAgICAgICAgeDogcm9vdExheW91dC54ICsgZS5keCwKICAgICAgICAgIHk6IHJvb3RMYXlvdXQueSArIGUuZHksCiAgICAgICAgICB3aWR0aDogcm9vdExheW91dC53aWR0aCwKICAgICAgICAgIGhlaWdodDogcm9vdExheW91dC5oZWlnaHQKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgX29uWm9vbTogZnVuY3Rpb24gX29uWm9vbShlKSB7CiAgICB2YXIgbW91c2VYID0gZS5vcmlnaW5YOwogICAgdmFyIG1vdXNlWSA9IGUub3JpZ2luWTsKCiAgICBpZiAodGhpcy5fc3RhdGUgIT09ICdhbmltYXRpbmcnKSB7CiAgICAgIC8vIFRoZXNlIHBhcmFtIG11c3Qgbm90IGJlIGNhY2hlZC4KICAgICAgdmFyIHJvb3QgPSB0aGlzLnNlcmllc01vZGVsLmdldERhdGEoKS50cmVlLnJvb3Q7CgogICAgICBpZiAoIXJvb3QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByb290TGF5b3V0ID0gcm9vdC5nZXRMYXlvdXQoKTsKCiAgICAgIGlmICghcm9vdExheW91dCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJlY3QgPSBuZXcgQm91bmRpbmdSZWN0KHJvb3RMYXlvdXQueCwgcm9vdExheW91dC55LCByb290TGF5b3V0LndpZHRoLCByb290TGF5b3V0LmhlaWdodCk7CiAgICAgIHZhciBsYXlvdXRJbmZvID0gdGhpcy5zZXJpZXNNb2RlbC5sYXlvdXRJbmZvOyAvLyBUcmFuc2Zvcm0gbW91c2UgY29vcmQgZnJvbSBnbG9iYWwgdG8gY29udGFpbmVyR3JvdXAuCgogICAgICBtb3VzZVggLT0gbGF5b3V0SW5mby54OwogICAgICBtb3VzZVkgLT0gbGF5b3V0SW5mby55OyAvLyBTY2FsZSByb290IGJvdW5kaW5nIHJlY3QuCgogICAgICB2YXIgbSA9IG1hdHJpeC5jcmVhdGUoKTsKICAgICAgbWF0cml4LnRyYW5zbGF0ZShtLCBtLCBbLW1vdXNlWCwgLW1vdXNlWV0pOwogICAgICBtYXRyaXguc2NhbGUobSwgbSwgW2Uuc2NhbGUsIGUuc2NhbGVdKTsKICAgICAgbWF0cml4LnRyYW5zbGF0ZShtLCBtLCBbbW91c2VYLCBtb3VzZVldKTsKICAgICAgcmVjdC5hcHBseVRyYW5zZm9ybShtKTsKICAgICAgdGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oewogICAgICAgIHR5cGU6ICd0cmVlbWFwUmVuZGVyJywKICAgICAgICBmcm9tOiB0aGlzLnVpZCwKICAgICAgICBzZXJpZXNJZDogdGhpcy5zZXJpZXNNb2RlbC5pZCwKICAgICAgICByb290UmVjdDogewogICAgICAgICAgeDogcmVjdC54LAogICAgICAgICAgeTogcmVjdC55LAogICAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIF9pbml0RXZlbnRzOiBmdW5jdGlvbiBfaW5pdEV2ZW50cyhjb250YWluZXJHcm91cCkgewogICAgY29udGFpbmVyR3JvdXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSAncmVhZHknKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbm9kZUNsaWNrID0gdGhpcy5zZXJpZXNNb2RlbC5nZXQoJ25vZGVDbGljaycsIHRydWUpOwoKICAgICAgaWYgKCFub2RlQ2xpY2spIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB0YXJnZXRJbmZvID0gdGhpcy5maW5kVGFyZ2V0KGUub2Zmc2V0WCwgZS5vZmZzZXRZKTsKCiAgICAgIGlmICghdGFyZ2V0SW5mbykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5vZGUgPSB0YXJnZXRJbmZvLm5vZGU7CgogICAgICBpZiAobm9kZS5nZXRMYXlvdXQoKS5pc0xlYWZSb290KSB7CiAgICAgICAgdGhpcy5fcm9vdFRvTm9kZSh0YXJnZXRJbmZvKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobm9kZUNsaWNrID09PSAnem9vbVRvTm9kZScpIHsKICAgICAgICAgIHRoaXMuX3pvb21Ub05vZGUodGFyZ2V0SW5mbyk7CiAgICAgICAgfSBlbHNlIGlmIChub2RlQ2xpY2sgPT09ICdsaW5rJykgewogICAgICAgICAgdmFyIGl0ZW1Nb2RlbCA9IG5vZGUuaG9zdFRyZWUuZGF0YS5nZXRJdGVtTW9kZWwobm9kZS5kYXRhSW5kZXgpOwogICAgICAgICAgdmFyIGxpbmsgPSBpdGVtTW9kZWwuZ2V0KCdsaW5rJywgdHJ1ZSk7CiAgICAgICAgICB2YXIgbGlua1RhcmdldCA9IGl0ZW1Nb2RlbC5nZXQoJ3RhcmdldCcsIHRydWUpIHx8ICdibGFuayc7CiAgICAgICAgICBsaW5rICYmIHdpbmRvd09wZW4obGluaywgbGlua1RhcmdldCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCB0aGlzKTsKICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIF9yZW5kZXJCcmVhZGNydW1iOiBmdW5jdGlvbiBfcmVuZGVyQnJlYWRjcnVtYihzZXJpZXNNb2RlbCwgYXBpLCB0YXJnZXRJbmZvKSB7CiAgICBpZiAoIXRhcmdldEluZm8pIHsKICAgICAgdGFyZ2V0SW5mbyA9IHNlcmllc01vZGVsLmdldCgnbGVhZkRlcHRoJywgdHJ1ZSkgIT0gbnVsbCA/IHsKICAgICAgICBub2RlOiBzZXJpZXNNb2RlbC5nZXRWaWV3Um9vdCgpIC8vIEZJWE1FCiAgICAgICAgLy8gYmV0dGVyIHdheT8KICAgICAgICAvLyBGaW5kIGJyZWFkY3J1bWIgdGFpbCBvbiBjZW50ZXIgb2YgY29udGFpbmVyR3JvdXAuCgogICAgICB9IDogdGhpcy5maW5kVGFyZ2V0KGFwaS5nZXRXaWR0aCgpIC8gMiwgYXBpLmdldEhlaWdodCgpIC8gMik7CgogICAgICBpZiAoIXRhcmdldEluZm8pIHsKICAgICAgICB0YXJnZXRJbmZvID0gewogICAgICAgICAgbm9kZTogc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLnRyZWUucm9vdAogICAgICAgIH07CiAgICAgIH0KICAgIH0KCiAgICAodGhpcy5fYnJlYWRjcnVtYiB8fCAodGhpcy5fYnJlYWRjcnVtYiA9IG5ldyBCcmVhZGNydW1iKHRoaXMuZ3JvdXApKSkucmVuZGVyKHNlcmllc01vZGVsLCBhcGksIHRhcmdldEluZm8ubm9kZSwgYmluZChvblNlbGVjdCwgdGhpcykpOwoKICAgIGZ1bmN0aW9uIG9uU2VsZWN0KG5vZGUpIHsKICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSAnYW5pbWF0aW5nJykgewogICAgICAgIGhlbHBlci5hYm92ZVZpZXdSb290KHNlcmllc01vZGVsLmdldFZpZXdSb290KCksIG5vZGUpID8gdGhpcy5fcm9vdFRvTm9kZSh7CiAgICAgICAgICBub2RlOiBub2RlCiAgICAgICAgfSkgOiB0aGlzLl96b29tVG9Ob2RlKHsKICAgICAgICAgIG5vZGU6IG5vZGUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCgogIC8qKgogICAqIEBvdmVycmlkZQogICAqLwogIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgdGhpcy5fY2xlYXJDb250cm9sbGVyKCk7CgogICAgdGhpcy5fY29udGFpbmVyR3JvdXAgJiYgdGhpcy5fY29udGFpbmVyR3JvdXAucmVtb3ZlQWxsKCk7CiAgICB0aGlzLl9zdG9yYWdlID0gY3JlYXRlU3RvcmFnZSgpOwogICAgdGhpcy5fc3RhdGUgPSAncmVhZHknOwogICAgdGhpcy5fYnJlYWRjcnVtYiAmJiB0aGlzLl9icmVhZGNydW1iLnJlbW92ZSgpOwogIH0sCiAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgIHRoaXMuX2NsZWFyQ29udHJvbGxlcigpOwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgX3pvb21Ub05vZGU6IGZ1bmN0aW9uIF96b29tVG9Ob2RlKHRhcmdldEluZm8pIHsKICAgIHRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHsKICAgICAgdHlwZTogJ3RyZWVtYXBab29tVG9Ob2RlJywKICAgICAgZnJvbTogdGhpcy51aWQsCiAgICAgIHNlcmllc0lkOiB0aGlzLnNlcmllc01vZGVsLmlkLAogICAgICB0YXJnZXROb2RlOiB0YXJnZXRJbmZvLm5vZGUKICAgIH0pOwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgX3Jvb3RUb05vZGU6IGZ1bmN0aW9uIF9yb290VG9Ob2RlKHRhcmdldEluZm8pIHsKICAgIHRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHsKICAgICAgdHlwZTogJ3RyZWVtYXBSb290VG9Ob2RlJywKICAgICAgZnJvbTogdGhpcy51aWQsCiAgICAgIHNlcmllc0lkOiB0aGlzLnNlcmllc01vZGVsLmlkLAogICAgICB0YXJnZXROb2RlOiB0YXJnZXRJbmZvLm5vZGUKICAgIH0pOwogIH0sCgogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAcGFyYW0ge251bWJlcn0geCBHbG9iYWwgY29vcmQgeC4KICAgKiBAcGFyYW0ge251bWJlcn0geSBHbG9iYWwgY29vcmQgeS4KICAgKiBAcmV0dXJuIHtPYmplY3R9IGluZm8gSWYgbm90IGZvdW5kLCByZXR1cm4gdW5kZWZpbmVkOwogICAqIEByZXR1cm4ge251bWJlcn0gaW5mby5ub2RlIFRhcmdldCBub2RlLgogICAqIEByZXR1cm4ge251bWJlcn0gaW5mby5vZmZzZXRYIHggcmVmZXIgdG8gdGFyZ2V0IG5vZGUuCiAgICogQHJldHVybiB7bnVtYmVyfSBpbmZvLm9mZnNldFkgeSByZWZlciB0byB0YXJnZXQgbm9kZS4KICAgKi8KICBmaW5kVGFyZ2V0OiBmdW5jdGlvbiBmaW5kVGFyZ2V0KHgsIHkpIHsKICAgIHZhciB0YXJnZXRJbmZvOwogICAgdmFyIHZpZXdSb290ID0gdGhpcy5zZXJpZXNNb2RlbC5nZXRWaWV3Um9vdCgpOwogICAgdmlld1Jvb3QuZWFjaE5vZGUoewogICAgICBhdHRyOiAndmlld0NoaWxkcmVuJywKICAgICAgb3JkZXI6ICdwcmVvcmRlcicKICAgIH0sIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHZhciBiZ0VsID0gdGhpcy5fc3RvcmFnZS5iYWNrZ3JvdW5kW25vZGUuZ2V0UmF3SW5kZXgoKV07IC8vIElmIGludmlzaWJsZSwgdGhlcmUgbWlnaHQgYmUgbm8gZWxlbWVudC4KCgogICAgICBpZiAoYmdFbCkgewogICAgICAgIHZhciBwb2ludCA9IGJnRWwudHJhbnNmb3JtQ29vcmRUb0xvY2FsKHgsIHkpOwogICAgICAgIHZhciBzaGFwZSA9IGJnRWwuc2hhcGU7IC8vIEZvciBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9uLCBkb250IHVzZSAnZ2V0Qm91bmRpbmdSZWN0Jy4KCiAgICAgICAgaWYgKHNoYXBlLnggPD0gcG9pbnRbMF0gJiYgcG9pbnRbMF0gPD0gc2hhcGUueCArIHNoYXBlLndpZHRoICYmIHNoYXBlLnkgPD0gcG9pbnRbMV0gJiYgcG9pbnRbMV0gPD0gc2hhcGUueSArIHNoYXBlLmhlaWdodCkgewogICAgICAgICAgdGFyZ2V0SW5mbyA9IHsKICAgICAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICAgICAgb2Zmc2V0WDogcG9pbnRbMF0sCiAgICAgICAgICAgIG9mZnNldFk6IHBvaW50WzFdCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFN1cHByZXNzIHZpc2l0IHN1YnRyZWUuCiAgICAgICAgfQogICAgICB9CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiB0YXJnZXRJbmZvOwogIH0KfSk7Ci8qKgogKiBAaW5uZXIKICovCgoKZnVuY3Rpb24gY3JlYXRlU3RvcmFnZSgpIHsKICByZXR1cm4gewogICAgbm9kZUdyb3VwOiBbXSwKICAgIGJhY2tncm91bmQ6IFtdLAogICAgY29udGVudDogW10KICB9Owp9Ci8qKgogKiBAaW5uZXIKICogQHJldHVybiBSZXR1cm4gdW5kZWZpbmVkIG1lYW5zIGRvIG5vdCB0cmF2ZWwgZnVydGhlci4KICovCgoKZnVuY3Rpb24gcmVuZGVyTm9kZShzZXJpZXNNb2RlbCwgdGhpc1N0b3JhZ2UsIG9sZFN0b3JhZ2UsIHJlUm9vdCwgbGFzdHNGb3JBbmltYXRpb24sIHdpbGxJbnZpc2libGVFbHMsIHRoaXNOb2RlLCBvbGROb2RlLCBwYXJlbnRHcm91cCwgZGVwdGgpIHsKICAvLyBXaGV0aGVyIHVuZGVyIHZpZXdSb290LgogIGlmICghdGhpc05vZGUpIHsKICAgIC8vIERlbGV0aW5nIG5vZGVzIHdpbGwgYmUgcGVyZm9ybWVkIGZpbmFsbHkuIFRoaXMgbWV0aG9kIGp1c3QgZmluZAogICAgLy8gZWxlbWVudCBmcm9tIG9sZCBzdG9yYWdlLCBvciBjcmVhdGUgbmV3IGVsZW1lbnQsIHNldCB0aGVtIHRvIG5ldwogICAgLy8gc3RvcmFnZSwgYW5kIHNldCBzdHlsZXMuCiAgICByZXR1cm47CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gU3RhcnQgb2YgY2xvc3VyZSB2YXJpYWJsZXMgYXZhaWxhYmxlIGluICJQcm9jZWR1cmVzIGluIHJlbmRlck5vZGUiLgoKCiAgdmFyIHRoaXNMYXlvdXQgPSB0aGlzTm9kZS5nZXRMYXlvdXQoKTsKICB2YXIgZGF0YSA9IHNlcmllc01vZGVsLmdldERhdGEoKTsgLy8gT25seSBmb3IgZW5hYmxpbmcgaGlnaGxpZ2h0L2Rvd25wbGF5LiBDbGVhciBmaXJzdGx5LgogIC8vIEJlY2F1c2Ugc29tZSBub2RlIHdpbGwgbm90IGJlIHJlbmRlcmVkLgoKICBkYXRhLnNldEl0ZW1HcmFwaGljRWwodGhpc05vZGUuZGF0YUluZGV4LCBudWxsKTsKCiAgaWYgKCF0aGlzTGF5b3V0IHx8ICF0aGlzTGF5b3V0LmlzSW5WaWV3KSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdGhpc1dpZHRoID0gdGhpc0xheW91dC53aWR0aDsKICB2YXIgdGhpc0hlaWdodCA9IHRoaXNMYXlvdXQuaGVpZ2h0OwogIHZhciBib3JkZXJXaWR0aCA9IHRoaXNMYXlvdXQuYm9yZGVyV2lkdGg7CiAgdmFyIHRoaXNJbnZpc2libGUgPSB0aGlzTGF5b3V0LmludmlzaWJsZTsKICB2YXIgdGhpc1Jhd0luZGV4ID0gdGhpc05vZGUuZ2V0UmF3SW5kZXgoKTsKICB2YXIgb2xkUmF3SW5kZXggPSBvbGROb2RlICYmIG9sZE5vZGUuZ2V0UmF3SW5kZXgoKTsKICB2YXIgdGhpc1ZpZXdDaGlsZHJlbiA9IHRoaXNOb2RlLnZpZXdDaGlsZHJlbjsKICB2YXIgdXBwZXJIZWlnaHQgPSB0aGlzTGF5b3V0LnVwcGVySGVpZ2h0OwogIHZhciBpc1BhcmVudCA9IHRoaXNWaWV3Q2hpbGRyZW4gJiYgdGhpc1ZpZXdDaGlsZHJlbi5sZW5ndGg7CiAgdmFyIGl0ZW1TdHlsZU5vcm1hbE1vZGVsID0gdGhpc05vZGUuZ2V0TW9kZWwoJ2l0ZW1TdHlsZScpOwogIHZhciBpdGVtU3R5bGVFbXBoYXNpc01vZGVsID0gdGhpc05vZGUuZ2V0TW9kZWwoJ2VtcGhhc2lzLml0ZW1TdHlsZScpOyAvLyBFbmQgb2YgY2xvc3VyZSBhcmlhYmxlcyBhdmFpbGFibGUgaW4gIlByb2NlZHVyZXMgaW4gcmVuZGVyTm9kZSIuCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBOb2RlIGdyb3VwCgogIHZhciBncm91cCA9IGdpdmVHcmFwaGljKCdub2RlR3JvdXAnLCBHcm91cCk7CgogIGlmICghZ3JvdXApIHsKICAgIHJldHVybjsKICB9CgogIHBhcmVudEdyb3VwLmFkZChncm91cCk7IC8vIHgseSBhcmUgbm90IHNldCB3aGVuIGVsIGlzIGFib3ZlIHZpZXcgcm9vdC4KCiAgZ3JvdXAuYXR0cigncG9zaXRpb24nLCBbdGhpc0xheW91dC54IHx8IDAsIHRoaXNMYXlvdXQueSB8fCAwXSk7CiAgZ3JvdXAuX190bU5vZGVXaWR0aCA9IHRoaXNXaWR0aDsKICBncm91cC5fX3RtTm9kZUhlaWdodCA9IHRoaXNIZWlnaHQ7CgogIGlmICh0aGlzTGF5b3V0LmlzQWJvdmVWaWV3Um9vdCkgewogICAgcmV0dXJuIGdyb3VwOwogIH0KCiAgdmFyIG5vZGVNb2RlbCA9IHRoaXNOb2RlLmdldE1vZGVsKCk7IC8vIEJhY2tncm91bmQKCiAgdmFyIGJnID0gZ2l2ZUdyYXBoaWMoJ2JhY2tncm91bmQnLCBSZWN0LCBkZXB0aCwgWl9CRyk7CiAgYmcgJiYgcmVuZGVyQmFja2dyb3VuZChncm91cCwgYmcsIGlzUGFyZW50ICYmIHRoaXNMYXlvdXQudXBwZXJMYWJlbEhlaWdodCk7IC8vIE5vIGNoaWxkcmVuLCByZW5kZXIgY29udGVudC4KCiAgaWYgKGlzUGFyZW50KSB7CiAgICAvLyBCZWNhdXNlIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiBhYm91dCAidHJhdmVyc2UiIGluIGdyYXBoaWMgaG92ZXIgc3R5bGUsIHdlCiAgICAvLyBjYW4gbm90IHNldCBob3ZlciBsaXN0ZW5lciBvbiB0aGUgImdyb3VwIiBvZiBub24tbGVhZiBub2RlLiBPdGhlcndpc2UgdGhlCiAgICAvLyBob3ZlciBldmVudCBmcm9tIHRoZSBkZXNjZW5kZW50cyB3aWxsIGJlIGxpc3RlbmVyZWQuCiAgICBpZiAoZ3JhcGhpYy5pc0hpZ2hEb3duRGlzcGF0Y2hlcihncm91cCkpIHsKICAgICAgZ3JhcGhpYy5zZXRBc0hpZ2hEb3duRGlzcGF0Y2hlcihncm91cCwgZmFsc2UpOwogICAgfQoKICAgIGlmIChiZykgewogICAgICBncmFwaGljLnNldEFzSGlnaERvd25EaXNwYXRjaGVyKGJnLCB0cnVlKTsgLy8gT25seSBmb3IgZW5hYmxpbmcgaGlnaGxpZ2h0L2Rvd25wbGF5LgoKICAgICAgZGF0YS5zZXRJdGVtR3JhcGhpY0VsKHRoaXNOb2RlLmRhdGFJbmRleCwgYmcpOwogICAgfQogIH0gZWxzZSB7CiAgICB2YXIgY29udGVudCA9IGdpdmVHcmFwaGljKCdjb250ZW50JywgUmVjdCwgZGVwdGgsIFpfQ09OVEVOVCk7CiAgICBjb250ZW50ICYmIHJlbmRlckNvbnRlbnQoZ3JvdXAsIGNvbnRlbnQpOwoKICAgIGlmIChiZyAmJiBncmFwaGljLmlzSGlnaERvd25EaXNwYXRjaGVyKGJnKSkgewogICAgICBncmFwaGljLnNldEFzSGlnaERvd25EaXNwYXRjaGVyKGJnLCBmYWxzZSk7CiAgICB9CgogICAgZ3JhcGhpYy5zZXRBc0hpZ2hEb3duRGlzcGF0Y2hlcihncm91cCwgdHJ1ZSk7IC8vIE9ubHkgZm9yIGVuYWJsaW5nIGhpZ2hsaWdodC9kb3ducGxheS4KCiAgICBkYXRhLnNldEl0ZW1HcmFwaGljRWwodGhpc05vZGUuZGF0YUluZGV4LCBncm91cCk7CiAgfQoKICByZXR1cm4gZ3JvdXA7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyB8IFByb2NlZHVyZXMgaW4gcmVuZGVyTm9kZSB8CiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICBmdW5jdGlvbiByZW5kZXJCYWNrZ3JvdW5kKGdyb3VwLCBiZywgdXNlVXBwZXJMYWJlbCkgewogICAgLy8gRm9yIHRvb2x0aXAuCiAgICBiZy5kYXRhSW5kZXggPSB0aGlzTm9kZS5kYXRhSW5kZXg7CiAgICBiZy5zZXJpZXNJbmRleCA9IHNlcmllc01vZGVsLnNlcmllc0luZGV4OwogICAgYmcuc2V0U2hhcGUoewogICAgICB4OiAwLAogICAgICB5OiAwLAogICAgICB3aWR0aDogdGhpc1dpZHRoLAogICAgICBoZWlnaHQ6IHRoaXNIZWlnaHQKICAgIH0pOwoKICAgIGlmICh0aGlzSW52aXNpYmxlKSB7CiAgICAgIC8vIElmIGludmlzaWJsZSwgZG8gbm90IHNldCB2aXN1YWwsIG90aGVyd2lzZSB0aGUgZWxlbWVudCB3aWxsCiAgICAgIC8vIGNoYW5nZSBpbW1lZGlhdGVseSBiZWZvcmUgYW5pbWF0aW9uLiBXZSB0aGluayBpdCBpcyBPSyB0bwogICAgICAvLyByZW1haW4gaXRzIG9yaWdpbiBjb2xvciB3aGVuIG1vdmluZyBvdXQgb2YgdGhlIHZpZXcgd2luZG93LgogICAgICBwcm9jZXNzSW52aXNpYmxlKGJnKTsKICAgIH0gZWxzZSB7CiAgICAgIGJnLmludmlzaWJsZSA9IGZhbHNlOwogICAgICB2YXIgdmlzdWFsQm9yZGVyQ29sb3IgPSB0aGlzTm9kZS5nZXRWaXN1YWwoJ2JvcmRlckNvbG9yJywgdHJ1ZSk7CiAgICAgIHZhciBlbXBoYXNpc0JvcmRlckNvbG9yID0gaXRlbVN0eWxlRW1waGFzaXNNb2RlbC5nZXQoJ2JvcmRlckNvbG9yJyk7CiAgICAgIHZhciBub3JtYWxTdHlsZSA9IGdldEl0ZW1TdHlsZU5vcm1hbChpdGVtU3R5bGVOb3JtYWxNb2RlbCk7CiAgICAgIG5vcm1hbFN0eWxlLmZpbGwgPSB2aXN1YWxCb3JkZXJDb2xvcjsKICAgICAgdmFyIGVtcGhhc2lzU3R5bGUgPSBnZXRJdGVtU3R5bGVFbXBoYXNpcyhpdGVtU3R5bGVFbXBoYXNpc01vZGVsKTsKICAgICAgZW1waGFzaXNTdHlsZS5maWxsID0gZW1waGFzaXNCb3JkZXJDb2xvcjsKCiAgICAgIGlmICh1c2VVcHBlckxhYmVsKSB7CiAgICAgICAgdmFyIHVwcGVyTGFiZWxXaWR0aCA9IHRoaXNXaWR0aCAtIDIgKiBib3JkZXJXaWR0aDsKICAgICAgICBwcmVwYXJlVGV4dChub3JtYWxTdHlsZSwgZW1waGFzaXNTdHlsZSwgdmlzdWFsQm9yZGVyQ29sb3IsIHVwcGVyTGFiZWxXaWR0aCwgdXBwZXJIZWlnaHQsIHsKICAgICAgICAgIHg6IGJvcmRlcldpZHRoLAogICAgICAgICAgeTogMCwKICAgICAgICAgIHdpZHRoOiB1cHBlckxhYmVsV2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IHVwcGVySGVpZ2h0CiAgICAgICAgfSk7CiAgICAgIH0gLy8gRm9yIG9sZCBiZy4KICAgICAgZWxzZSB7CiAgICAgICAgICBub3JtYWxTdHlsZS50ZXh0ID0gZW1waGFzaXNTdHlsZS50ZXh0ID0gbnVsbDsKICAgICAgICB9CgogICAgICBiZy5zZXRTdHlsZShub3JtYWxTdHlsZSk7CiAgICAgIGdyYXBoaWMuc2V0RWxlbWVudEhvdmVyU3R5bGUoYmcsIGVtcGhhc2lzU3R5bGUpOwogICAgfQoKICAgIGdyb3VwLmFkZChiZyk7CiAgfQoKICBmdW5jdGlvbiByZW5kZXJDb250ZW50KGdyb3VwLCBjb250ZW50KSB7CiAgICAvLyBGb3IgdG9vbHRpcC4KICAgIGNvbnRlbnQuZGF0YUluZGV4ID0gdGhpc05vZGUuZGF0YUluZGV4OwogICAgY29udGVudC5zZXJpZXNJbmRleCA9IHNlcmllc01vZGVsLnNlcmllc0luZGV4OwogICAgdmFyIGNvbnRlbnRXaWR0aCA9IE1hdGgubWF4KHRoaXNXaWR0aCAtIDIgKiBib3JkZXJXaWR0aCwgMCk7CiAgICB2YXIgY29udGVudEhlaWdodCA9IE1hdGgubWF4KHRoaXNIZWlnaHQgLSAyICogYm9yZGVyV2lkdGgsIDApOwogICAgY29udGVudC5jdWxsaW5nID0gdHJ1ZTsKICAgIGNvbnRlbnQuc2V0U2hhcGUoewogICAgICB4OiBib3JkZXJXaWR0aCwKICAgICAgeTogYm9yZGVyV2lkdGgsCiAgICAgIHdpZHRoOiBjb250ZW50V2lkdGgsCiAgICAgIGhlaWdodDogY29udGVudEhlaWdodAogICAgfSk7CgogICAgaWYgKHRoaXNJbnZpc2libGUpIHsKICAgICAgLy8gSWYgaW52aXNpYmxlLCBkbyBub3Qgc2V0IHZpc3VhbCwgb3RoZXJ3aXNlIHRoZSBlbGVtZW50IHdpbGwKICAgICAgLy8gY2hhbmdlIGltbWVkaWF0ZWx5IGJlZm9yZSBhbmltYXRpb24uIFdlIHRoaW5rIGl0IGlzIE9LIHRvCiAgICAgIC8vIHJlbWFpbiBpdHMgb3JpZ2luIGNvbG9yIHdoZW4gbW92aW5nIG91dCBvZiB0aGUgdmlldyB3aW5kb3cuCiAgICAgIHByb2Nlc3NJbnZpc2libGUoY29udGVudCk7CiAgICB9IGVsc2UgewogICAgICBjb250ZW50LmludmlzaWJsZSA9IGZhbHNlOwogICAgICB2YXIgdmlzdWFsQ29sb3IgPSB0aGlzTm9kZS5nZXRWaXN1YWwoJ2NvbG9yJywgdHJ1ZSk7CiAgICAgIHZhciBub3JtYWxTdHlsZSA9IGdldEl0ZW1TdHlsZU5vcm1hbChpdGVtU3R5bGVOb3JtYWxNb2RlbCk7CiAgICAgIG5vcm1hbFN0eWxlLmZpbGwgPSB2aXN1YWxDb2xvcjsKICAgICAgdmFyIGVtcGhhc2lzU3R5bGUgPSBnZXRJdGVtU3R5bGVFbXBoYXNpcyhpdGVtU3R5bGVFbXBoYXNpc01vZGVsKTsKICAgICAgcHJlcGFyZVRleHQobm9ybWFsU3R5bGUsIGVtcGhhc2lzU3R5bGUsIHZpc3VhbENvbG9yLCBjb250ZW50V2lkdGgsIGNvbnRlbnRIZWlnaHQpOwogICAgICBjb250ZW50LnNldFN0eWxlKG5vcm1hbFN0eWxlKTsKICAgICAgZ3JhcGhpYy5zZXRFbGVtZW50SG92ZXJTdHlsZShjb250ZW50LCBlbXBoYXNpc1N0eWxlKTsKICAgIH0KCiAgICBncm91cC5hZGQoY29udGVudCk7CiAgfQoKICBmdW5jdGlvbiBwcm9jZXNzSW52aXNpYmxlKGVsZW1lbnQpIHsKICAgIC8vIERlbGF5IGludmlzaWJsZSBzZXR0aW5nIHV0aWxsIGFuaW1hdGlvbiBmaW5pc2hlZCwKICAgIC8vIGF2b2lkIGVsZW1lbnQgdmFuaXNoIHN1ZGRlbmx5IGJlZm9yZSBhbmltYXRpb24uCiAgICAhZWxlbWVudC5pbnZpc2libGUgJiYgd2lsbEludmlzaWJsZUVscy5wdXNoKGVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gcHJlcGFyZVRleHQobm9ybWFsU3R5bGUsIGVtcGhhc2lzU3R5bGUsIHZpc3VhbENvbG9yLCB3aWR0aCwgaGVpZ2h0LCB1cHBlckxhYmVsUmVjdCkgewogICAgdmFyIGRlZmF1bHRUZXh0ID0gbm9kZU1vZGVsLmdldCgnbmFtZScpOwogICAgdmFyIG5vcm1hbExhYmVsTW9kZWwgPSBub2RlTW9kZWwuZ2V0TW9kZWwodXBwZXJMYWJlbFJlY3QgPyBQQVRIX1VQUEVSTEFCRUxfTk9STUFMIDogUEFUSF9MQUJFTF9OT0FNQUwpOwogICAgdmFyIGVtcGhhc2lzTGFiZWxNb2RlbCA9IG5vZGVNb2RlbC5nZXRNb2RlbCh1cHBlckxhYmVsUmVjdCA/IFBBVEhfVVBQRVJMQUJFTF9FTVBIQVNJUyA6IFBBVEhfTEFCRUxfRU1QSEFTSVMpOwogICAgdmFyIGlzU2hvdyA9IG5vcm1hbExhYmVsTW9kZWwuZ2V0U2hhbGxvdygnc2hvdycpOwogICAgZ3JhcGhpYy5zZXRMYWJlbFN0eWxlKG5vcm1hbFN0eWxlLCBlbXBoYXNpc1N0eWxlLCBub3JtYWxMYWJlbE1vZGVsLCBlbXBoYXNpc0xhYmVsTW9kZWwsIHsKICAgICAgZGVmYXVsdFRleHQ6IGlzU2hvdyA/IGRlZmF1bHRUZXh0IDogbnVsbCwKICAgICAgYXV0b0NvbG9yOiB2aXN1YWxDb2xvciwKICAgICAgaXNSZWN0VGV4dDogdHJ1ZSwKICAgICAgbGFiZWxGZXRjaGVyOiBzZXJpZXNNb2RlbCwKICAgICAgbGFiZWxEYXRhSW5kZXg6IHRoaXNOb2RlLmRhdGFJbmRleCwKICAgICAgbGFiZWxQcm9wOiB1cHBlckxhYmVsUmVjdCA/ICd1cHBlckxhYmVsJyA6ICdsYWJlbCcKICAgIH0pOwogICAgYWRkRHJpbGxEb3duSWNvbihub3JtYWxTdHlsZSwgdXBwZXJMYWJlbFJlY3QsIHRoaXNMYXlvdXQpOwogICAgYWRkRHJpbGxEb3duSWNvbihlbXBoYXNpc1N0eWxlLCB1cHBlckxhYmVsUmVjdCwgdGhpc0xheW91dCk7CiAgICB1cHBlckxhYmVsUmVjdCAmJiAobm9ybWFsU3R5bGUudGV4dFJlY3QgPSB6clV0aWwuY2xvbmUodXBwZXJMYWJlbFJlY3QpKTsKICAgIG5vcm1hbFN0eWxlLnRydW5jYXRlID0gaXNTaG93ICYmIG5vcm1hbExhYmVsTW9kZWwuZ2V0KCdlbGxpcHNpcycpID8gewogICAgICBvdXRlcldpZHRoOiB3aWR0aCwKICAgICAgb3V0ZXJIZWlnaHQ6IGhlaWdodCwKICAgICAgbWluQ2hhcjogMgogICAgfSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBhZGREcmlsbERvd25JY29uKHN0eWxlLCB1cHBlckxhYmVsUmVjdCwgdGhpc0xheW91dCkgewogICAgdmFyIHRleHQgPSBzdHlsZS50ZXh0OwoKICAgIGlmICghdXBwZXJMYWJlbFJlY3QgJiYgdGhpc0xheW91dC5pc0xlYWZSb290ICYmIHRleHQgIT0gbnVsbCkgewogICAgICB2YXIgaWNvbkNoYXIgPSBzZXJpZXNNb2RlbC5nZXQoJ2RyaWxsRG93bkljb24nLCB0cnVlKTsKICAgICAgc3R5bGUudGV4dCA9IGljb25DaGFyID8gaWNvbkNoYXIgKyAnICcgKyB0ZXh0IDogdGV4dDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGdpdmVHcmFwaGljKHN0b3JhZ2VOYW1lLCBDdG9yLCBkZXB0aCwgeikgewogICAgdmFyIGVsZW1lbnQgPSBvbGRSYXdJbmRleCAhPSBudWxsICYmIG9sZFN0b3JhZ2Vbc3RvcmFnZU5hbWVdW29sZFJhd0luZGV4XTsKICAgIHZhciBsYXN0cyA9IGxhc3RzRm9yQW5pbWF0aW9uW3N0b3JhZ2VOYW1lXTsKCiAgICBpZiAoZWxlbWVudCkgewogICAgICAvLyBSZW1vdmUgZnJvbSBvbGRTdG9yYWdlCiAgICAgIG9sZFN0b3JhZ2Vbc3RvcmFnZU5hbWVdW29sZFJhd0luZGV4XSA9IG51bGw7CiAgICAgIHByZXBhcmVBbmltYXRpb25XaGVuSGFzT2xkKGxhc3RzLCBlbGVtZW50LCBzdG9yYWdlTmFtZSk7CiAgICB9IC8vIElmIGludmlzaWJsZSBhbmQgbm8gb2xkIGVsZW1lbnQsIGRvIG5vdCBjcmVhdGUgbmV3IGVsZW1lbnQgKGZvciBvcHRpbWl6aW5nKS4KICAgIGVsc2UgaWYgKCF0aGlzSW52aXNpYmxlKSB7CiAgICAgICAgZWxlbWVudCA9IG5ldyBDdG9yKHsKICAgICAgICAgIHo6IGNhbGN1bGF0ZVooZGVwdGgsIHopCiAgICAgICAgfSk7CiAgICAgICAgZWxlbWVudC5fX3RtRGVwdGggPSBkZXB0aDsKICAgICAgICBlbGVtZW50Ll9fdG1TdG9yYWdlTmFtZSA9IHN0b3JhZ2VOYW1lOwogICAgICAgIHByZXBhcmVBbmltYXRpb25XaGVuTm9PbGQobGFzdHMsIGVsZW1lbnQsIHN0b3JhZ2VOYW1lKTsKICAgICAgfSAvLyBTZXQgdG8gdGhpc1N0b3JhZ2UKCgogICAgcmV0dXJuIHRoaXNTdG9yYWdlW3N0b3JhZ2VOYW1lXVt0aGlzUmF3SW5kZXhdID0gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHByZXBhcmVBbmltYXRpb25XaGVuSGFzT2xkKGxhc3RzLCBlbGVtZW50LCBzdG9yYWdlTmFtZSkgewogICAgdmFyIGxhc3RDZmcgPSBsYXN0c1t0aGlzUmF3SW5kZXhdID0ge307CiAgICBsYXN0Q2ZnLm9sZCA9IHN0b3JhZ2VOYW1lID09PSAnbm9kZUdyb3VwJyA/IGVsZW1lbnQucG9zaXRpb24uc2xpY2UoKSA6IHpyVXRpbC5leHRlbmQoe30sIGVsZW1lbnQuc2hhcGUpOwogIH0gLy8gSWYgYSBlbGVtZW50IGlzIG5ldywgd2UgbmVlZCB0byBmaW5kIHRoZSBhbmltYXRpb24gc3RhcnQgcG9pbnQgY2FyZWZ1bGx5LAogIC8vIG90aGVyd2lzZSBpdCB3aWxsIGxvb2tzIHN0cmFuZ2Ugd2hlbiAnem9vbVRvTm9kZScuCgoKICBmdW5jdGlvbiBwcmVwYXJlQW5pbWF0aW9uV2hlbk5vT2xkKGxhc3RzLCBlbGVtZW50LCBzdG9yYWdlTmFtZSkgewogICAgdmFyIGxhc3RDZmcgPSBsYXN0c1t0aGlzUmF3SW5kZXhdID0ge307CiAgICB2YXIgcGFyZW50Tm9kZSA9IHRoaXNOb2RlLnBhcmVudE5vZGU7CgogICAgaWYgKHBhcmVudE5vZGUgJiYgKCFyZVJvb3QgfHwgcmVSb290LmRpcmVjdGlvbiA9PT0gJ2RyaWxsRG93bicpKSB7CiAgICAgIHZhciBwYXJlbnRPbGRYID0gMDsKICAgICAgdmFyIHBhcmVudE9sZFkgPSAwOyAvLyBOZXcgbm9kZXMgYXBwZWFyIGZyb20gcmlnaHQtYm90dG9tIGNvcm5lciBpbiAnem9vbVRvTm9kZScgYW5pbWF0aW9uLgogICAgICAvLyBGb3IgY29udmVuaWVuY2UsIGdldCBvbGQgYm91bmRpbmcgcmVjdCBmcm9tIGJhY2tncm91bmQuCgogICAgICB2YXIgcGFyZW50T2xkQmcgPSBsYXN0c0ZvckFuaW1hdGlvbi5iYWNrZ3JvdW5kW3BhcmVudE5vZGUuZ2V0UmF3SW5kZXgoKV07CgogICAgICBpZiAoIXJlUm9vdCAmJiBwYXJlbnRPbGRCZyAmJiBwYXJlbnRPbGRCZy5vbGQpIHsKICAgICAgICBwYXJlbnRPbGRYID0gcGFyZW50T2xkQmcub2xkLndpZHRoOwogICAgICAgIHBhcmVudE9sZFkgPSBwYXJlbnRPbGRCZy5vbGQuaGVpZ2h0OwogICAgICB9IC8vIFdoZW4gbm8gcGFyZW50IG9sZCBzaGFwZSBmb3VuZCwgaXRzIHBhcmVudCBpcyBuZXcgdG9vLAogICAgICAvLyBzbyB3ZSBjYW4ganVzdCB1c2Uge3g6MCwgeTowfS4KCgogICAgICBsYXN0Q2ZnLm9sZCA9IHN0b3JhZ2VOYW1lID09PSAnbm9kZUdyb3VwJyA/IFswLCBwYXJlbnRPbGRZXSA6IHsKICAgICAgICB4OiBwYXJlbnRPbGRYLAogICAgICAgIHk6IHBhcmVudE9sZFksCiAgICAgICAgd2lkdGg6IDAsCiAgICAgICAgaGVpZ2h0OiAwCiAgICAgIH07CiAgICB9IC8vIEZhZGUgaW4sIHVzZXIgY2FuIGJlIGF3YXJlIHRoYXQgdGhlc2Ugbm9kZXMgYXJlIG5ldy4KCgogICAgbGFzdENmZy5mYWRlaW4gPSBzdG9yYWdlTmFtZSAhPT0gJ25vZGVHcm91cCc7CiAgfQp9IC8vIFdlIGNhbiBub3Qgc2V0IGFsbCBiYWNrZ3JvdWQgd2l0aCB0aGUgc2FtZSB6LCBCZWNhdXNlIHRoZSBiZWhhdmlvdXIgb2YKLy8gZHJpbGwgZG93biBhbmQgcm9sbCB1cCBkaWZmZXIgYmFja2dyb3VuZCBjcmVhdGlvbiBzZXF1ZW5jZSBmcm9tIHRyZWUKLy8gaGllcmFyY2h5IHNlcXVlbmNlLCB3aGljaCBjYXVzZSB0aGF0IGxvd3NlciBiYWNrZ3JvdW5kIGVsZW1lbnQgb3ZlcmxhcAovLyB1cHBlciBvbmVzLiBTbyB3ZSBjYWxjdWxhdGUgeiBiYXNlZCBvbiBkZXB0aC4KLy8gTW9yZW92ZXIsIHdlIHRyeSB0byBzaHJpbmsgZG93biB6IGludGVydmFsIHRvIFswLCAxXSB0byBhdm9pZCB0aGF0Ci8vIHRyZWVtYXAgd2l0aCBsYXJnZSB6IG92ZXJsYXBzIG90aGVyIGNvbXBvbmVudHMuCgoKZnVuY3Rpb24gY2FsY3VsYXRlWihkZXB0aCwgekluTGV2ZWwpIHsKICB2YXIgemIgPSBkZXB0aCAqIFpfQkFTRSArIHpJbkxldmVsOwogIHJldHVybiAoemIgLSAxKSAvIHpiOwp9Cgptb2R1bGUuZXhwb3J0cyA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/treemap/TreemapView.js"],"names":["echarts","require","zrUtil","graphic","DataDiffer","helper","Breadcrumb","RoamController","BoundingRect","matrix","animationUtil","makeStyleMapper","_format","windowOpen","bind","Group","Rect","each","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_LABEL_EMPHASIS","PATH_UPPERLABEL_NORMAL","PATH_UPPERLABEL_EMPHASIS","Z_BASE","Z_BG","Z_CONTENT","getItemStyleEmphasis","getItemStyleNormal","model","itemStyle","stroke","fill","lineWidth","_default","extendChartView","type","init","o","api","_containerGroup","_storage","createStorage","_oldTree","_breadcrumb","_controller","_state","render","seriesModel","ecModel","payload","models","findComponents","mainType","subType","query","indexOf","types","targetInfo","retrieveTargetInfo","payloadType","layoutInfo","isInit","thisStorage","reRoot","rootNodeGroup","nodeGroup","node","getRawIndex","direction","containerGroup","_giveContainerGroup","renderResult","_doRender","_doAnimation","renderFinally","_resetController","_renderBreadcrumb","_initEvents","group","add","attr","x","y","thisTree","getData","tree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","curry","renderNode","dualTravel","root","willDeleteEls","clearStorage","thisViewChildren","oldViewChildren","parentGroup","sameTree","depth","child","index","isRemoved","processNode","getKey","update","remove","execute","getId","newIndex","oldIndex","thisNode","oldNode","viewChildren","storage","store","storageName","delEls","el","push","__tmWillDelete","els","parent","invisible","dirty","get","duration","easing","animationWrap","createWrap","rawIndex","target","shape","width","__tmNodeWidth","height","__tmNodeHeight","style","opacity","targetX","targetY","position","last","old","slice","extend","setShape","fadein","setStyle","done","start","controller","getZr","enable","on","_onPan","_onZoom","rect","getWidth","getHeight","setPointerChecker","e","contain","_clearController","dispose","Math","abs","dx","dy","rootLayout","getLayout","dispatchAction","from","uid","seriesId","id","rootRect","mouseX","originX","mouseY","originY","m","create","translate","scale","applyTransform","nodeClick","findTarget","offsetX","offsetY","isLeafRoot","_rootToNode","_zoomToNode","itemModel","hostTree","data","getItemModel","dataIndex","link","linkTarget","getViewRoot","onSelect","aboveViewRoot","removeAll","targetNode","viewRoot","eachNode","order","bgEl","background","point","transformCoordToLocal","content","thisLayout","setItemGraphicEl","isInView","thisWidth","thisHeight","borderWidth","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","length","itemStyleNormalModel","getModel","itemStyleEmphasisModel","giveGraphic","isAboveViewRoot","nodeModel","bg","renderBackground","upperLabelHeight","isHighDownDispatcher","setAsHighDownDispatcher","renderContent","useUpperLabel","seriesIndex","processInvisible","visualBorderColor","getVisual","emphasisBorderColor","normalStyle","emphasisStyle","upperLabelWidth","prepareText","text","setElementHoverStyle","contentWidth","max","contentHeight","culling","visualColor","element","upperLabelRect","defaultText","normalLabelModel","emphasisLabelModel","isShow","getShallow","setLabelStyle","autoColor","isRectText","labelFetcher","labelDataIndex","labelProp","addDrillDownIcon","textRect","clone","truncate","outerWidth","outerHeight","minChar","iconChar","Ctor","z","lasts","prepareAnimationWhenHasOld","calculateZ","__tmDepth","__tmStorageName","prepareAnimationWhenNoOld","lastCfg","parentNode","parentOldX","parentOldY","parentOldBg","zInLevel","zb","module","exports"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\nvar helper = require(\"../helper/treeHelper\");\n\nvar Breadcrumb = require(\"./Breadcrumb\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar animationUtil = require(\"../../util/animation\");\n\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\nvar _format = require(\"../../util/format\");\n\nvar windowOpen = _format.windowOpen;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar each = zrUtil.each;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = ['label'];\nvar PATH_LABEL_EMPHASIS = ['emphasis', 'label'];\nvar PATH_UPPERLABEL_NORMAL = ['upperLabel'];\nvar PATH_UPPERLABEL_EMPHASIS = ['emphasis', 'upperLabel'];\nvar Z_BASE = 10; // Should bigger than every z.\n\nvar Z_BG = 1;\nvar Z_CONTENT = 2;\nvar getItemStyleEmphasis = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\n\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getItemStyleEmphasis(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar _default = echarts.extendChartView({\n  type: 'treemap',\n\n  /**\n   * @override\n   */\n  init: function (o, api) {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this._containerGroup;\n    /**\n     * @private\n     * @type {Object.<string, Array.<module:zrender/container/Group>>}\n     */\n\n    this._storage = createStorage();\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:echarts/chart/treemap/Breadcrumb}\n     */\n\n    this._breadcrumb;\n    /**\n     * @private\n     * @type {module:echarts/component/helper/RoamController}\n     */\n\n    this._controller;\n    /**\n     * 'ready', 'animating'\n     * @private\n     */\n\n    this._state = 'ready';\n  },\n\n  /**\n   * @override\n   */\n  render: function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (zrUtil.indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  },\n\n  /**\n   * @private\n   */\n  _giveContainerGroup: function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // containerGroupclipclip\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.attr('position', [layoutInfo.x, layoutInfo.y]);\n    return containerGroup;\n  },\n\n  /**\n   * @private\n   */\n  _doRender: function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n    var doRenderNode = zrUtil.curry(renderNode, seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls); // Notice: when thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we can not find all of the old graphic\n    // elements from tree. So we use this stragegy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n          new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n        }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), el.__tmWillDelete = 1);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _doAnimation: function (containerGroup, renderResult, seriesModel, reRoot) {\n    if (!seriesModel.get('animation')) {\n      return;\n    }\n\n    var duration = seriesModel.get('animationDurationUpdate');\n    var easing = seriesModel.get('animationEasing');\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: parent.__tmNodeWidth,\n              height: parent.__tmNodeHeight\n            },\n            style: {\n              opacity: 0\n            } // Others.\n\n          } : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!parent.__tmWillDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = parent.__tmNodeWidth / 2;\n            targetY = parent.__tmNodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            position: [targetX, targetY],\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        }\n\n        target && animationWrap.add(el, target, duration, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (storageName === 'nodeGroup') {\n          if (last.old) {\n            target.position = el.position.slice();\n            el.attr('position', last.old);\n          }\n        } else {\n          if (last.old) {\n            target.shape = zrUtil.extend({}, el.shape);\n            el.setShape(last.old);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n              target.style = {\n                opacity: 1\n              };\n            }\n        }\n\n        animationWrap.add(el, target, duration, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.done(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  },\n\n  /**\n   * @private\n   */\n  _resetController: function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  },\n\n  /**\n   * @private\n   */\n  _clearController: function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _onPan: function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _onZoom: function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   */\n  _initEvents: function (containerGroup) {\n    containerGroup.on('click', function (e) {\n      if (this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  },\n\n  /**\n   * @private\n   */\n  _renderBreadcrumb: function (seriesModel, api, targetInfo) {\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot() // FIXME\n        // better way?\n        // Find breadcrumb tail on center of containerGroup.\n\n      } : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, bind(onSelect, this));\n\n    function onSelect(node) {\n      if (this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? this._rootToNode({\n          node: node\n        }) : this._zoomToNode({\n          node: node\n        });\n      }\n    }\n  },\n\n  /**\n   * @override\n   */\n  remove: function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  },\n  dispose: function () {\n    this._clearController();\n  },\n\n  /**\n   * @private\n   */\n  _zoomToNode: function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  },\n\n  /**\n   * @private\n   */\n  _rootToNode: function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  },\n\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n  findTarget: function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, dont use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  }\n});\n/**\n * @inner\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData(); // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = thisNode.getModel('itemStyle');\n  var itemStyleEmphasisModel = thisNode.getModel('emphasis.itemStyle'); // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.attr('position', [thisLayout.x || 0, thisLayout.y || 0]);\n  group.__tmNodeWidth = thisWidth;\n  group.__tmNodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  }\n\n  var nodeModel = thisNode.getModel(); // Background\n\n  var bg = giveGraphic('background', Rect, depth, Z_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight); // No children, render content.\n\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (graphic.isHighDownDispatcher(group)) {\n      graphic.setAsHighDownDispatcher(group, false);\n    }\n\n    if (bg) {\n      graphic.setAsHighDownDispatcher(bg, true); // Only for enabling highlight/downplay.\n\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z_CONTENT);\n    content && renderContent(group, content);\n\n    if (bg && graphic.isHighDownDispatcher(bg)) {\n      graphic.setAsHighDownDispatcher(bg, false);\n    }\n\n    graphic.setAsHighDownDispatcher(group, true); // Only for enabling highlight/downplay.\n\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    // For tooltip.\n    bg.dataIndex = thisNode.dataIndex;\n    bg.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var visualBorderColor = thisNode.getVisual('borderColor', true);\n      var emphasisBorderColor = itemStyleEmphasisModel.get('borderColor');\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getItemStyleEmphasis(itemStyleEmphasisModel);\n      emphasisStyle.fill = emphasisBorderColor;\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText(normalStyle, emphasisStyle, visualBorderColor, upperLabelWidth, upperHeight, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n          normalStyle.text = emphasisStyle.text = null;\n        }\n\n      bg.setStyle(normalStyle);\n      graphic.setElementHoverStyle(bg, emphasisStyle);\n    }\n\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    // For tooltip.\n    content.dataIndex = thisNode.dataIndex;\n    content.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var visualColor = thisNode.getVisual('color', true);\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      var emphasisStyle = getItemStyleEmphasis(itemStyleEmphasisModel);\n      prepareText(normalStyle, emphasisStyle, visualColor, contentWidth, contentHeight);\n      content.setStyle(normalStyle);\n      graphic.setElementHoverStyle(content, emphasisStyle);\n    }\n\n    group.add(content);\n  }\n\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n\n  function prepareText(normalStyle, emphasisStyle, visualColor, width, height, upperLabelRect) {\n    var defaultText = nodeModel.get('name');\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var emphasisLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_EMPHASIS : PATH_LABEL_EMPHASIS);\n    var isShow = normalLabelModel.getShallow('show');\n    graphic.setLabelStyle(normalStyle, emphasisStyle, normalLabelModel, emphasisLabelModel, {\n      defaultText: isShow ? defaultText : null,\n      autoColor: visualColor,\n      isRectText: true,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex,\n      labelProp: upperLabelRect ? 'upperLabel' : 'label'\n    });\n    addDrillDownIcon(normalStyle, upperLabelRect, thisLayout);\n    addDrillDownIcon(emphasisStyle, upperLabelRect, thisLayout);\n    upperLabelRect && (normalStyle.textRect = zrUtil.clone(upperLabelRect));\n    normalStyle.truncate = isShow && normalLabelModel.get('ellipsis') ? {\n      outerWidth: width,\n      outerHeight: height,\n      minChar: 2\n    } : null;\n  }\n\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style.text;\n\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element, storageName);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n        element = new Ctor({\n          z: calculateZ(depth, z)\n        });\n        element.__tmDepth = depth;\n        element.__tmStorageName = storageName;\n        prepareAnimationWhenNoOld(lasts, element, storageName);\n      } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element, storageName) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    lastCfg.old = storageName === 'nodeGroup' ? element.position.slice() : zrUtil.extend({}, element.shape);\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element, storageName) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.old) {\n        parentOldX = parentOldBg.old.width;\n        parentOldY = parentOldBg.old.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      lastCfg.old = storageName === 'nodeGroup' ? [0, parentOldY] : {\n        x: parentOldX,\n        y: parentOldY,\n        width: 0,\n        height: 0\n      };\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = storageName !== 'nodeGroup';\n  }\n} // We can not set all backgroud with the same z, Because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause that lowser background element overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ(depth, zInLevel) {\n  var zb = depth * Z_BASE + zInLevel;\n  return (zb - 1) / zb;\n}\n\nmodule.exports = _default;"]}]}