{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/tooltip/TooltipView.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/tooltip/TooltipView.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiKTsKCi8qCiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQoqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQoqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQoqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgoqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQoqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQoqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKKiB1bmRlciB0aGUgTGljZW5zZS4KKi8KdmFyIGVjaGFydHMgPSByZXF1aXJlKCIuLi8uLi9lY2hhcnRzIik7Cgp2YXIgenJVdGlsID0gcmVxdWlyZSgienJlbmRlci9saWIvY29yZS91dGlsIik7Cgp2YXIgZW52ID0gcmVxdWlyZSgienJlbmRlci9saWIvY29yZS9lbnYiKTsKCnZhciBUb29sdGlwQ29udGVudCA9IHJlcXVpcmUoIi4vVG9vbHRpcENvbnRlbnQiKTsKCnZhciBUb29sdGlwUmljaENvbnRlbnQgPSByZXF1aXJlKCIuL1Rvb2x0aXBSaWNoQ29udGVudCIpOwoKdmFyIGZvcm1hdFV0aWwgPSByZXF1aXJlKCIuLi8uLi91dGlsL2Zvcm1hdCIpOwoKdmFyIG51bWJlclV0aWwgPSByZXF1aXJlKCIuLi8uLi91dGlsL251bWJlciIpOwoKdmFyIGdyYXBoaWMgPSByZXF1aXJlKCIuLi8uLi91dGlsL2dyYXBoaWMiKTsKCnZhciBmaW5kUG9pbnRGcm9tU2VyaWVzID0gcmVxdWlyZSgiLi4vYXhpc1BvaW50ZXIvZmluZFBvaW50RnJvbVNlcmllcyIpOwoKdmFyIGxheW91dFV0aWwgPSByZXF1aXJlKCIuLi8uLi91dGlsL2xheW91dCIpOwoKdmFyIE1vZGVsID0gcmVxdWlyZSgiLi4vLi4vbW9kZWwvTW9kZWwiKTsKCnZhciBnbG9iYWxMaXN0ZW5lciA9IHJlcXVpcmUoIi4uL2F4aXNQb2ludGVyL2dsb2JhbExpc3RlbmVyIik7Cgp2YXIgYXhpc0hlbHBlciA9IHJlcXVpcmUoIi4uLy4uL2Nvb3JkL2F4aXNIZWxwZXIiKTsKCnZhciBheGlzUG9pbnRlclZpZXdIZWxwZXIgPSByZXF1aXJlKCIuLi9heGlzUG9pbnRlci92aWV3SGVscGVyIik7Cgp2YXIgX21vZGVsID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9tb2RlbCIpOwoKdmFyIGdldFRvb2x0aXBSZW5kZXJNb2RlID0gX21vZGVsLmdldFRvb2x0aXBSZW5kZXJNb2RlOwovKgoqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiogdW5kZXIgdGhlIExpY2Vuc2UuCiovCgp2YXIgYmluZCA9IHpyVXRpbC5iaW5kOwp2YXIgZWFjaCA9IHpyVXRpbC5lYWNoOwp2YXIgcGFyc2VQZXJjZW50ID0gbnVtYmVyVXRpbC5wYXJzZVBlcmNlbnQ7CnZhciBwcm94eVJlY3QgPSBuZXcgZ3JhcGhpYy5SZWN0KHsKICBzaGFwZTogewogICAgeDogLTEsCiAgICB5OiAtMSwKICAgIHdpZHRoOiAyLAogICAgaGVpZ2h0OiAyCiAgfQp9KTsKCnZhciBfZGVmYXVsdCA9IGVjaGFydHMuZXh0ZW5kQ29tcG9uZW50Vmlldyh7CiAgdHlwZTogJ3Rvb2x0aXAnLAogIGluaXQ6IGZ1bmN0aW9uIGluaXQoZWNNb2RlbCwgYXBpKSB7CiAgICBpZiAoZW52Lm5vZGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciB0b29sdGlwTW9kZWwgPSBlY01vZGVsLmdldENvbXBvbmVudCgndG9vbHRpcCcpOwogICAgdmFyIHJlbmRlck1vZGUgPSB0b29sdGlwTW9kZWwuZ2V0KCdyZW5kZXJNb2RlJyk7CiAgICB0aGlzLl9yZW5kZXJNb2RlID0gZ2V0VG9vbHRpcFJlbmRlck1vZGUocmVuZGVyTW9kZSk7CiAgICB2YXIgdG9vbHRpcENvbnRlbnQ7CgogICAgaWYgKHRoaXMuX3JlbmRlck1vZGUgPT09ICdodG1sJykgewogICAgICB0b29sdGlwQ29udGVudCA9IG5ldyBUb29sdGlwQ29udGVudChhcGkuZ2V0RG9tKCksIGFwaSwgewogICAgICAgIGFwcGVuZFRvQm9keTogdG9vbHRpcE1vZGVsLmdldCgnYXBwZW5kVG9Cb2R5JywgdHJ1ZSkKICAgICAgfSk7CiAgICAgIHRoaXMuX25ld0xpbmUgPSAnPGJyLz4nOwogICAgfSBlbHNlIHsKICAgICAgdG9vbHRpcENvbnRlbnQgPSBuZXcgVG9vbHRpcFJpY2hDb250ZW50KGFwaSk7CiAgICAgIHRoaXMuX25ld0xpbmUgPSAnXG4nOwogICAgfQoKICAgIHRoaXMuX3Rvb2x0aXBDb250ZW50ID0gdG9vbHRpcENvbnRlbnQ7CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih0b29sdGlwTW9kZWwsIGVjTW9kZWwsIGFwaSkgewogICAgaWYgKGVudi5ub2RlKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gUmVzZXQKCgogICAgdGhpcy5ncm91cC5yZW1vdmVBbGwoKTsKICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHttb2R1bGU6ZWNoYXJ0cy9jb21wb25lbnQvdG9vbHRpcC9Ub29sdGlwTW9kZWx9CiAgICAgKi8KCiAgICB0aGlzLl90b29sdGlwTW9kZWwgPSB0b29sdGlwTW9kZWw7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7bW9kdWxlOmVjaGFydHMvbW9kZWwvR2xvYmFsfQogICAgICovCgogICAgdGhpcy5fZWNNb2RlbCA9IGVjTW9kZWw7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7bW9kdWxlOmVjaGFydHMvRXh0ZW5zaW9uQVBJfQogICAgICovCgogICAgdGhpcy5fYXBpID0gYXBpOwogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2xlYW5lZCB3aGVuIHJlbmRlci4KICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7QXJyYXkuPEFycmF5LjxPYmplY3Q+Pn0KICAgICAqLwoKICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IG51bGw7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwoKICAgIHRoaXMuX2Fsd2F5c1Nob3dDb250ZW50ID0gdG9vbHRpcE1vZGVsLmdldCgnYWx3YXlzU2hvd0NvbnRlbnQnKTsKICAgIHZhciB0b29sdGlwQ29udGVudCA9IHRoaXMuX3Rvb2x0aXBDb250ZW50OwogICAgdG9vbHRpcENvbnRlbnQudXBkYXRlKHRvb2x0aXBNb2RlbCk7CiAgICB0b29sdGlwQ29udGVudC5zZXRFbnRlcmFibGUodG9vbHRpcE1vZGVsLmdldCgnZW50ZXJhYmxlJykpOwoKICAgIHRoaXMuX2luaXRHbG9iYWxMaXN0ZW5lcigpOwoKICAgIHRoaXMuX2tlZXBTaG93KCk7CiAgfSwKICBfaW5pdEdsb2JhbExpc3RlbmVyOiBmdW5jdGlvbiBfaW5pdEdsb2JhbExpc3RlbmVyKCkgewogICAgdmFyIHRvb2x0aXBNb2RlbCA9IHRoaXMuX3Rvb2x0aXBNb2RlbDsKICAgIHZhciB0cmlnZ2VyT24gPSB0b29sdGlwTW9kZWwuZ2V0KCd0cmlnZ2VyT24nKTsKICAgIGdsb2JhbExpc3RlbmVyLnJlZ2lzdGVyKCdpdGVtVG9vbHRpcCcsIHRoaXMuX2FwaSwgYmluZChmdW5jdGlvbiAoY3VyclRyaWdnZXIsIGUsIGRpc3BhdGNoQWN0aW9uKSB7CiAgICAgIC8vIElmICdub25lJywgaXQgaXMgbm90IGNvbnRyb2xsZWQgYnkgbW91c2UgdG90YWxseS4KICAgICAgaWYgKHRyaWdnZXJPbiAhPT0gJ25vbmUnKSB7CiAgICAgICAgaWYgKHRyaWdnZXJPbi5pbmRleE9mKGN1cnJUcmlnZ2VyKSA+PSAwKSB7CiAgICAgICAgICB0aGlzLl90cnlTaG93KGUsIGRpc3BhdGNoQWN0aW9uKTsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJUcmlnZ2VyID09PSAnbGVhdmUnKSB7CiAgICAgICAgICB0aGlzLl9oaWRlKGRpc3BhdGNoQWN0aW9uKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIHRoaXMpKTsKICB9LAogIF9rZWVwU2hvdzogZnVuY3Rpb24gX2tlZXBTaG93KCkgewogICAgdmFyIHRvb2x0aXBNb2RlbCA9IHRoaXMuX3Rvb2x0aXBNb2RlbDsKICAgIHZhciBlY01vZGVsID0gdGhpcy5fZWNNb2RlbDsKICAgIHZhciBhcGkgPSB0aGlzLl9hcGk7IC8vIFRyeSB0byBrZWVwIHRoZSB0b29sdGlwIHNob3cgd2hlbiByZWZyZXNoaW5nCgogICAgaWYgKHRoaXMuX2xhc3RYICE9IG51bGwgJiYgdGhpcy5fbGFzdFkgIT0gbnVsbCAvLyBXaGVuIHVzZXIgaXMgd2lsbGluZyB0byBjb250cm9sIHRvb2x0aXAgdG90YWxseSB1c2luZyBBUEksCiAgICAvLyBzZWxmLm1hbnVhbGx5U2hvd1RpcCh7eCwgeX0pIG1pZ2h0IGNhdXNlIHRvb2x0aXAgaGlkZSwKICAgIC8vIHdoaWNoIGlzIG5vdCBleHBlY3RlZC4KICAgICYmIHRvb2x0aXBNb2RlbC5nZXQoJ3RyaWdnZXJPbicpICE9PSAnbm9uZScpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5fcmVmcmVzaFVwZGF0ZVRpbWVvdXQpOwogICAgICB0aGlzLl9yZWZyZXNoVXBkYXRlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFNob3cgdGlwIG5leHQgdGljayBhZnRlciBvdGhlciBjaGFydHMgYXJlIHJlbmRlcmVkCiAgICAgICAgLy8gSW4gY2FzZSBoaWdobGlnaHQgYWN0aW9uIGhhcyB3cm9uZyByZXN1bHQKICAgICAgICAvLyBGSVhNRQogICAgICAgICFhcGkuaXNEaXNwb3NlZCgpICYmIHNlbGYubWFudWFsbHlTaG93VGlwKHRvb2x0aXBNb2RlbCwgZWNNb2RlbCwgYXBpLCB7CiAgICAgICAgICB4OiBzZWxmLl9sYXN0WCwKICAgICAgICAgIHk6IHNlbGYuX2xhc3RZCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8qKgogICAqIFNob3cgdGlwIG1hbnVhbGx5IGJ5CiAgICogZGlzcGF0Y2hBY3Rpb24oewogICAqICAgICB0eXBlOiAnc2hvd1RpcCcsCiAgICogICAgIHg6IDEwLAogICAqICAgICB5OiAxMAogICAqIH0pOwogICAqIE9yCiAgICogZGlzcGF0Y2hBY3Rpb24oewogICAqICAgICAgdHlwZTogJ3Nob3dUaXAnLAogICAqICAgICAgc2VyaWVzSW5kZXg6IDAsCiAgICogICAgICBkYXRhSW5kZXggb3IgZGF0YUluZGV4SW5zaWRlIG9yIG5hbWUKICAgKiB9KTsKICAgKgogICAqICBUT0RPIEJhdGNoCiAgICovCiAgbWFudWFsbHlTaG93VGlwOiBmdW5jdGlvbiBtYW51YWxseVNob3dUaXAodG9vbHRpcE1vZGVsLCBlY01vZGVsLCBhcGksIHBheWxvYWQpIHsKICAgIGlmIChwYXlsb2FkLmZyb20gPT09IHRoaXMudWlkIHx8IGVudi5ub2RlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZGlzcGF0Y2hBY3Rpb24gPSBtYWtlRGlzcGF0Y2hBY3Rpb24ocGF5bG9hZCwgYXBpKTsgLy8gUmVzZXQgdGlja2V0CgogICAgdGhpcy5fdGlja2V0ID0gJyc7IC8vIFdoZW4gdHJpZ2dlcmVkIGZyb20gYXhpc1BvaW50ZXIuCgogICAgdmFyIGRhdGFCeUNvb3JkU3lzID0gcGF5bG9hZC5kYXRhQnlDb29yZFN5czsKCiAgICBpZiAocGF5bG9hZC50b29sdGlwICYmIHBheWxvYWQueCAhPSBudWxsICYmIHBheWxvYWQueSAhPSBudWxsKSB7CiAgICAgIHZhciBlbCA9IHByb3h5UmVjdDsKICAgICAgZWwucG9zaXRpb24gPSBbcGF5bG9hZC54LCBwYXlsb2FkLnldOwogICAgICBlbC51cGRhdGUoKTsKICAgICAgZWwudG9vbHRpcCA9IHBheWxvYWQudG9vbHRpcDsgLy8gTWFudWFsbHkgc2hvdyB0b29sdGlwIHdoaWxlIHZpZXcgaXMgbm90IHVzaW5nIHpyZW5kZXIgZWxlbWVudHMuCgogICAgICB0aGlzLl90cnlTaG93KHsKICAgICAgICBvZmZzZXRYOiBwYXlsb2FkLngsCiAgICAgICAgb2Zmc2V0WTogcGF5bG9hZC55LAogICAgICAgIHRhcmdldDogZWwKICAgICAgfSwgZGlzcGF0Y2hBY3Rpb24pOwogICAgfSBlbHNlIGlmIChkYXRhQnlDb29yZFN5cykgewogICAgICB0aGlzLl90cnlTaG93KHsKICAgICAgICBvZmZzZXRYOiBwYXlsb2FkLngsCiAgICAgICAgb2Zmc2V0WTogcGF5bG9hZC55LAogICAgICAgIHBvc2l0aW9uOiBwYXlsb2FkLnBvc2l0aW9uLAogICAgICAgIGRhdGFCeUNvb3JkU3lzOiBwYXlsb2FkLmRhdGFCeUNvb3JkU3lzLAogICAgICAgIHRvb2x0aXBPcHRpb246IHBheWxvYWQudG9vbHRpcE9wdGlvbgogICAgICB9LCBkaXNwYXRjaEFjdGlvbik7CiAgICB9IGVsc2UgaWYgKHBheWxvYWQuc2VyaWVzSW5kZXggIT0gbnVsbCkgewogICAgICBpZiAodGhpcy5fbWFudWFsbHlBeGlzU2hvd1RpcCh0b29sdGlwTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwb2ludEluZm8gPSBmaW5kUG9pbnRGcm9tU2VyaWVzKHBheWxvYWQsIGVjTW9kZWwpOwogICAgICB2YXIgY3ggPSBwb2ludEluZm8ucG9pbnRbMF07CiAgICAgIHZhciBjeSA9IHBvaW50SW5mby5wb2ludFsxXTsKCiAgICAgIGlmIChjeCAhPSBudWxsICYmIGN5ICE9IG51bGwpIHsKICAgICAgICB0aGlzLl90cnlTaG93KHsKICAgICAgICAgIG9mZnNldFg6IGN4LAogICAgICAgICAgb2Zmc2V0WTogY3ksCiAgICAgICAgICBwb3NpdGlvbjogcGF5bG9hZC5wb3NpdGlvbiwKICAgICAgICAgIHRhcmdldDogcG9pbnRJbmZvLmVsCiAgICAgICAgfSwgZGlzcGF0Y2hBY3Rpb24pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHBheWxvYWQueCAhPSBudWxsICYmIHBheWxvYWQueSAhPSBudWxsKSB7CiAgICAgIC8vIEZJWE1FCiAgICAgIC8vIHNob3VsZCB3cmFwIGRpc3BhdGNoQWN0aW9uIGxpa2UgYGF4aXNQb2ludGVyL2dsb2JhbExpc3RlbmVyYCA/CiAgICAgIGFwaS5kaXNwYXRjaEFjdGlvbih7CiAgICAgICAgdHlwZTogJ3VwZGF0ZUF4aXNQb2ludGVyJywKICAgICAgICB4OiBwYXlsb2FkLngsCiAgICAgICAgeTogcGF5bG9hZC55CiAgICAgIH0pOwoKICAgICAgdGhpcy5fdHJ5U2hvdyh7CiAgICAgICAgb2Zmc2V0WDogcGF5bG9hZC54LAogICAgICAgIG9mZnNldFk6IHBheWxvYWQueSwKICAgICAgICBwb3NpdGlvbjogcGF5bG9hZC5wb3NpdGlvbiwKICAgICAgICB0YXJnZXQ6IGFwaS5nZXRacigpLmZpbmRIb3ZlcihwYXlsb2FkLngsIHBheWxvYWQueSkudGFyZ2V0CiAgICAgIH0sIGRpc3BhdGNoQWN0aW9uKTsKICAgIH0KICB9LAogIG1hbnVhbGx5SGlkZVRpcDogZnVuY3Rpb24gbWFudWFsbHlIaWRlVGlwKHRvb2x0aXBNb2RlbCwgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7CiAgICB2YXIgdG9vbHRpcENvbnRlbnQgPSB0aGlzLl90b29sdGlwQ29udGVudDsKCiAgICBpZiAoIXRoaXMuX2Fsd2F5c1Nob3dDb250ZW50ICYmIHRoaXMuX3Rvb2x0aXBNb2RlbCkgewogICAgICB0b29sdGlwQ29udGVudC5oaWRlTGF0ZXIodGhpcy5fdG9vbHRpcE1vZGVsLmdldCgnaGlkZURlbGF5JykpOwogICAgfQoKICAgIHRoaXMuX2xhc3RYID0gdGhpcy5fbGFzdFkgPSBudWxsOwoKICAgIGlmIChwYXlsb2FkLmZyb20gIT09IHRoaXMudWlkKSB7CiAgICAgIHRoaXMuX2hpZGUobWFrZURpc3BhdGNoQWN0aW9uKHBheWxvYWQsIGFwaSkpOwogICAgfQogIH0sCiAgLy8gQmUgY29tcGF0aWJsZSB3aXRoIHByZXZpb3VzIGRlc2lnbiwgdGhhdCBpcywgd2hlbiB0b29sdGlwLnR5cGUgaXMgJ2F4aXMnIGFuZAogIC8vIGRpc3BhdGNoQWN0aW9uICdzaG93VGlwJyB3aXRoIHNlcmllc0luZGV4IGFuZCBkYXRhSW5kZXggd2lsbCB0cmlnZ2VyIGF4aXMgcG9pbnRlcgogIC8vIGFuZCB0b29sdGlwLgogIF9tYW51YWxseUF4aXNTaG93VGlwOiBmdW5jdGlvbiBfbWFudWFsbHlBeGlzU2hvd1RpcCh0b29sdGlwTW9kZWwsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkgewogICAgdmFyIHNlcmllc0luZGV4ID0gcGF5bG9hZC5zZXJpZXNJbmRleDsKICAgIHZhciBkYXRhSW5kZXggPSBwYXlsb2FkLmRhdGFJbmRleDsKICAgIHZhciBjb29yZFN5c0F4ZXNJbmZvID0gZWNNb2RlbC5nZXRDb21wb25lbnQoJ2F4aXNQb2ludGVyJykuY29vcmRTeXNBeGVzSW5mbzsKCiAgICBpZiAoc2VyaWVzSW5kZXggPT0gbnVsbCB8fCBkYXRhSW5kZXggPT0gbnVsbCB8fCBjb29yZFN5c0F4ZXNJbmZvID09IG51bGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzZXJpZXNNb2RlbCA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleChzZXJpZXNJbmRleCk7CgogICAgaWYgKCFzZXJpZXNNb2RlbCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7CiAgICB2YXIgdG9vbHRpcE1vZGVsID0gYnVpbGRUb29sdGlwTW9kZWwoW2RhdGEuZ2V0SXRlbU1vZGVsKGRhdGFJbmRleCksIHNlcmllc01vZGVsLCAoc2VyaWVzTW9kZWwuY29vcmRpbmF0ZVN5c3RlbSB8fCB7fSkubW9kZWwsIHRvb2x0aXBNb2RlbF0pOwoKICAgIGlmICh0b29sdGlwTW9kZWwuZ2V0KCd0cmlnZ2VyJykgIT09ICdheGlzJykgewogICAgICByZXR1cm47CiAgICB9CgogICAgYXBpLmRpc3BhdGNoQWN0aW9uKHsKICAgICAgdHlwZTogJ3VwZGF0ZUF4aXNQb2ludGVyJywKICAgICAgc2VyaWVzSW5kZXg6IHNlcmllc0luZGV4LAogICAgICBkYXRhSW5kZXg6IGRhdGFJbmRleCwKICAgICAgcG9zaXRpb246IHBheWxvYWQucG9zaXRpb24KICAgIH0pOwogICAgcmV0dXJuIHRydWU7CiAgfSwKICBfdHJ5U2hvdzogZnVuY3Rpb24gX3RyeVNob3coZSwgZGlzcGF0Y2hBY3Rpb24pIHsKICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgdmFyIHRvb2x0aXBNb2RlbCA9IHRoaXMuX3Rvb2x0aXBNb2RlbDsKCiAgICBpZiAoIXRvb2x0aXBNb2RlbCkgewogICAgICByZXR1cm47CiAgICB9IC8vIFNhdmUgbW91c2UgeCwgbW91c2UgeS4gU28gd2UgY2FuIHRyeSB0byBrZWVwIHNob3dpbmcgdGhlIHRpcCBpZiBjaGFydCBpcyByZWZyZXNoZWQKCgogICAgdGhpcy5fbGFzdFggPSBlLm9mZnNldFg7CiAgICB0aGlzLl9sYXN0WSA9IGUub2Zmc2V0WTsKICAgIHZhciBkYXRhQnlDb29yZFN5cyA9IGUuZGF0YUJ5Q29vcmRTeXM7CgogICAgaWYgKGRhdGFCeUNvb3JkU3lzICYmIGRhdGFCeUNvb3JkU3lzLmxlbmd0aCkgewogICAgICB0aGlzLl9zaG93QXhpc1Rvb2x0aXAoZGF0YUJ5Q29vcmRTeXMsIGUpOwogICAgfSAvLyBBbHdheXMgc2hvdyBpdGVtIHRvb2x0aXAgaWYgbW91c2UgaXMgb24gdGhlIGVsZW1lbnQgd2l0aCBkYXRhSW5kZXgKICAgIGVsc2UgaWYgKGVsICYmIGVsLmRhdGFJbmRleCAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5fbGFzdERhdGFCeUNvb3JkU3lzID0gbnVsbDsKCiAgICAgICAgdGhpcy5fc2hvd1Nlcmllc0l0ZW1Ub29sdGlwKGUsIGVsLCBkaXNwYXRjaEFjdGlvbik7CiAgICAgIH0gLy8gVG9vbHRpcCBwcm92aWRlZCBkaXJlY3RseS4gTGlrZSBsZWdlbmQuCiAgICAgIGVsc2UgaWYgKGVsICYmIGVsLnRvb2x0aXApIHsKICAgICAgICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IG51bGw7CgogICAgICAgICAgdGhpcy5fc2hvd0NvbXBvbmVudEl0ZW1Ub29sdGlwKGUsIGVsLCBkaXNwYXRjaEFjdGlvbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IG51bGw7CgogICAgICAgICAgdGhpcy5faGlkZShkaXNwYXRjaEFjdGlvbik7CiAgICAgICAgfQogIH0sCiAgX3Nob3dPck1vdmU6IGZ1bmN0aW9uIF9zaG93T3JNb3ZlKHRvb2x0aXBNb2RlbCwgY2IpIHsKICAgIC8vIHNob3dEZWxheSBpcyB1c2VkIGluIHRoaXMgY2FzZTogdG9vbHRpcC5lbnRlcmFibGUgaXMgc2V0CiAgICAvLyBhcyB0cnVlLiBVc2VyIGludGVudCB0byBtb3ZlIG1vdXNlIGludG8gdG9vbHRpcCBhbmQgY2xpY2sKICAgIC8vIHNvbWV0aGluZy4gYHNob3dEZWxheWAgbWFrZXMgaXQgZWFzaWVyIHRvIGVudGVyIHRoZSBjb250ZW50CiAgICAvLyBidXQgdG9vbHRpcCBkbyBub3QgbW92ZSBpbW1lZGlhdGVseS4KICAgIHZhciBkZWxheSA9IHRvb2x0aXBNb2RlbC5nZXQoJ3Nob3dEZWxheScpOwogICAgY2IgPSB6clV0aWwuYmluZChjYiwgdGhpcyk7CiAgICBjbGVhclRpbWVvdXQodGhpcy5fc2hvd1RpbW91dCk7CiAgICBkZWxheSA+IDAgPyB0aGlzLl9zaG93VGltb3V0ID0gc2V0VGltZW91dChjYiwgZGVsYXkpIDogY2IoKTsKICB9LAogIF9zaG93QXhpc1Rvb2x0aXA6IGZ1bmN0aW9uIF9zaG93QXhpc1Rvb2x0aXAoZGF0YUJ5Q29vcmRTeXMsIGUpIHsKICAgIHZhciBlY01vZGVsID0gdGhpcy5fZWNNb2RlbDsKICAgIHZhciBnbG9iYWxUb29sdGlwTW9kZWwgPSB0aGlzLl90b29sdGlwTW9kZWw7CiAgICB2YXIgcG9pbnQgPSBbZS5vZmZzZXRYLCBlLm9mZnNldFldOwogICAgdmFyIHNpbmdsZURlZmF1bHRIVE1MID0gW107CiAgICB2YXIgc2luZ2xlUGFyYW1zTGlzdCA9IFtdOwogICAgdmFyIHNpbmdsZVRvb2x0aXBNb2RlbCA9IGJ1aWxkVG9vbHRpcE1vZGVsKFtlLnRvb2x0aXBPcHRpb24sIGdsb2JhbFRvb2x0aXBNb2RlbF0pOwogICAgdmFyIHJlbmRlck1vZGUgPSB0aGlzLl9yZW5kZXJNb2RlOwogICAgdmFyIG5ld0xpbmUgPSB0aGlzLl9uZXdMaW5lOwogICAgdmFyIG1hcmtlcnMgPSB7fTsKICAgIGVhY2goZGF0YUJ5Q29vcmRTeXMsIGZ1bmN0aW9uIChpdGVtQ29vcmRTeXMpIHsKICAgICAgLy8gdmFyIGNvb3JkUGFyYW1MaXN0ID0gW107CiAgICAgIC8vIHZhciBjb29yZERlZmF1bHRIVE1MID0gW107CiAgICAgIC8vIHZhciBjb29yZFRvb2x0aXBNb2RlbCA9IGJ1aWxkVG9vbHRpcE1vZGVsKFsKICAgICAgLy8gICAgIGUudG9vbHRpcE9wdGlvbiwKICAgICAgLy8gICAgIGl0ZW1Db29yZFN5cy50b29sdGlwT3B0aW9uLAogICAgICAvLyAgICAgZWNNb2RlbC5nZXRDb21wb25lbnQoaXRlbUNvb3JkU3lzLmNvb3JkU3lzTWFpblR5cGUsIGl0ZW1Db29yZFN5cy5jb29yZFN5c0luZGV4KSwKICAgICAgLy8gICAgIGdsb2JhbFRvb2x0aXBNb2RlbAogICAgICAvLyBdKTsKICAgICAgLy8gdmFyIGRpc3BsYXlNb2RlID0gY29vcmRUb29sdGlwTW9kZWwuZ2V0KCdkaXNwbGF5TW9kZScpOwogICAgICAvLyB2YXIgcGFyYW1zTGlzdCA9IGRpc3BsYXlNb2RlID09PSAnc2luZ2xlJyA/IHNpbmdsZVBhcmFtc0xpc3QgOiBbXTsKICAgICAgZWFjaChpdGVtQ29vcmRTeXMuZGF0YUJ5QXhpcywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgYXhpc01vZGVsID0gZWNNb2RlbC5nZXRDb21wb25lbnQoaXRlbS5heGlzRGltICsgJ0F4aXMnLCBpdGVtLmF4aXNJbmRleCk7CiAgICAgICAgdmFyIGF4aXNWYWx1ZSA9IGl0ZW0udmFsdWU7CiAgICAgICAgdmFyIHNlcmllc0RlZmF1bHRIVE1MID0gW107CgogICAgICAgIGlmICghYXhpc01vZGVsIHx8IGF4aXNWYWx1ZSA9PSBudWxsKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsdWVMYWJlbCA9IGF4aXNQb2ludGVyVmlld0hlbHBlci5nZXRWYWx1ZUxhYmVsKGF4aXNWYWx1ZSwgYXhpc01vZGVsLmF4aXMsIGVjTW9kZWwsIGl0ZW0uc2VyaWVzRGF0YUluZGljZXMsIGl0ZW0udmFsdWVMYWJlbE9wdCk7CiAgICAgICAgenJVdGlsLmVhY2goaXRlbS5zZXJpZXNEYXRhSW5kaWNlcywgZnVuY3Rpb24gKGlkeEl0ZW0pIHsKICAgICAgICAgIHZhciBzZXJpZXMgPSBlY01vZGVsLmdldFNlcmllc0J5SW5kZXgoaWR4SXRlbS5zZXJpZXNJbmRleCk7CiAgICAgICAgICB2YXIgZGF0YUluZGV4ID0gaWR4SXRlbS5kYXRhSW5kZXhJbnNpZGU7CiAgICAgICAgICB2YXIgZGF0YVBhcmFtcyA9IHNlcmllcyAmJiBzZXJpZXMuZ2V0RGF0YVBhcmFtcyhkYXRhSW5kZXgpOwogICAgICAgICAgZGF0YVBhcmFtcy5heGlzRGltID0gaXRlbS5heGlzRGltOwogICAgICAgICAgZGF0YVBhcmFtcy5heGlzSW5kZXggPSBpdGVtLmF4aXNJbmRleDsKICAgICAgICAgIGRhdGFQYXJhbXMuYXhpc1R5cGUgPSBpdGVtLmF4aXNUeXBlOwogICAgICAgICAgZGF0YVBhcmFtcy5heGlzSWQgPSBpdGVtLmF4aXNJZDsKICAgICAgICAgIGRhdGFQYXJhbXMuYXhpc1ZhbHVlID0gYXhpc0hlbHBlci5nZXRBeGlzUmF3VmFsdWUoYXhpc01vZGVsLmF4aXMsIGF4aXNWYWx1ZSk7CiAgICAgICAgICBkYXRhUGFyYW1zLmF4aXNWYWx1ZUxhYmVsID0gdmFsdWVMYWJlbDsKCiAgICAgICAgICBpZiAoZGF0YVBhcmFtcykgewogICAgICAgICAgICBzaW5nbGVQYXJhbXNMaXN0LnB1c2goZGF0YVBhcmFtcyk7CiAgICAgICAgICAgIHZhciBzZXJpZXNUb29sdGlwID0gc2VyaWVzLmZvcm1hdFRvb2x0aXAoZGF0YUluZGV4LCB0cnVlLCBudWxsLCByZW5kZXJNb2RlKTsKICAgICAgICAgICAgdmFyIGh0bWw7CgogICAgICAgICAgICBpZiAoenJVdGlsLmlzT2JqZWN0KHNlcmllc1Rvb2x0aXApKSB7CiAgICAgICAgICAgICAgaHRtbCA9IHNlcmllc1Rvb2x0aXAuaHRtbDsKICAgICAgICAgICAgICB2YXIgbmV3TWFya2VycyA9IHNlcmllc1Rvb2x0aXAubWFya2VyczsKICAgICAgICAgICAgICB6clV0aWwubWVyZ2UobWFya2VycywgbmV3TWFya2Vycyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaHRtbCA9IHNlcmllc1Rvb2x0aXA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNlcmllc0RlZmF1bHRIVE1MLnB1c2goaHRtbCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIERlZmF1bHQgdG9vbHRpcCBjb250ZW50CiAgICAgICAgLy8gRklYTUUKICAgICAgICAvLyAoMSkgc2hvdWxkIGJlIHRoZSBmaXJzdCBkYXRhIHdoaWNoIGhhcyBuYW1lPwogICAgICAgIC8vICgyKSB0aGVtZVJpdmVyLCBmaXJzdERhdGFJbmRleCBpcyBhcnJheSwgYW5kIGZpcnN0IGxpbmUgaXMgdW5uZWNlc3NhcnkuCgogICAgICAgIHZhciBmaXJzdExpbmUgPSB2YWx1ZUxhYmVsOwoKICAgICAgICBpZiAocmVuZGVyTW9kZSAhPT0gJ2h0bWwnKSB7CiAgICAgICAgICBzaW5nbGVEZWZhdWx0SFRNTC5wdXNoKHNlcmllc0RlZmF1bHRIVE1MLmpvaW4obmV3TGluZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzaW5nbGVEZWZhdWx0SFRNTC5wdXNoKChmaXJzdExpbmUgPyBmb3JtYXRVdGlsLmVuY29kZUhUTUwoZmlyc3RMaW5lKSArIG5ld0xpbmUgOiAnJykgKyBzZXJpZXNEZWZhdWx0SFRNTC5qb2luKG5ld0xpbmUpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdGhpcyk7IC8vIEluIG1vc3QgY2FzZSwgdGhlIHNlY29uZCBheGlzIGlzIHNob3duIHVwcGVyIHRoYW4gdGhlIGZpcnN0IG9uZS4KCiAgICBzaW5nbGVEZWZhdWx0SFRNTC5yZXZlcnNlKCk7CiAgICBzaW5nbGVEZWZhdWx0SFRNTCA9IHNpbmdsZURlZmF1bHRIVE1MLmpvaW4odGhpcy5fbmV3TGluZSArIHRoaXMuX25ld0xpbmUpOwogICAgdmFyIHBvc2l0aW9uRXhwciA9IGUucG9zaXRpb247CgogICAgdGhpcy5fc2hvd09yTW92ZShzaW5nbGVUb29sdGlwTW9kZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuX3VwZGF0ZUNvbnRlbnROb3RDaGFuZ2VkT25BeGlzKGRhdGFCeUNvb3JkU3lzKSkgewogICAgICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHNpbmdsZVRvb2x0aXBNb2RlbCwgcG9zaXRpb25FeHByLCBwb2ludFswXSwgcG9pbnRbMV0sIHRoaXMuX3Rvb2x0aXBDb250ZW50LCBzaW5nbGVQYXJhbXNMaXN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9zaG93VG9vbHRpcENvbnRlbnQoc2luZ2xlVG9vbHRpcE1vZGVsLCBzaW5nbGVEZWZhdWx0SFRNTCwgc2luZ2xlUGFyYW1zTGlzdCwgTWF0aC5yYW5kb20oKSwgcG9pbnRbMF0sIHBvaW50WzFdLCBwb3NpdGlvbkV4cHIsIHVuZGVmaW5lZCwgbWFya2Vycyk7CiAgICAgIH0KICAgIH0pOyAvLyBEbyBub3QgdHJpZ2dlciBldmVudHMgaGVyZSwgYmVjYXVzZSB0aGlzIGJyYW5jaCBvbmx5IGJlIGVudGVyZWQKICAgIC8vIGZyb20gZGlzcGF0Y2hBY3Rpb24uCgogIH0sCiAgX3Nob3dTZXJpZXNJdGVtVG9vbHRpcDogZnVuY3Rpb24gX3Nob3dTZXJpZXNJdGVtVG9vbHRpcChlLCBlbCwgZGlzcGF0Y2hBY3Rpb24pIHsKICAgIHZhciBlY01vZGVsID0gdGhpcy5fZWNNb2RlbDsgLy8gVXNlIGRhdGFNb2RlbCBpbiBlbGVtZW50IGlmIHBvc3NpYmxlCiAgICAvLyBVc2VkIHdoZW4gbW91c2VvdmVyIG9uIGEgZWxlbWVudCBsaWtlIG1hcmtQb2ludCBvciBlZGdlCiAgICAvLyBJbiB3aGljaCBjYXNlLCB0aGUgZGF0YSBpcyBub3QgbWFpbiBkYXRhIGluIHNlcmllcy4KCiAgICB2YXIgc2VyaWVzSW5kZXggPSBlbC5zZXJpZXNJbmRleDsKICAgIHZhciBzZXJpZXNNb2RlbCA9IGVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleChzZXJpZXNJbmRleCk7IC8vIEZvciBleGFtcGxlLCBncmFwaCBsaW5rLgoKICAgIHZhciBkYXRhTW9kZWwgPSBlbC5kYXRhTW9kZWwgfHwgc2VyaWVzTW9kZWw7CiAgICB2YXIgZGF0YUluZGV4ID0gZWwuZGF0YUluZGV4OwogICAgdmFyIGRhdGFUeXBlID0gZWwuZGF0YVR5cGU7CiAgICB2YXIgZGF0YSA9IGRhdGFNb2RlbC5nZXREYXRhKGRhdGFUeXBlKTsKICAgIHZhciB0b29sdGlwTW9kZWwgPSBidWlsZFRvb2x0aXBNb2RlbChbZGF0YS5nZXRJdGVtTW9kZWwoZGF0YUluZGV4KSwgZGF0YU1vZGVsLCBzZXJpZXNNb2RlbCAmJiAoc2VyaWVzTW9kZWwuY29vcmRpbmF0ZVN5c3RlbSB8fCB7fSkubW9kZWwsIHRoaXMuX3Rvb2x0aXBNb2RlbF0pOwogICAgdmFyIHRvb2x0aXBUcmlnZ2VyID0gdG9vbHRpcE1vZGVsLmdldCgndHJpZ2dlcicpOwoKICAgIGlmICh0b29sdGlwVHJpZ2dlciAhPSBudWxsICYmIHRvb2x0aXBUcmlnZ2VyICE9PSAnaXRlbScpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBwYXJhbXMgPSBkYXRhTW9kZWwuZ2V0RGF0YVBhcmFtcyhkYXRhSW5kZXgsIGRhdGFUeXBlKTsKICAgIHZhciBzZXJpZXNUb29sdGlwID0gZGF0YU1vZGVsLmZvcm1hdFRvb2x0aXAoZGF0YUluZGV4LCBmYWxzZSwgZGF0YVR5cGUsIHRoaXMuX3JlbmRlck1vZGUpOwogICAgdmFyIGRlZmF1bHRIdG1sOwogICAgdmFyIG1hcmtlcnM7CgogICAgaWYgKHpyVXRpbC5pc09iamVjdChzZXJpZXNUb29sdGlwKSkgewogICAgICBkZWZhdWx0SHRtbCA9IHNlcmllc1Rvb2x0aXAuaHRtbDsKICAgICAgbWFya2VycyA9IHNlcmllc1Rvb2x0aXAubWFya2VyczsKICAgIH0gZWxzZSB7CiAgICAgIGRlZmF1bHRIdG1sID0gc2VyaWVzVG9vbHRpcDsKICAgICAgbWFya2VycyA9IG51bGw7CiAgICB9CgogICAgdmFyIGFzeW5jVGlja2V0ID0gJ2l0ZW1fJyArIGRhdGFNb2RlbC5uYW1lICsgJ18nICsgZGF0YUluZGV4OwoKICAgIHRoaXMuX3Nob3dPck1vdmUodG9vbHRpcE1vZGVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuX3Nob3dUb29sdGlwQ29udGVudCh0b29sdGlwTW9kZWwsIGRlZmF1bHRIdG1sLCBwYXJhbXMsIGFzeW5jVGlja2V0LCBlLm9mZnNldFgsIGUub2Zmc2V0WSwgZS5wb3NpdGlvbiwgZS50YXJnZXQsIG1hcmtlcnMpOwogICAgfSk7IC8vIEZJWE1FCiAgICAvLyBkdXBsaWNhdGVkIHNob3d0aXAgaWYgbWFudWFsbHlTaG93VGlwIGlzIGNhbGxlZCBmcm9tIGRpc3BhdGNoQWN0aW9uLgoKCiAgICBkaXNwYXRjaEFjdGlvbih7CiAgICAgIHR5cGU6ICdzaG93VGlwJywKICAgICAgZGF0YUluZGV4SW5zaWRlOiBkYXRhSW5kZXgsCiAgICAgIGRhdGFJbmRleDogZGF0YS5nZXRSYXdJbmRleChkYXRhSW5kZXgpLAogICAgICBzZXJpZXNJbmRleDogc2VyaWVzSW5kZXgsCiAgICAgIGZyb206IHRoaXMudWlkCiAgICB9KTsKICB9LAogIF9zaG93Q29tcG9uZW50SXRlbVRvb2x0aXA6IGZ1bmN0aW9uIF9zaG93Q29tcG9uZW50SXRlbVRvb2x0aXAoZSwgZWwsIGRpc3BhdGNoQWN0aW9uKSB7CiAgICB2YXIgdG9vbHRpcE9wdCA9IGVsLnRvb2x0aXA7CgogICAgaWYgKHR5cGVvZiB0b29sdGlwT3B0ID09PSAnc3RyaW5nJykgewogICAgICB2YXIgY29udGVudCA9IHRvb2x0aXBPcHQ7CiAgICAgIHRvb2x0aXBPcHQgPSB7CiAgICAgICAgY29udGVudDogY29udGVudCwKICAgICAgICAvLyBGaXhlZCBmb3JtYXR0ZXIKICAgICAgICBmb3JtYXR0ZXI6IGNvbnRlbnQKICAgICAgfTsKICAgIH0KCiAgICB2YXIgc3ViVG9vbHRpcE1vZGVsID0gbmV3IE1vZGVsKHRvb2x0aXBPcHQsIHRoaXMuX3Rvb2x0aXBNb2RlbCwgdGhpcy5fZWNNb2RlbCk7CiAgICB2YXIgZGVmYXVsdEh0bWwgPSBzdWJUb29sdGlwTW9kZWwuZ2V0KCdjb250ZW50Jyk7CiAgICB2YXIgYXN5bmNUaWNrZXQgPSBNYXRoLnJhbmRvbSgpOyAvLyBEbyBub3QgY2hlY2sgd2hldGhlciBgdHJpZ2dlcmAgaXMgJ25vbmUnIGhlcmUsIGJlY2F1c2UgYHRyaWdnZXJgCiAgICAvLyBvbmx5IHdvcmtzIG9uIGNvb3JkaW5hdGUgc3lzdGVtLiBJbiBmYWN0LCB3ZSBoYXZlIG5vdCBmb3VuZCBjYXNlCiAgICAvLyB0aGF0IHJlcXVpcmVzIHNldHRpbmcgYHRyaWdnZXJgIG5vdGhpbmcgb24gY29tcG9uZW50IHlldC4KCiAgICB0aGlzLl9zaG93T3JNb3ZlKHN1YlRvb2x0aXBNb2RlbCwgZnVuY3Rpb24gKCkgewogICAgICB0aGlzLl9zaG93VG9vbHRpcENvbnRlbnQoc3ViVG9vbHRpcE1vZGVsLCBkZWZhdWx0SHRtbCwgc3ViVG9vbHRpcE1vZGVsLmdldCgnZm9ybWF0dGVyUGFyYW1zJykgfHwge30sIGFzeW5jVGlja2V0LCBlLm9mZnNldFgsIGUub2Zmc2V0WSwgZS5wb3NpdGlvbiwgZWwpOwogICAgfSk7IC8vIElmIG5vdCBkaXNwYXRjaCBzaG93VGlwLCB0aXAgbWF5IGJlIGhpZGUgdHJpZ2dlcmVkIGJ5IGF4aXMuCgoKICAgIGRpc3BhdGNoQWN0aW9uKHsKICAgICAgdHlwZTogJ3Nob3dUaXAnLAogICAgICBmcm9tOiB0aGlzLnVpZAogICAgfSk7CiAgfSwKICBfc2hvd1Rvb2x0aXBDb250ZW50OiBmdW5jdGlvbiBfc2hvd1Rvb2x0aXBDb250ZW50KHRvb2x0aXBNb2RlbCwgZGVmYXVsdEh0bWwsIHBhcmFtcywgYXN5bmNUaWNrZXQsIHgsIHksIHBvc2l0aW9uRXhwciwgZWwsIG1hcmtlcnMpIHsKICAgIC8vIFJlc2V0IHRpY2tldAogICAgdGhpcy5fdGlja2V0ID0gJyc7CgogICAgaWYgKCF0b29sdGlwTW9kZWwuZ2V0KCdzaG93Q29udGVudCcpIHx8ICF0b29sdGlwTW9kZWwuZ2V0KCdzaG93JykpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciB0b29sdGlwQ29udGVudCA9IHRoaXMuX3Rvb2x0aXBDb250ZW50OwogICAgdmFyIGZvcm1hdHRlciA9IHRvb2x0aXBNb2RlbC5nZXQoJ2Zvcm1hdHRlcicpOwogICAgcG9zaXRpb25FeHByID0gcG9zaXRpb25FeHByIHx8IHRvb2x0aXBNb2RlbC5nZXQoJ3Bvc2l0aW9uJyk7CiAgICB2YXIgaHRtbCA9IGRlZmF1bHRIdG1sOwoKICAgIGlmIChmb3JtYXR0ZXIgJiYgdHlwZW9mIGZvcm1hdHRlciA9PT0gJ3N0cmluZycpIHsKICAgICAgaHRtbCA9IGZvcm1hdFV0aWwuZm9ybWF0VHBsKGZvcm1hdHRlciwgcGFyYW1zLCB0cnVlKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB2YXIgY2FsbGJhY2sgPSBiaW5kKGZ1bmN0aW9uIChjYlRpY2tldCwgaHRtbCkgewogICAgICAgIGlmIChjYlRpY2tldCA9PT0gdGhpcy5fdGlja2V0KSB7CiAgICAgICAgICB0b29sdGlwQ29udGVudC5zZXRDb250ZW50KGh0bWwsIG1hcmtlcnMsIHRvb2x0aXBNb2RlbCk7CgogICAgICAgICAgdGhpcy5fdXBkYXRlUG9zaXRpb24odG9vbHRpcE1vZGVsLCBwb3NpdGlvbkV4cHIsIHgsIHksIHRvb2x0aXBDb250ZW50LCBwYXJhbXMsIGVsKTsKICAgICAgICB9CiAgICAgIH0sIHRoaXMpOwogICAgICB0aGlzLl90aWNrZXQgPSBhc3luY1RpY2tldDsKICAgICAgaHRtbCA9IGZvcm1hdHRlcihwYXJhbXMsIGFzeW5jVGlja2V0LCBjYWxsYmFjayk7CiAgICB9CgogICAgdG9vbHRpcENvbnRlbnQuc2V0Q29udGVudChodG1sLCBtYXJrZXJzLCB0b29sdGlwTW9kZWwpOwogICAgdG9vbHRpcENvbnRlbnQuc2hvdyh0b29sdGlwTW9kZWwpOwoKICAgIHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHRvb2x0aXBNb2RlbCwgcG9zaXRpb25FeHByLCB4LCB5LCB0b29sdGlwQ29udGVudCwgcGFyYW1zLCBlbCk7CiAgfSwKCiAgLyoqCiAgICogQHBhcmFtICB7c3RyaW5nfEZ1bmN0aW9ufEFycmF5LjxudW1iZXI+fE9iamVjdH0gcG9zaXRpb25FeHByCiAgICogQHBhcmFtICB7bnVtYmVyfSB4IE1vdXNlIHgKICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgTW91c2UgeQogICAqIEBwYXJhbSAge2Jvb2xlYW59IGNvbmZpbmUgV2hldGhlciBjb25maW5lIHRvb2x0aXAgY29udGVudCBpbiB2aWV3IHJlY3QuCiAgICogQHBhcmFtICB7T2JqZWN0fDxBcnJheS48T2JqZWN0Pn0gcGFyYW1zCiAgICogQHBhcmFtICB7bW9kdWxlOnpyZW5kZXIvRWxlbWVudH0gZWwgdGFyZ2V0IGVsZW1lbnQKICAgKiBAcGFyYW0gIHttb2R1bGU6ZWNoYXJ0cy9FeHRlbnNpb25BUEl9IGFwaQogICAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fQogICAqLwogIF91cGRhdGVQb3NpdGlvbjogZnVuY3Rpb24gX3VwZGF0ZVBvc2l0aW9uKHRvb2x0aXBNb2RlbCwgcG9zaXRpb25FeHByLCB4LCB5LCBjb250ZW50LCBwYXJhbXMsIGVsKSB7CiAgICB2YXIgdmlld1dpZHRoID0gdGhpcy5fYXBpLmdldFdpZHRoKCk7CgogICAgdmFyIHZpZXdIZWlnaHQgPSB0aGlzLl9hcGkuZ2V0SGVpZ2h0KCk7CgogICAgcG9zaXRpb25FeHByID0gcG9zaXRpb25FeHByIHx8IHRvb2x0aXBNb2RlbC5nZXQoJ3Bvc2l0aW9uJyk7CiAgICB2YXIgY29udGVudFNpemUgPSBjb250ZW50LmdldFNpemUoKTsKICAgIHZhciBhbGlnbiA9IHRvb2x0aXBNb2RlbC5nZXQoJ2FsaWduJyk7CiAgICB2YXIgdkFsaWduID0gdG9vbHRpcE1vZGVsLmdldCgndmVydGljYWxBbGlnbicpOwogICAgdmFyIHJlY3QgPSBlbCAmJiBlbC5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpOwogICAgZWwgJiYgcmVjdC5hcHBseVRyYW5zZm9ybShlbC50cmFuc2Zvcm0pOwoKICAgIGlmICh0eXBlb2YgcG9zaXRpb25FeHByID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIC8vIENhbGxiYWNrIG9mIHBvc2l0aW9uIGNhbiBiZSBhbiBhcnJheSBvciBhIHN0cmluZyBzcGVjaWZ5IHRoZSBwb3NpdGlvbgogICAgICBwb3NpdGlvbkV4cHIgPSBwb3NpdGlvbkV4cHIoW3gsIHldLCBwYXJhbXMsIGNvbnRlbnQuZWwsIHJlY3QsIHsKICAgICAgICB2aWV3U2l6ZTogW3ZpZXdXaWR0aCwgdmlld0hlaWdodF0sCiAgICAgICAgY29udGVudFNpemU6IGNvbnRlbnRTaXplLnNsaWNlKCkKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHpyVXRpbC5pc0FycmF5KHBvc2l0aW9uRXhwcikpIHsKICAgICAgeCA9IHBhcnNlUGVyY2VudChwb3NpdGlvbkV4cHJbMF0sIHZpZXdXaWR0aCk7CiAgICAgIHkgPSBwYXJzZVBlcmNlbnQocG9zaXRpb25FeHByWzFdLCB2aWV3SGVpZ2h0KTsKICAgIH0gZWxzZSBpZiAoenJVdGlsLmlzT2JqZWN0KHBvc2l0aW9uRXhwcikpIHsKICAgICAgcG9zaXRpb25FeHByLndpZHRoID0gY29udGVudFNpemVbMF07CiAgICAgIHBvc2l0aW9uRXhwci5oZWlnaHQgPSBjb250ZW50U2l6ZVsxXTsKICAgICAgdmFyIGxheW91dFJlY3QgPSBsYXlvdXRVdGlsLmdldExheW91dFJlY3QocG9zaXRpb25FeHByLCB7CiAgICAgICAgd2lkdGg6IHZpZXdXaWR0aCwKICAgICAgICBoZWlnaHQ6IHZpZXdIZWlnaHQKICAgICAgfSk7CiAgICAgIHggPSBsYXlvdXRSZWN0Lng7CiAgICAgIHkgPSBsYXlvdXRSZWN0Lnk7CiAgICAgIGFsaWduID0gbnVsbDsgLy8gV2hlbiBwb3NpdGlvbkV4cHIgaXMgbGVmdC90b3AvcmlnaHQvYm90dG9tLAogICAgICAvLyBhbGlnbiBhbmQgdmVydGljYWxBbGlnbiB3aWxsIG5vdCB3b3JrLgoKICAgICAgdkFsaWduID0gbnVsbDsKICAgIH0gLy8gU3BlY2lmeSB0b29sdGlwIHBvc2l0aW9uIGJ5IHN0cmluZyAndG9wJyAnYm90dG9tJyAnbGVmdCcgJ3JpZ2h0JyBhcm91bmQgZ3JhcGhpYyBlbGVtZW50CiAgICBlbHNlIGlmICh0eXBlb2YgcG9zaXRpb25FeHByID09PSAnc3RyaW5nJyAmJiBlbCkgewogICAgICAgIHZhciBwb3MgPSBjYWxjVG9vbHRpcFBvc2l0aW9uKHBvc2l0aW9uRXhwciwgcmVjdCwgY29udGVudFNpemUpOwogICAgICAgIHggPSBwb3NbMF07CiAgICAgICAgeSA9IHBvc1sxXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcG9zID0gcmVmaXhUb29sdGlwUG9zaXRpb24oeCwgeSwgY29udGVudCwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0LCBhbGlnbiA/IG51bGwgOiAyMCwgdkFsaWduID8gbnVsbCA6IDIwKTsKICAgICAgICB4ID0gcG9zWzBdOwogICAgICAgIHkgPSBwb3NbMV07CiAgICAgIH0KCiAgICBhbGlnbiAmJiAoeCAtPSBpc0NlbnRlckFsaWduKGFsaWduKSA/IGNvbnRlbnRTaXplWzBdIC8gMiA6IGFsaWduID09PSAncmlnaHQnID8gY29udGVudFNpemVbMF0gOiAwKTsKICAgIHZBbGlnbiAmJiAoeSAtPSBpc0NlbnRlckFsaWduKHZBbGlnbikgPyBjb250ZW50U2l6ZVsxXSAvIDIgOiB2QWxpZ24gPT09ICdib3R0b20nID8gY29udGVudFNpemVbMV0gOiAwKTsKCiAgICBpZiAodG9vbHRpcE1vZGVsLmdldCgnY29uZmluZScpKSB7CiAgICAgIHZhciBwb3MgPSBjb25maW5lVG9vbHRpcFBvc2l0aW9uKHgsIHksIGNvbnRlbnQsIHZpZXdXaWR0aCwgdmlld0hlaWdodCk7CiAgICAgIHggPSBwb3NbMF07CiAgICAgIHkgPSBwb3NbMV07CiAgICB9CgogICAgY29udGVudC5tb3ZlVG8oeCwgeSk7CiAgfSwKICAvLyBGSVhNRQogIC8vIFNob3VsZCB3ZSByZW1vdmUgdGhpcyBidXQgbGVhdmUgdGhpcyB0byB1c2VyPwogIF91cGRhdGVDb250ZW50Tm90Q2hhbmdlZE9uQXhpczogZnVuY3Rpb24gX3VwZGF0ZUNvbnRlbnROb3RDaGFuZ2VkT25BeGlzKGRhdGFCeUNvb3JkU3lzKSB7CiAgICB2YXIgbGFzdENvb3JkU3lzID0gdGhpcy5fbGFzdERhdGFCeUNvb3JkU3lzOwogICAgdmFyIGNvbnRlbnROb3RDaGFuZ2VkID0gISFsYXN0Q29vcmRTeXMgJiYgbGFzdENvb3JkU3lzLmxlbmd0aCA9PT0gZGF0YUJ5Q29vcmRTeXMubGVuZ3RoOwogICAgY29udGVudE5vdENoYW5nZWQgJiYgZWFjaChsYXN0Q29vcmRTeXMsIGZ1bmN0aW9uIChsYXN0SXRlbUNvb3JkU3lzLCBpbmRleENvb3JkU3lzKSB7CiAgICAgIHZhciBsYXN0RGF0YUJ5QXhpcyA9IGxhc3RJdGVtQ29vcmRTeXMuZGF0YUJ5QXhpcyB8fCB7fTsKICAgICAgdmFyIHRoaXNJdGVtQ29vcmRTeXMgPSBkYXRhQnlDb29yZFN5c1tpbmRleENvb3JkU3lzXSB8fCB7fTsKICAgICAgdmFyIHRoaXNEYXRhQnlBeGlzID0gdGhpc0l0ZW1Db29yZFN5cy5kYXRhQnlBeGlzIHx8IFtdOwogICAgICBjb250ZW50Tm90Q2hhbmdlZCAmPSBsYXN0RGF0YUJ5QXhpcy5sZW5ndGggPT09IHRoaXNEYXRhQnlBeGlzLmxlbmd0aDsKICAgICAgY29udGVudE5vdENoYW5nZWQgJiYgZWFjaChsYXN0RGF0YUJ5QXhpcywgZnVuY3Rpb24gKGxhc3RJdGVtLCBpbmRleEF4aXMpIHsKICAgICAgICB2YXIgdGhpc0l0ZW0gPSB0aGlzRGF0YUJ5QXhpc1tpbmRleEF4aXNdIHx8IHt9OwogICAgICAgIHZhciBsYXN0SW5kaWNlcyA9IGxhc3RJdGVtLnNlcmllc0RhdGFJbmRpY2VzIHx8IFtdOwogICAgICAgIHZhciBuZXdJbmRpY2VzID0gdGhpc0l0ZW0uc2VyaWVzRGF0YUluZGljZXMgfHwgW107CiAgICAgICAgY29udGVudE5vdENoYW5nZWQgJj0gbGFzdEl0ZW0udmFsdWUgPT09IHRoaXNJdGVtLnZhbHVlICYmIGxhc3RJdGVtLmF4aXNUeXBlID09PSB0aGlzSXRlbS5heGlzVHlwZSAmJiBsYXN0SXRlbS5heGlzSWQgPT09IHRoaXNJdGVtLmF4aXNJZCAmJiBsYXN0SW5kaWNlcy5sZW5ndGggPT09IG5ld0luZGljZXMubGVuZ3RoOwogICAgICAgIGNvbnRlbnROb3RDaGFuZ2VkICYmIGVhY2gobGFzdEluZGljZXMsIGZ1bmN0aW9uIChsYXN0SWR4SXRlbSwgaikgewogICAgICAgICAgdmFyIG5ld0lkeEl0ZW0gPSBuZXdJbmRpY2VzW2pdOwogICAgICAgICAgY29udGVudE5vdENoYW5nZWQgJj0gbGFzdElkeEl0ZW0uc2VyaWVzSW5kZXggPT09IG5ld0lkeEl0ZW0uc2VyaWVzSW5kZXggJiYgbGFzdElkeEl0ZW0uZGF0YUluZGV4ID09PSBuZXdJZHhJdGVtLmRhdGFJbmRleDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cyA9IGRhdGFCeUNvb3JkU3lzOwogICAgcmV0dXJuICEhY29udGVudE5vdENoYW5nZWQ7CiAgfSwKICBfaGlkZTogZnVuY3Rpb24gX2hpZGUoZGlzcGF0Y2hBY3Rpb24pIHsKICAgIC8vIERvIG5vdCBkaXJlY3RseSBoaWRlTGF0ZXIgaGVyZSwgYmVjYXVzZSB0aGlzIGJlaGF2aW9yIG1heSBiZSBwcmV2ZW50ZWQKICAgIC8vIGluIGRpc3BhdGNoQWN0aW9uIHdoZW4gc2hvd1RpcCBpcyBkaXNwYXRjaGVkLgogICAgLy8gRklYTUUKICAgIC8vIGR1cGxpY2F0ZWQgaGlkZVRpcCBpZiBtYW51YWxseUhpZGVUaXAgaXMgY2FsbGVkIGZyb20gZGlzcGF0Y2hBY3Rpb24uCiAgICB0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXMgPSBudWxsOwogICAgZGlzcGF0Y2hBY3Rpb24oewogICAgICB0eXBlOiAnaGlkZVRpcCcsCiAgICAgIGZyb206IHRoaXMudWlkCiAgICB9KTsKICB9LAogIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoZWNNb2RlbCwgYXBpKSB7CiAgICBpZiAoZW52Lm5vZGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMuX3Rvb2x0aXBDb250ZW50LmRpc3Bvc2UoKTsKCiAgICBnbG9iYWxMaXN0ZW5lci51bnJlZ2lzdGVyKCdpdGVtVG9vbHRpcCcsIGFwaSk7CiAgfQp9KTsKLyoqCiAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdHxtb2R1bGU6ZWNoYXJ0cy9tb2RlbC9Nb2RlbD59IG1vZGVsQ2FzY2FkZQogKiBGcm9tIHRvcCB0byBib3R0b20uICh0aGUgbGFzdCBvbmUgc2hvdWxkIGJlIGdsb2JhbFRvb2x0aXBNb2RlbCk7CiAqLwoKCmZ1bmN0aW9uIGJ1aWxkVG9vbHRpcE1vZGVsKG1vZGVsQ2FzY2FkZSkgewogIHZhciByZXN1bHRNb2RlbCA9IG1vZGVsQ2FzY2FkZS5wb3AoKTsKCiAgd2hpbGUgKG1vZGVsQ2FzY2FkZS5sZW5ndGgpIHsKICAgIHZhciB0b29sdGlwT3B0ID0gbW9kZWxDYXNjYWRlLnBvcCgpOwoKICAgIGlmICh0b29sdGlwT3B0KSB7CiAgICAgIGlmIChNb2RlbC5pc0luc3RhbmNlKHRvb2x0aXBPcHQpKSB7CiAgICAgICAgdG9vbHRpcE9wdCA9IHRvb2x0aXBPcHQuZ2V0KCd0b29sdGlwJywgdHJ1ZSk7CiAgICAgIH0gLy8gSW4gZWFjaCBkYXRhIGl0ZW0gdG9vbHRpcCBjYW4gYmUgc2ltcGx5IHdyaXRlOgogICAgICAvLyB7CiAgICAgIC8vICB2YWx1ZTogMTAsCiAgICAgIC8vICB0b29sdGlwOiAnU29tZXRoaW5nIHlvdSBuZWVkIHRvIGtub3cnCiAgICAgIC8vIH0KCgogICAgICBpZiAodHlwZW9mIHRvb2x0aXBPcHQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgdG9vbHRpcE9wdCA9IHsKICAgICAgICAgIGZvcm1hdHRlcjogdG9vbHRpcE9wdAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJlc3VsdE1vZGVsID0gbmV3IE1vZGVsKHRvb2x0aXBPcHQsIHJlc3VsdE1vZGVsLCByZXN1bHRNb2RlbC5lY01vZGVsKTsKICAgIH0KICB9CgogIHJldHVybiByZXN1bHRNb2RlbDsKfQoKZnVuY3Rpb24gbWFrZURpc3BhdGNoQWN0aW9uKHBheWxvYWQsIGFwaSkgewogIHJldHVybiBwYXlsb2FkLmRpc3BhdGNoQWN0aW9uIHx8IHpyVXRpbC5iaW5kKGFwaS5kaXNwYXRjaEFjdGlvbiwgYXBpKTsKfQoKZnVuY3Rpb24gcmVmaXhUb29sdGlwUG9zaXRpb24oeCwgeSwgY29udGVudCwgdmlld1dpZHRoLCB2aWV3SGVpZ2h0LCBnYXBILCBnYXBWKSB7CiAgdmFyIHNpemUgPSBjb250ZW50LmdldE91dGVyU2l6ZSgpOwogIHZhciB3aWR0aCA9IHNpemUud2lkdGg7CiAgdmFyIGhlaWdodCA9IHNpemUuaGVpZ2h0OwoKICBpZiAoZ2FwSCAhPSBudWxsKSB7CiAgICBpZiAoeCArIHdpZHRoICsgZ2FwSCA+IHZpZXdXaWR0aCkgewogICAgICB4IC09IHdpZHRoICsgZ2FwSDsKICAgIH0gZWxzZSB7CiAgICAgIHggKz0gZ2FwSDsKICAgIH0KICB9CgogIGlmIChnYXBWICE9IG51bGwpIHsKICAgIGlmICh5ICsgaGVpZ2h0ICsgZ2FwViA+IHZpZXdIZWlnaHQpIHsKICAgICAgeSAtPSBoZWlnaHQgKyBnYXBWOwogICAgfSBlbHNlIHsKICAgICAgeSArPSBnYXBWOwogICAgfQogIH0KCiAgcmV0dXJuIFt4LCB5XTsKfQoKZnVuY3Rpb24gY29uZmluZVRvb2x0aXBQb3NpdGlvbih4LCB5LCBjb250ZW50LCB2aWV3V2lkdGgsIHZpZXdIZWlnaHQpIHsKICB2YXIgc2l6ZSA9IGNvbnRlbnQuZ2V0T3V0ZXJTaXplKCk7CiAgdmFyIHdpZHRoID0gc2l6ZS53aWR0aDsKICB2YXIgaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7CiAgeCA9IE1hdGgubWluKHggKyB3aWR0aCwgdmlld1dpZHRoKSAtIHdpZHRoOwogIHkgPSBNYXRoLm1pbih5ICsgaGVpZ2h0LCB2aWV3SGVpZ2h0KSAtIGhlaWdodDsKICB4ID0gTWF0aC5tYXgoeCwgMCk7CiAgeSA9IE1hdGgubWF4KHksIDApOwogIHJldHVybiBbeCwgeV07Cn0KCmZ1bmN0aW9uIGNhbGNUb29sdGlwUG9zaXRpb24ocG9zaXRpb24sIHJlY3QsIGNvbnRlbnRTaXplKSB7CiAgdmFyIGRvbVdpZHRoID0gY29udGVudFNpemVbMF07CiAgdmFyIGRvbUhlaWdodCA9IGNvbnRlbnRTaXplWzFdOwogIHZhciBnYXAgPSA1OwogIHZhciB4ID0gMDsKICB2YXIgeSA9IDA7CiAgdmFyIHJlY3RXaWR0aCA9IHJlY3Qud2lkdGg7CiAgdmFyIHJlY3RIZWlnaHQgPSByZWN0LmhlaWdodDsKCiAgc3dpdGNoIChwb3NpdGlvbikgewogICAgY2FzZSAnaW5zaWRlJzoKICAgICAgeCA9IHJlY3QueCArIHJlY3RXaWR0aCAvIDIgLSBkb21XaWR0aCAvIDI7CiAgICAgIHkgPSByZWN0LnkgKyByZWN0SGVpZ2h0IC8gMiAtIGRvbUhlaWdodCAvIDI7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ3RvcCc6CiAgICAgIHggPSByZWN0LnggKyByZWN0V2lkdGggLyAyIC0gZG9tV2lkdGggLyAyOwogICAgICB5ID0gcmVjdC55IC0gZG9tSGVpZ2h0IC0gZ2FwOwogICAgICBicmVhazsKCiAgICBjYXNlICdib3R0b20nOgogICAgICB4ID0gcmVjdC54ICsgcmVjdFdpZHRoIC8gMiAtIGRvbVdpZHRoIC8gMjsKICAgICAgeSA9IHJlY3QueSArIHJlY3RIZWlnaHQgKyBnYXA7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ2xlZnQnOgogICAgICB4ID0gcmVjdC54IC0gZG9tV2lkdGggLSBnYXA7CiAgICAgIHkgPSByZWN0LnkgKyByZWN0SGVpZ2h0IC8gMiAtIGRvbUhlaWdodCAvIDI7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ3JpZ2h0JzoKICAgICAgeCA9IHJlY3QueCArIHJlY3RXaWR0aCArIGdhcDsKICAgICAgeSA9IHJlY3QueSArIHJlY3RIZWlnaHQgLyAyIC0gZG9tSGVpZ2h0IC8gMjsKICB9CgogIHJldHVybiBbeCwgeV07Cn0KCmZ1bmN0aW9uIGlzQ2VudGVyQWxpZ24oYWxpZ24pIHsKICByZXR1cm4gYWxpZ24gPT09ICdjZW50ZXInIHx8IGFsaWduID09PSAnbWlkZGxlJzsKfQoKbW9kdWxlLmV4cG9ydHMgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/tooltip/TooltipView.js"],"names":["echarts","require","zrUtil","env","TooltipContent","TooltipRichContent","formatUtil","numberUtil","graphic","findPointFromSeries","layoutUtil","Model","globalListener","axisHelper","axisPointerViewHelper","_model","getTooltipRenderMode","bind","each","parsePercent","proxyRect","Rect","shape","x","y","width","height","_default","extendComponentView","type","init","ecModel","api","node","tooltipModel","getComponent","renderMode","get","_renderMode","tooltipContent","getDom","appendToBody","_newLine","_tooltipContent","render","group","removeAll","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","update","setEnterable","_initGlobalListener","_keepShow","triggerOn","register","currTrigger","e","dispatchAction","indexOf","_tryShow","_hide","_lastX","_lastY","self","clearTimeout","_refreshUpdateTimeout","setTimeout","isDisposed","manuallyShowTip","payload","from","uid","makeDispatchAction","_ticket","dataByCoordSys","tooltip","el","position","offsetX","offsetY","target","tooltipOption","seriesIndex","_manuallyAxisShowTip","pointInfo","cx","point","cy","getZr","findHover","manuallyHideTip","hideLater","dataIndex","coordSysAxesInfo","seriesModel","getSeriesByIndex","data","getData","buildTooltipModel","getItemModel","coordinateSystem","model","length","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","cb","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","item","axisModel","axisDim","axisIndex","axisValue","value","seriesDefaultHTML","valueLabel","getValueLabel","axis","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","axisType","axisId","getAxisRawValue","axisValueLabel","push","seriesTooltip","formatTooltip","html","isObject","newMarkers","merge","firstLine","join","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","Math","random","undefined","dataModel","dataType","tooltipTrigger","params","defaultHtml","asyncTicket","name","getRawIndex","tooltipOpt","content","formatter","subTooltipModel","formatTpl","callback","cbTicket","setContent","show","viewWidth","getWidth","viewHeight","getHeight","contentSize","getSize","align","vAlign","rect","getBoundingRect","clone","applyTransform","transform","viewSize","slice","isArray","layoutRect","getLayoutRect","pos","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","moveTo","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","dispose","unregister","modelCascade","resultModel","pop","isInstance","gapH","gapV","size","getOuterSize","min","max","domWidth","domHeight","gap","rectWidth","rectHeight","module","exports"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) should be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;"]}]}