{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/custom.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/custom.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiKTsKCi8qCiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQoqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQoqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQoqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgoqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQoqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQoqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKKiB1bmRlciB0aGUgTGljZW5zZS4KKi8KdmFyIF9jb25maWcgPSByZXF1aXJlKCIuLi9jb25maWciKTsKCnZhciBfX0RFVl9fID0gX2NvbmZpZy5fX0RFVl9fOwoKdmFyIHpyVXRpbCA9IHJlcXVpcmUoInpyZW5kZXIvbGliL2NvcmUvdXRpbCIpOwoKdmFyIGdyYXBoaWNVdGlsID0gcmVxdWlyZSgiLi4vdXRpbC9ncmFwaGljIik7Cgp2YXIgX2xhYmVsSGVscGVyID0gcmVxdWlyZSgiLi9oZWxwZXIvbGFiZWxIZWxwZXIiKTsKCnZhciBnZXREZWZhdWx0TGFiZWwgPSBfbGFiZWxIZWxwZXIuZ2V0RGVmYXVsdExhYmVsOwoKdmFyIGNyZWF0ZUxpc3RGcm9tQXJyYXkgPSByZXF1aXJlKCIuL2hlbHBlci9jcmVhdGVMaXN0RnJvbUFycmF5Iik7Cgp2YXIgX2JhckdyaWQgPSByZXF1aXJlKCIuLi9sYXlvdXQvYmFyR3JpZCIpOwoKdmFyIGdldExheW91dE9uQXhpcyA9IF9iYXJHcmlkLmdldExheW91dE9uQXhpczsKCnZhciBEYXRhRGlmZmVyID0gcmVxdWlyZSgiLi4vZGF0YS9EYXRhRGlmZmVyIik7Cgp2YXIgU2VyaWVzTW9kZWwgPSByZXF1aXJlKCIuLi9tb2RlbC9TZXJpZXMiKTsKCnZhciBNb2RlbCA9IHJlcXVpcmUoIi4uL21vZGVsL01vZGVsIik7Cgp2YXIgQ2hhcnRWaWV3ID0gcmVxdWlyZSgiLi4vdmlldy9DaGFydCIpOwoKdmFyIF9jcmVhdGVDbGlwUGF0aEZyb21Db29yZFN5cyA9IHJlcXVpcmUoIi4vaGVscGVyL2NyZWF0ZUNsaXBQYXRoRnJvbUNvb3JkU3lzIik7Cgp2YXIgY3JlYXRlQ2xpcFBhdGggPSBfY3JlYXRlQ2xpcFBhdGhGcm9tQ29vcmRTeXMuY3JlYXRlQ2xpcFBhdGg7Cgp2YXIgcHJlcGFyZUNhcnRlc2lhbjJkID0gcmVxdWlyZSgiLi4vY29vcmQvY2FydGVzaWFuL3ByZXBhcmVDdXN0b20iKTsKCnZhciBwcmVwYXJlR2VvID0gcmVxdWlyZSgiLi4vY29vcmQvZ2VvL3ByZXBhcmVDdXN0b20iKTsKCnZhciBwcmVwYXJlU2luZ2xlQXhpcyA9IHJlcXVpcmUoIi4uL2Nvb3JkL3NpbmdsZS9wcmVwYXJlQ3VzdG9tIik7Cgp2YXIgcHJlcGFyZVBvbGFyID0gcmVxdWlyZSgiLi4vY29vcmQvcG9sYXIvcHJlcGFyZUN1c3RvbSIpOwoKdmFyIHByZXBhcmVDYWxlbmRhciA9IHJlcXVpcmUoIi4uL2Nvb3JkL2NhbGVuZGFyL3ByZXBhcmVDdXN0b20iKTsKLyoKKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24KKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQoqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAoqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwoqIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwoKCnZhciBDQUNIRURfTEFCRUxfU1RZTEVfUFJPUEVSVElFUyA9IGdyYXBoaWNVdGlsLkNBQ0hFRF9MQUJFTF9TVFlMRV9QUk9QRVJUSUVTOwp2YXIgSVRFTV9TVFlMRV9OT1JNQUxfUEFUSCA9IFsnaXRlbVN0eWxlJ107CnZhciBJVEVNX1NUWUxFX0VNUEhBU0lTX1BBVEggPSBbJ2VtcGhhc2lzJywgJ2l0ZW1TdHlsZSddOwp2YXIgTEFCRUxfTk9STUFMID0gWydsYWJlbCddOwp2YXIgTEFCRUxfRU1QSEFTSVMgPSBbJ2VtcGhhc2lzJywgJ2xhYmVsJ107IC8vIFVzZSBwcmVmaXggdG8gYXZvaWQgaW5kZXggdG8gYmUgdGhlIHNhbWUgYXMgZWwubmFtZSwKLy8gd2hpY2ggd2lsbCBjYXVzZSB3ZWlyZCB1ZHBhdGUgYW5pbWF0aW9uLgoKdmFyIEdST1VQX0RJRkZfUFJFRklYID0gJ2VcMFwwJzsKLyoqCiAqIFRvIHJlZHVjZSB0b3RhbCBwYWNrYWdlIHNpemUgb2YgZWFjaCBjb29yZGluYXRlIHN5c3RlbXMsIHRoZSBtb2R1bGVzIGBwcmVwYXJlQ3VzdG9tYAogKiBvZiBlYWNoIGNvb3JkaW5hdGUgc3lzdGVtcyBhcmUgbm90IHJlcXVpcmVkIGJ5IGVhY2ggY29vcmRpbmF0ZSBzeXN0ZW1zIGRpcmVjdGx5LCBidXQKICogcmVxdWlyZWQgYnkgdGhlIG1vZHVsZSBgY3VzdG9tYC4KICoKICogcHJlcGFyZUluZm9Gb3JDdXN0b21TZXJpZXMge0Z1bmN0aW9ufTogb3B0aW9uYWwKICogICAgIEByZXR1cm4ge09iamVjdH0ge2Nvb3JkU3lzOiB7Li4ufSwgYXBpOiB7CiAqICAgICAgICAgY29vcmQ6IGZ1bmN0aW9uIChkYXRhLCBjbGFtcCkge30sIC8vIHJldHVybiBwb2ludCBpbiBnbG9iYWwuCiAqICAgICAgICAgc2l6ZTogZnVuY3Rpb24gKGRhdGFTaXplLCBkYXRhSXRlbSkge30gLy8gcmV0dXJuIHNpemUgb2YgZWFjaCBheGlzIGluIGNvb3JkU3lzLgogKiAgICAgfX0KICovCgp2YXIgcHJlcGFyZUN1c3RvbXMgPSB7CiAgY2FydGVzaWFuMmQ6IHByZXBhcmVDYXJ0ZXNpYW4yZCwKICBnZW86IHByZXBhcmVHZW8sCiAgc2luZ2xlQXhpczogcHJlcGFyZVNpbmdsZUF4aXMsCiAgcG9sYXI6IHByZXBhcmVQb2xhciwKICBjYWxlbmRhcjogcHJlcGFyZUNhbGVuZGFyCn07IC8vIC0tLS0tLQovLyBNb2RlbAovLyAtLS0tLS0KClNlcmllc01vZGVsLmV4dGVuZCh7CiAgdHlwZTogJ3Nlcmllcy5jdXN0b20nLAogIGRlcGVuZGVuY2llczogWydncmlkJywgJ3BvbGFyJywgJ2dlbycsICdzaW5nbGVBeGlzJywgJ2NhbGVuZGFyJ10sCiAgZGVmYXVsdE9wdGlvbjogewogICAgY29vcmRpbmF0ZVN5c3RlbTogJ2NhcnRlc2lhbjJkJywKICAgIC8vIENhbiBiZSBzZXQgYXMgJ25vbmUnCiAgICB6bGV2ZWw6IDAsCiAgICB6OiAyLAogICAgbGVnZW5kSG92ZXJMaW5rOiB0cnVlLAogICAgdXNlVHJhbnNmb3JtOiB0cnVlLAogICAgLy8gQ3VzdG9tIHNlcmllcyB3aWxsIG5vdCBjbGlwIGJ5IGRlZmF1bHQuCiAgICAvLyBTb21lIGNhc2Ugd2lsbCB1c2UgY3VzdG9tIHNlcmllcyB0byBkcmF3IGxhYmVsCiAgICAvLyBGb3IgZXhhbXBsZSBodHRwczovL2VjaGFydHMuYXBhY2hlLm9yZy9leGFtcGxlcy9lbi9lZGl0b3IuaHRtbD9jPWN1c3RvbS1nYW50dC1mbGlnaHQKICAgIC8vIE9ubHkgd29ya3Mgb24gcG9sYXIgYW5kIGNhcnRlc2lhbjJkIGNvb3JkaW5hdGUgc3lzdGVtLgogICAgY2xpcDogZmFsc2UgLy8gQ2FydGVzaWFuIGNvb3JkaW5hdGUgc3lzdGVtCiAgICAvLyB4QXhpc0luZGV4OiAwLAogICAgLy8geUF4aXNJbmRleDogMCwKICAgIC8vIFBvbGFyIGNvb3JkaW5hdGUgc3lzdGVtCiAgICAvLyBwb2xhckluZGV4OiAwLAogICAgLy8gR2VvIGNvb3JkaW5hdGUgc3lzdGVtCiAgICAvLyBnZW9JbmRleDogMCwKICAgIC8vIGxhYmVsOiB7fQogICAgLy8gaXRlbVN0eWxlOiB7fQoKICB9LAoKICAvKioKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBnZXRJbml0aWFsRGF0YTogZnVuY3Rpb24gZ2V0SW5pdGlhbERhdGEob3B0aW9uLCBlY01vZGVsKSB7CiAgICByZXR1cm4gY3JlYXRlTGlzdEZyb21BcnJheSh0aGlzLmdldFNvdXJjZSgpLCB0aGlzKTsKICB9LAoKICAvKioKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBnZXREYXRhUGFyYW1zOiBmdW5jdGlvbiBnZXREYXRhUGFyYW1zKGRhdGFJbmRleCwgZGF0YVR5cGUsIGVsKSB7CiAgICB2YXIgcGFyYW1zID0gU2VyaWVzTW9kZWwucHJvdG90eXBlLmdldERhdGFQYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIGVsICYmIChwYXJhbXMuaW5mbyA9IGVsLmluZm8pOwogICAgcmV0dXJuIHBhcmFtczsKICB9Cn0pOyAvLyAtLS0tLQovLyBWaWV3Ci8vIC0tLS0tCgpDaGFydFZpZXcuZXh0ZW5kKHsKICB0eXBlOiAnY3VzdG9tJywKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSB7bW9kdWxlOmVjaGFydHMvZGF0YS9MaXN0fQogICAqLwogIF9kYXRhOiBudWxsLAoKICAvKioKICAgKiBAb3ZlcnJpZGUKICAgKi8KICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihjdXN0b21TZXJpZXMsIGVjTW9kZWwsIGFwaSwgcGF5bG9hZCkgewogICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhOwogICAgdmFyIGRhdGEgPSBjdXN0b21TZXJpZXMuZ2V0RGF0YSgpOwogICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDsKICAgIHZhciByZW5kZXJJdGVtID0gbWFrZVJlbmRlckl0ZW0oY3VzdG9tU2VyaWVzLCBkYXRhLCBlY01vZGVsLCBhcGkpOyAvLyBCeSBkZWZhdWx0LCBtZXJnZSBtb2RlIGlzIGFwcGxpZWQuIEluIG1vc3QgY2FzZXMsIGN1c3RvbSBzZXJpZXMgaXMKICAgIC8vIHVzZWQgaW4gdGhlIHNjZW5hcmlvIHRoYXQgZGF0YSBhbW91bnQgaXMgbm90IGxhcmdlIGJ1dCBncmFwaGljIGVsZW1lbnRzCiAgICAvLyBpcyBjb21wbGljYXRlZCwgd2hlcmUgbWVyZ2UgbW9kZSBpcyBwcm9iYWJseSBuZWNlc3NhcnkgZm9yIG9wdGltaXphdGlvbi4KICAgIC8vIEZvciBleGFtcGxlLCByZXVzZSBncmFwaGljIGVsZW1lbnRzIGFuZCBvbmx5IHVwZGF0ZSB0aGUgdHJhbnNmb3JtIHdoZW4KICAgIC8vIHJvYW0gb3IgZGF0YSB6b29tIGFjY29yZGluZyB0byBgYWN0aW9uVHlwZWAuCgogICAgZGF0YS5kaWZmKG9sZERhdGEpLmFkZChmdW5jdGlvbiAobmV3SWR4KSB7CiAgICAgIGNyZWF0ZU9yVXBkYXRlKG51bGwsIG5ld0lkeCwgcmVuZGVySXRlbShuZXdJZHgsIHBheWxvYWQpLCBjdXN0b21TZXJpZXMsIGdyb3VwLCBkYXRhKTsKICAgIH0pLnVwZGF0ZShmdW5jdGlvbiAobmV3SWR4LCBvbGRJZHgpIHsKICAgICAgdmFyIGVsID0gb2xkRGF0YS5nZXRJdGVtR3JhcGhpY0VsKG9sZElkeCk7CiAgICAgIGNyZWF0ZU9yVXBkYXRlKGVsLCBuZXdJZHgsIHJlbmRlckl0ZW0obmV3SWR4LCBwYXlsb2FkKSwgY3VzdG9tU2VyaWVzLCBncm91cCwgZGF0YSk7CiAgICB9KS5yZW1vdmUoZnVuY3Rpb24gKG9sZElkeCkgewogICAgICB2YXIgZWwgPSBvbGREYXRhLmdldEl0ZW1HcmFwaGljRWwob2xkSWR4KTsKICAgICAgZWwgJiYgZ3JvdXAucmVtb3ZlKGVsKTsKICAgIH0pLmV4ZWN1dGUoKTsgLy8gRG8gY2xpcHBpbmcKCiAgICB2YXIgY2xpcFBhdGggPSBjdXN0b21TZXJpZXMuZ2V0KCdjbGlwJywgdHJ1ZSkgPyBjcmVhdGVDbGlwUGF0aChjdXN0b21TZXJpZXMuY29vcmRpbmF0ZVN5c3RlbSwgZmFsc2UsIGN1c3RvbVNlcmllcykgOiBudWxsOwoKICAgIGlmIChjbGlwUGF0aCkgewogICAgICBncm91cC5zZXRDbGlwUGF0aChjbGlwUGF0aCk7CiAgICB9IGVsc2UgewogICAgICBncm91cC5yZW1vdmVDbGlwUGF0aCgpOwogICAgfQoKICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogIH0sCiAgaW5jcmVtZW50YWxQcmVwYXJlUmVuZGVyOiBmdW5jdGlvbiBpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXIoY3VzdG9tU2VyaWVzLCBlY01vZGVsLCBhcGkpIHsKICAgIHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCk7CiAgICB0aGlzLl9kYXRhID0gbnVsbDsKICB9LAogIGluY3JlbWVudGFsUmVuZGVyOiBmdW5jdGlvbiBpbmNyZW1lbnRhbFJlbmRlcihwYXJhbXMsIGN1c3RvbVNlcmllcywgZWNNb2RlbCwgYXBpLCBwYXlsb2FkKSB7CiAgICB2YXIgZGF0YSA9IGN1c3RvbVNlcmllcy5nZXREYXRhKCk7CiAgICB2YXIgcmVuZGVySXRlbSA9IG1ha2VSZW5kZXJJdGVtKGN1c3RvbVNlcmllcywgZGF0YSwgZWNNb2RlbCwgYXBpKTsKCiAgICBmdW5jdGlvbiBzZXRJbmNyZW1lbnRhbEFuZEhvdmVyTGF5ZXIoZWwpIHsKICAgICAgaWYgKCFlbC5pc0dyb3VwKSB7CiAgICAgICAgZWwuaW5jcmVtZW50YWwgPSB0cnVlOwogICAgICAgIGVsLnVzZUhvdmVyTGF5ZXIgPSB0cnVlOwogICAgICB9CiAgICB9CgogICAgZm9yICh2YXIgaWR4ID0gcGFyYW1zLnN0YXJ0OyBpZHggPCBwYXJhbXMuZW5kOyBpZHgrKykgewogICAgICB2YXIgZWwgPSBjcmVhdGVPclVwZGF0ZShudWxsLCBpZHgsIHJlbmRlckl0ZW0oaWR4LCBwYXlsb2FkKSwgY3VzdG9tU2VyaWVzLCB0aGlzLmdyb3VwLCBkYXRhKTsKICAgICAgZWwudHJhdmVyc2Uoc2V0SW5jcmVtZW50YWxBbmRIb3ZlckxheWVyKTsKICAgIH0KICB9LAoKICAvKioKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBkaXNwb3NlOiB6clV0aWwubm9vcCwKCiAgLyoqCiAgICogQG92ZXJyaWRlCiAgICovCiAgZmlsdGVyRm9yRXhwb3NlZEV2ZW50OiBmdW5jdGlvbiBmaWx0ZXJGb3JFeHBvc2VkRXZlbnQoZXZlbnRUeXBlLCBxdWVyeSwgdGFyZ2V0RWwsIHBhY2tlZEV2ZW50KSB7CiAgICB2YXIgZWxlbWVudE5hbWUgPSBxdWVyeS5lbGVtZW50OwoKICAgIGlmIChlbGVtZW50TmFtZSA9PSBudWxsIHx8IHRhcmdldEVsLm5hbWUgPT09IGVsZW1lbnROYW1lKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSAvLyBFbmFibGUgdG8gZ2l2ZSBhIG5hbWUgb24gYSBncm91cCBtYWRlIGJ5IGByZW5kZXJJdGVtYCwgYW5kIGxpc3RlbgogICAgLy8gZXZlbnRzIHRoYXQgdHJpZ2dlcmQgYnkgaXRzIGRlc2NlbmRlbnRzLgoKCiAgICB3aGlsZSAoKHRhcmdldEVsID0gdGFyZ2V0RWwucGFyZW50KSAmJiB0YXJnZXRFbCAhPT0gdGhpcy5ncm91cCkgewogICAgICBpZiAodGFyZ2V0RWwubmFtZSA9PT0gZWxlbWVudE5hbWUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9Cn0pOwoKZnVuY3Rpb24gY3JlYXRlRWwoZWxPcHRpb24pIHsKICB2YXIgZ3JhcGhpY1R5cGUgPSBlbE9wdGlvbi50eXBlOwogIHZhciBlbDsgLy8gVGhvc2UgZ3JhcGhpYyBlbGVtZW50cyBhcmUgbm90IHNoYXBlcy4gVGhleSBzaG91bGQgbm90IGJlCiAgLy8gb3ZlcndyaXR0ZW4gYnkgdXNlcnMsIHNvIGRvIHRoZW0gZmlyc3QuCgogIGlmIChncmFwaGljVHlwZSA9PT0gJ3BhdGgnKSB7CiAgICB2YXIgc2hhcGUgPSBlbE9wdGlvbi5zaGFwZTsgLy8gVXNpbmcgcGF0aFJlY3QgYnJpbmdzIGNvbnZlbmllbmNlIHRvIHVzZXJzIHNhY2xlIHN2ZyBwYXRoLgoKICAgIHZhciBwYXRoUmVjdCA9IHNoYXBlLndpZHRoICE9IG51bGwgJiYgc2hhcGUuaGVpZ2h0ICE9IG51bGwgPyB7CiAgICAgIHg6IHNoYXBlLnggfHwgMCwKICAgICAgeTogc2hhcGUueSB8fCAwLAogICAgICB3aWR0aDogc2hhcGUud2lkdGgsCiAgICAgIGhlaWdodDogc2hhcGUuaGVpZ2h0CiAgICB9IDogbnVsbDsKICAgIHZhciBwYXRoRGF0YSA9IGdldFBhdGhEYXRhKHNoYXBlKTsgLy8gUGF0aCBpcyBhbHNvIHVzZWQgZm9yIGljb24sIHNvIGxheW91dCAnY2VudGVyJyBieSBkZWZhdWx0LgoKICAgIGVsID0gZ3JhcGhpY1V0aWwubWFrZVBhdGgocGF0aERhdGEsIG51bGwsIHBhdGhSZWN0LCBzaGFwZS5sYXlvdXQgfHwgJ2NlbnRlcicpOwogICAgZWwuX19jdXN0b21QYXRoRGF0YSA9IHBhdGhEYXRhOwogIH0gZWxzZSBpZiAoZ3JhcGhpY1R5cGUgPT09ICdpbWFnZScpIHsKICAgIGVsID0gbmV3IGdyYXBoaWNVdGlsLkltYWdlKHt9KTsKICAgIGVsLl9fY3VzdG9tSW1hZ2VQYXRoID0gZWxPcHRpb24uc3R5bGUuaW1hZ2U7CiAgfSBlbHNlIGlmIChncmFwaGljVHlwZSA9PT0gJ3RleHQnKSB7CiAgICBlbCA9IG5ldyBncmFwaGljVXRpbC5UZXh0KHt9KTsKICAgIGVsLl9fY3VzdG9tVGV4dCA9IGVsT3B0aW9uLnN0eWxlLnRleHQ7CiAgfSBlbHNlIGlmIChncmFwaGljVHlwZSA9PT0gJ2dyb3VwJykgewogICAgZWwgPSBuZXcgZ3JhcGhpY1V0aWwuR3JvdXAoKTsKICB9IGVsc2UgaWYgKGdyYXBoaWNUeXBlID09PSAnY29tcG91bmRQYXRoJykgewogICAgdGhyb3cgbmV3IEVycm9yKCciY29tcG91bmRQYXRoIiBpcyBub3Qgc3VwcG9ydGVkIHlldC4nKTsKICB9IGVsc2UgewogICAgdmFyIENseiA9IGdyYXBoaWNVdGlsLmdldFNoYXBlQ2xhc3MoZ3JhcGhpY1R5cGUpOwogICAgZWwgPSBuZXcgQ2x6KCk7CiAgfQoKICBlbC5fX2N1c3RvbUdyYXBoaWNUeXBlID0gZ3JhcGhpY1R5cGU7CiAgZWwubmFtZSA9IGVsT3B0aW9uLm5hbWU7CiAgcmV0dXJuIGVsOwp9CgpmdW5jdGlvbiB1cGRhdGVFbChlbCwgZGF0YUluZGV4LCBlbE9wdGlvbiwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhLCBpc0luaXQsIGlzUm9vdCkgewogIHZhciB0cmFuc2l0aW9uUHJvcHMgPSB7fTsKICB2YXIgZWxPcHRpb25TdHlsZSA9IGVsT3B0aW9uLnN0eWxlIHx8IHt9OwogIGVsT3B0aW9uLnNoYXBlICYmICh0cmFuc2l0aW9uUHJvcHMuc2hhcGUgPSB6clV0aWwuY2xvbmUoZWxPcHRpb24uc2hhcGUpKTsKICBlbE9wdGlvbi5wb3NpdGlvbiAmJiAodHJhbnNpdGlvblByb3BzLnBvc2l0aW9uID0gZWxPcHRpb24ucG9zaXRpb24uc2xpY2UoKSk7CiAgZWxPcHRpb24uc2NhbGUgJiYgKHRyYW5zaXRpb25Qcm9wcy5zY2FsZSA9IGVsT3B0aW9uLnNjYWxlLnNsaWNlKCkpOwogIGVsT3B0aW9uLm9yaWdpbiAmJiAodHJhbnNpdGlvblByb3BzLm9yaWdpbiA9IGVsT3B0aW9uLm9yaWdpbi5zbGljZSgpKTsKICBlbE9wdGlvbi5yb3RhdGlvbiAmJiAodHJhbnNpdGlvblByb3BzLnJvdGF0aW9uID0gZWxPcHRpb24ucm90YXRpb24pOwoKICBpZiAoZWwudHlwZSA9PT0gJ2ltYWdlJyAmJiBlbE9wdGlvbi5zdHlsZSkgewogICAgdmFyIHRhcmdldFN0eWxlID0gdHJhbnNpdGlvblByb3BzLnN0eWxlID0ge307CiAgICB6clV0aWwuZWFjaChbJ3gnLCAneScsICd3aWR0aCcsICdoZWlnaHQnXSwgZnVuY3Rpb24gKHByb3ApIHsKICAgICAgcHJlcGFyZVN0eWxlVHJhbnNpdGlvbihwcm9wLCB0YXJnZXRTdHlsZSwgZWxPcHRpb25TdHlsZSwgZWwuc3R5bGUsIGlzSW5pdCk7CiAgICB9KTsKICB9CgogIGlmIChlbC50eXBlID09PSAndGV4dCcgJiYgZWxPcHRpb24uc3R5bGUpIHsKICAgIHZhciB0YXJnZXRTdHlsZSA9IHRyYW5zaXRpb25Qcm9wcy5zdHlsZSA9IHt9OwogICAgenJVdGlsLmVhY2goWyd4JywgJ3knXSwgZnVuY3Rpb24gKHByb3ApIHsKICAgICAgcHJlcGFyZVN0eWxlVHJhbnNpdGlvbihwcm9wLCB0YXJnZXRTdHlsZSwgZWxPcHRpb25TdHlsZSwgZWwuc3R5bGUsIGlzSW5pdCk7CiAgICB9KTsgLy8gQ29tcGF0aWJsZSB3aXRoIHByZXZpb3VzOiBib3RoIHN1cHBvcnQKICAgIC8vIHRleHRGaWxsIGFuZCBmaWxsLCB0ZXh0U3Ryb2tlIGFuZCBzdHJva2UgaW4gJ3RleHQnIGVsZW1lbnQuCgogICAgIWVsT3B0aW9uU3R5bGUuaGFzT3duUHJvcGVydHkoJ3RleHRGaWxsJykgJiYgZWxPcHRpb25TdHlsZS5maWxsICYmIChlbE9wdGlvblN0eWxlLnRleHRGaWxsID0gZWxPcHRpb25TdHlsZS5maWxsKTsKICAgICFlbE9wdGlvblN0eWxlLmhhc093blByb3BlcnR5KCd0ZXh0U3Ryb2tlJykgJiYgZWxPcHRpb25TdHlsZS5zdHJva2UgJiYgKGVsT3B0aW9uU3R5bGUudGV4dFN0cm9rZSA9IGVsT3B0aW9uU3R5bGUuc3Ryb2tlKTsKICB9CgogIGlmIChlbC50eXBlICE9PSAnZ3JvdXAnKSB7CiAgICBlbC51c2VTdHlsZShlbE9wdGlvblN0eWxlKTsgLy8gSW5pdCBhbmltYXRpb24uCgogICAgaWYgKGlzSW5pdCkgewogICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMDsKICAgICAgdmFyIHRhcmdldE9wYWNpdHkgPSBlbE9wdGlvblN0eWxlLm9wYWNpdHk7CiAgICAgIHRhcmdldE9wYWNpdHkgPT0gbnVsbCAmJiAodGFyZ2V0T3BhY2l0eSA9IDEpOwogICAgICBncmFwaGljVXRpbC5pbml0UHJvcHMoZWwsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgb3BhY2l0eTogdGFyZ2V0T3BhY2l0eQogICAgICAgIH0KICAgICAgfSwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhSW5kZXgpOwogICAgfQogIH0KCiAgaWYgKGlzSW5pdCkgewogICAgZWwuYXR0cih0cmFuc2l0aW9uUHJvcHMpOwogIH0gZWxzZSB7CiAgICBncmFwaGljVXRpbC51cGRhdGVQcm9wcyhlbCwgdHJhbnNpdGlvblByb3BzLCBhbmltYXRhYmxlTW9kZWwsIGRhdGFJbmRleCk7CiAgfSAvLyBNZXJnZSBieSBkZWZhdWx0LgogIC8vIHoyIG11c3Qgbm90IGJlIG51bGwvdW5kZWZpbmVkLCBvdGhlcndpc2Ugc29ydCBlcnJvciBtYXkgb2NjdXIuCgoKICBlbE9wdGlvbi5oYXNPd25Qcm9wZXJ0eSgnejInKSAmJiBlbC5hdHRyKCd6MicsIGVsT3B0aW9uLnoyIHx8IDApOwogIGVsT3B0aW9uLmhhc093blByb3BlcnR5KCdzaWxlbnQnKSAmJiBlbC5hdHRyKCdzaWxlbnQnLCBlbE9wdGlvbi5zaWxlbnQpOwogIGVsT3B0aW9uLmhhc093blByb3BlcnR5KCdpbnZpc2libGUnKSAmJiBlbC5hdHRyKCdpbnZpc2libGUnLCBlbE9wdGlvbi5pbnZpc2libGUpOwogIGVsT3B0aW9uLmhhc093blByb3BlcnR5KCdpZ25vcmUnKSAmJiBlbC5hdHRyKCdpZ25vcmUnLCBlbE9wdGlvbi5pZ25vcmUpOyAvLyBgZWxPcHRpb24uaW5mb2AgZW5hYmxlcyB1c2VyIHRvIG1vdW50IHNvbWUgaW5mbyBvbgogIC8vIGVsZW1lbnRzIGFuZCB1c2UgdGhlbSBpbiBldmVudCBoYW5kbGVycy4KICAvLyBVcGRhdGUgdGhlbSBvbmx5IHdoZW4gdXNlciBzcGVjaWZpZWQsIG90aGVyd2lzZSwgcmVtYWluLgoKICBlbE9wdGlvbi5oYXNPd25Qcm9wZXJ0eSgnaW5mbycpICYmIGVsLmF0dHIoJ2luZm8nLCBlbE9wdGlvbi5pbmZvKTsgLy8gSWYgYGVsT3B0aW9uLnN0eWxlRW1waGFzaXNgIGlzIGBmYWxzZWAsIHJlbW92ZSBob3ZlciBzdHlsZS4gVGhlCiAgLy8gbG9naWMgaXMgZW5zdXJlZCBieSBgZ3JhcGhpY1V0aWwuc2V0RWxlbWVudEhvdmVyU3R5bGVgLgoKICB2YXIgc3R5bGVFbXBoYXNpcyA9IGVsT3B0aW9uLnN0eWxlRW1waGFzaXM7IC8vIGhvdmVyU3R5bGUgc2hvdWxkIGFsd2F5cyBiZSBzZXQgaGVyZSwgYmVjYXVzZSBpZiB0aGUgaG92ZXIgc3R5bGUKICAvLyBtYXkgYWxyZWFkeSBiZSBjaGFuZ2VkLCB3aGVyZSB0aGUgaW5uZXIgY2FjaGUgc2hvdWxkIGJlIHJlc2V0LgoKICBncmFwaGljVXRpbC5zZXRFbGVtZW50SG92ZXJTdHlsZShlbCwgc3R5bGVFbXBoYXNpcyk7CgogIGlmIChpc1Jvb3QpIHsKICAgIGdyYXBoaWNVdGlsLnNldEFzSGlnaERvd25EaXNwYXRjaGVyKGVsLCBzdHlsZUVtcGhhc2lzICE9PSBmYWxzZSk7CiAgfQp9CgpmdW5jdGlvbiBwcmVwYXJlU3R5bGVUcmFuc2l0aW9uKHByb3AsIHRhcmdldFN0eWxlLCBlbE9wdGlvblN0eWxlLCBvbGRFbFN0eWxlLCBpc0luaXQpIHsKICBpZiAoZWxPcHRpb25TdHlsZVtwcm9wXSAhPSBudWxsICYmICFpc0luaXQpIHsKICAgIHRhcmdldFN0eWxlW3Byb3BdID0gZWxPcHRpb25TdHlsZVtwcm9wXTsKICAgIGVsT3B0aW9uU3R5bGVbcHJvcF0gPSBvbGRFbFN0eWxlW3Byb3BdOwogIH0KfQoKZnVuY3Rpb24gbWFrZVJlbmRlckl0ZW0oY3VzdG9tU2VyaWVzLCBkYXRhLCBlY01vZGVsLCBhcGkpIHsKICB2YXIgcmVuZGVySXRlbSA9IGN1c3RvbVNlcmllcy5nZXQoJ3JlbmRlckl0ZW0nKTsKICB2YXIgY29vcmRTeXMgPSBjdXN0b21TZXJpZXMuY29vcmRpbmF0ZVN5c3RlbTsKICB2YXIgcHJlcGFyZVJlc3VsdCA9IHt9OwoKICBpZiAoY29vcmRTeXMpIHsKICAgIHByZXBhcmVSZXN1bHQgPSBjb29yZFN5cy5wcmVwYXJlQ3VzdG9tcyA/IGNvb3JkU3lzLnByZXBhcmVDdXN0b21zKCkgOiBwcmVwYXJlQ3VzdG9tc1tjb29yZFN5cy50eXBlXShjb29yZFN5cyk7CiAgfQoKICB2YXIgdXNlckFQSSA9IHpyVXRpbC5kZWZhdWx0cyh7CiAgICBnZXRXaWR0aDogYXBpLmdldFdpZHRoLAogICAgZ2V0SGVpZ2h0OiBhcGkuZ2V0SGVpZ2h0LAogICAgZ2V0WnI6IGFwaS5nZXRaciwKICAgIGdldERldmljZVBpeGVsUmF0aW86IGFwaS5nZXREZXZpY2VQaXhlbFJhdGlvLAogICAgdmFsdWU6IHZhbHVlLAogICAgc3R5bGU6IHN0eWxlLAogICAgc3R5bGVFbXBoYXNpczogc3R5bGVFbXBoYXNpcywKICAgIHZpc3VhbDogdmlzdWFsLAogICAgYmFyTGF5b3V0OiBiYXJMYXlvdXQsCiAgICBjdXJyZW50U2VyaWVzSW5kaWNlczogY3VycmVudFNlcmllc0luZGljZXMsCiAgICBmb250OiBmb250CiAgfSwgcHJlcGFyZVJlc3VsdC5hcGkgfHwge30pOwogIHZhciB1c2VyUGFyYW1zID0gewogICAgLy8gVGhlIGxpZmUgY3ljbGUgb2YgY29udGV4dDogY3VycmVudCByb3VuZCBvZiByZW5kZXJpbmcuCiAgICAvLyBUaGUgZ2xvYmFsIGxpZmUgY3ljbGUgaXMgcHJvYmFibHkgbm90IG5lY2Vzc2FyeSwgYmVjYXVzZQogICAgLy8gdXNlciBjYW4gc3RvcmUgZ2xvYmFsIHN0YXR1cyBieSB0aGVtc2VsdmVzLgogICAgY29udGV4dDoge30sCiAgICBzZXJpZXNJZDogY3VzdG9tU2VyaWVzLmlkLAogICAgc2VyaWVzTmFtZTogY3VzdG9tU2VyaWVzLm5hbWUsCiAgICBzZXJpZXNJbmRleDogY3VzdG9tU2VyaWVzLnNlcmllc0luZGV4LAogICAgY29vcmRTeXM6IHByZXBhcmVSZXN1bHQuY29vcmRTeXMsCiAgICBkYXRhSW5zaWRlTGVuZ3RoOiBkYXRhLmNvdW50KCksCiAgICBlbmNvZGU6IHdyYXBFbmNvZGVEZWYoY3VzdG9tU2VyaWVzLmdldERhdGEoKSkKICB9OyAvLyBEbyBub3Qgc3VwcG9ydCBjYWxsIGBhcGlgIGFzeW5jaHJvbm91c2x5IHdpdGhvdXQgZGF0YUluZGV4SW5zaWRlIGlucHV0LgoKICB2YXIgY3VyckRhdGFJbmRleEluc2lkZTsKICB2YXIgY3VyckRpcnR5ID0gdHJ1ZTsKICB2YXIgY3Vyckl0ZW1Nb2RlbDsKICB2YXIgY3VyckxhYmVsTm9ybWFsTW9kZWw7CiAgdmFyIGN1cnJMYWJlbEVtcGhhc2lzTW9kZWw7CiAgdmFyIGN1cnJWaXN1YWxDb2xvcjsKICByZXR1cm4gZnVuY3Rpb24gKGRhdGFJbmRleEluc2lkZSwgcGF5bG9hZCkgewogICAgY3VyckRhdGFJbmRleEluc2lkZSA9IGRhdGFJbmRleEluc2lkZTsKICAgIGN1cnJEaXJ0eSA9IHRydWU7CiAgICByZXR1cm4gcmVuZGVySXRlbSAmJiByZW5kZXJJdGVtKHpyVXRpbC5kZWZhdWx0cyh7CiAgICAgIGRhdGFJbmRleEluc2lkZTogZGF0YUluZGV4SW5zaWRlLAogICAgICBkYXRhSW5kZXg6IGRhdGEuZ2V0UmF3SW5kZXgoZGF0YUluZGV4SW5zaWRlKSwKICAgICAgLy8gQ2FuIGJlIHVzZWQgZm9yIG9wdGltaXphdGlvbiB3aGVuIHpvb20gb3Igcm9hbS4KICAgICAgYWN0aW9uVHlwZTogcGF5bG9hZCA/IHBheWxvYWQudHlwZSA6IG51bGwKICAgIH0sIHVzZXJQYXJhbXMpLCB1c2VyQVBJKTsKICB9OyAvLyBEbyBub3QgdXBkYXRlIGNhY2hlIHVudGlsIGFwaSBjYWxsZWQuCgogIGZ1bmN0aW9uIHVwZGF0ZUNhY2hlKGRhdGFJbmRleEluc2lkZSkgewogICAgZGF0YUluZGV4SW5zaWRlID09IG51bGwgJiYgKGRhdGFJbmRleEluc2lkZSA9IGN1cnJEYXRhSW5kZXhJbnNpZGUpOwoKICAgIGlmIChjdXJyRGlydHkpIHsKICAgICAgY3Vyckl0ZW1Nb2RlbCA9IGRhdGEuZ2V0SXRlbU1vZGVsKGRhdGFJbmRleEluc2lkZSk7CiAgICAgIGN1cnJMYWJlbE5vcm1hbE1vZGVsID0gY3Vyckl0ZW1Nb2RlbC5nZXRNb2RlbChMQUJFTF9OT1JNQUwpOwogICAgICBjdXJyTGFiZWxFbXBoYXNpc01vZGVsID0gY3Vyckl0ZW1Nb2RlbC5nZXRNb2RlbChMQUJFTF9FTVBIQVNJUyk7CiAgICAgIGN1cnJWaXN1YWxDb2xvciA9IGRhdGEuZ2V0SXRlbVZpc3VhbChkYXRhSW5kZXhJbnNpZGUsICdjb2xvcicpOwogICAgICBjdXJyRGlydHkgPSBmYWxzZTsKICAgIH0KICB9CiAgLyoqCiAgICogQHB1YmxpYwogICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gZGltCiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXRhSW5kZXhJbnNpZGU9Y3VyckRhdGFJbmRleEluc2lkZV0KICAgKiBAcmV0dXJuIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZQogICAqLwoKCiAgZnVuY3Rpb24gdmFsdWUoZGltLCBkYXRhSW5kZXhJbnNpZGUpIHsKICAgIGRhdGFJbmRleEluc2lkZSA9PSBudWxsICYmIChkYXRhSW5kZXhJbnNpZGUgPSBjdXJyRGF0YUluZGV4SW5zaWRlKTsKICAgIHJldHVybiBkYXRhLmdldChkYXRhLmdldERpbWVuc2lvbihkaW0gfHwgMCksIGRhdGFJbmRleEluc2lkZSk7CiAgfQogIC8qKgogICAqIEJ5IGRlZmF1bHQsIGB2aXN1YWxgIGlzIGFwcGxpZWQgdG8gc3R5bGUgKHRvIHN1cHBvcnQgdmlzdWFsTWFwKS4KICAgKiBgdmlzdWFsLmNvbG9yYCBpcyBhcHBsaWVkIGF0IGBmaWxsYC4gSWYgdXNlciB3YW50IGFwcGx5IHZpc3VhbC5jb2xvciBvbiBgc3Ryb2tlYCwKICAgKiBpdCBjYW4gYmUgaW1wbGVtZW50ZWQgYXM6CiAgICogYGFwaS5zdHlsZSh7c3Ryb2tlOiBhcGkudmlzdWFsKCdjb2xvcicpLCBmaWxsOiBudWxsfSlgOwogICAqIEBwdWJsaWMKICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF0YUluZGV4SW5zaWRlPWN1cnJEYXRhSW5kZXhJbnNpZGVdCiAgICovCgoKICBmdW5jdGlvbiBzdHlsZShleHRyYSwgZGF0YUluZGV4SW5zaWRlKSB7CiAgICBkYXRhSW5kZXhJbnNpZGUgPT0gbnVsbCAmJiAoZGF0YUluZGV4SW5zaWRlID0gY3VyckRhdGFJbmRleEluc2lkZSk7CiAgICB1cGRhdGVDYWNoZShkYXRhSW5kZXhJbnNpZGUpOwogICAgdmFyIGl0ZW1TdHlsZSA9IGN1cnJJdGVtTW9kZWwuZ2V0TW9kZWwoSVRFTV9TVFlMRV9OT1JNQUxfUEFUSCkuZ2V0SXRlbVN0eWxlKCk7CiAgICBjdXJyVmlzdWFsQ29sb3IgIT0gbnVsbCAmJiAoaXRlbVN0eWxlLmZpbGwgPSBjdXJyVmlzdWFsQ29sb3IpOwogICAgdmFyIG9wYWNpdHkgPSBkYXRhLmdldEl0ZW1WaXN1YWwoZGF0YUluZGV4SW5zaWRlLCAnb3BhY2l0eScpOwogICAgb3BhY2l0eSAhPSBudWxsICYmIChpdGVtU3R5bGUub3BhY2l0eSA9IG9wYWNpdHkpOwogICAgdmFyIGxhYmVsTW9kZWwgPSBleHRyYSA/IGFwcGx5RXh0cmFCZWZvcmUoZXh0cmEsIGN1cnJMYWJlbE5vcm1hbE1vZGVsKSA6IGN1cnJMYWJlbE5vcm1hbE1vZGVsOwogICAgZ3JhcGhpY1V0aWwuc2V0VGV4dFN0eWxlKGl0ZW1TdHlsZSwgbGFiZWxNb2RlbCwgbnVsbCwgewogICAgICBhdXRvQ29sb3I6IGN1cnJWaXN1YWxDb2xvciwKICAgICAgaXNSZWN0VGV4dDogdHJ1ZQogICAgfSk7CiAgICBpdGVtU3R5bGUudGV4dCA9IGxhYmVsTW9kZWwuZ2V0U2hhbGxvdygnc2hvdycpID8genJVdGlsLnJldHJpZXZlMihjdXN0b21TZXJpZXMuZ2V0Rm9ybWF0dGVkTGFiZWwoZGF0YUluZGV4SW5zaWRlLCAnbm9ybWFsJyksIGdldERlZmF1bHRMYWJlbChkYXRhLCBkYXRhSW5kZXhJbnNpZGUpKSA6IG51bGw7CiAgICBleHRyYSAmJiBhcHBseUV4dHJhQWZ0ZXIoaXRlbVN0eWxlLCBleHRyYSk7CiAgICByZXR1cm4gaXRlbVN0eWxlOwogIH0KICAvKioKICAgKiBAcHVibGljCiAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYV0KICAgKiBAcGFyYW0ge251bWJlcn0gW2RhdGFJbmRleEluc2lkZT1jdXJyRGF0YUluZGV4SW5zaWRlXQogICAqLwoKCiAgZnVuY3Rpb24gc3R5bGVFbXBoYXNpcyhleHRyYSwgZGF0YUluZGV4SW5zaWRlKSB7CiAgICBkYXRhSW5kZXhJbnNpZGUgPT0gbnVsbCAmJiAoZGF0YUluZGV4SW5zaWRlID0gY3VyckRhdGFJbmRleEluc2lkZSk7CiAgICB1cGRhdGVDYWNoZShkYXRhSW5kZXhJbnNpZGUpOwogICAgdmFyIGl0ZW1TdHlsZSA9IGN1cnJJdGVtTW9kZWwuZ2V0TW9kZWwoSVRFTV9TVFlMRV9FTVBIQVNJU19QQVRIKS5nZXRJdGVtU3R5bGUoKTsKICAgIHZhciBsYWJlbE1vZGVsID0gZXh0cmEgPyBhcHBseUV4dHJhQmVmb3JlKGV4dHJhLCBjdXJyTGFiZWxFbXBoYXNpc01vZGVsKSA6IGN1cnJMYWJlbEVtcGhhc2lzTW9kZWw7CiAgICBncmFwaGljVXRpbC5zZXRUZXh0U3R5bGUoaXRlbVN0eWxlLCBsYWJlbE1vZGVsLCBudWxsLCB7CiAgICAgIGlzUmVjdFRleHQ6IHRydWUKICAgIH0sIHRydWUpOwogICAgaXRlbVN0eWxlLnRleHQgPSBsYWJlbE1vZGVsLmdldFNoYWxsb3coJ3Nob3cnKSA/IHpyVXRpbC5yZXRyaWV2ZTMoY3VzdG9tU2VyaWVzLmdldEZvcm1hdHRlZExhYmVsKGRhdGFJbmRleEluc2lkZSwgJ2VtcGhhc2lzJyksIGN1c3RvbVNlcmllcy5nZXRGb3JtYXR0ZWRMYWJlbChkYXRhSW5kZXhJbnNpZGUsICdub3JtYWwnKSwgZ2V0RGVmYXVsdExhYmVsKGRhdGEsIGRhdGFJbmRleEluc2lkZSkpIDogbnVsbDsKICAgIGV4dHJhICYmIGFwcGx5RXh0cmFBZnRlcihpdGVtU3R5bGUsIGV4dHJhKTsKICAgIHJldHVybiBpdGVtU3R5bGU7CiAgfQogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAcGFyYW0ge3N0cmluZ30gdmlzdWFsVHlwZQogICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF0YUluZGV4SW5zaWRlPWN1cnJEYXRhSW5kZXhJbnNpZGVdCiAgICovCgoKICBmdW5jdGlvbiB2aXN1YWwodmlzdWFsVHlwZSwgZGF0YUluZGV4SW5zaWRlKSB7CiAgICBkYXRhSW5kZXhJbnNpZGUgPT0gbnVsbCAmJiAoZGF0YUluZGV4SW5zaWRlID0gY3VyckRhdGFJbmRleEluc2lkZSk7CiAgICByZXR1cm4gZGF0YS5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleEluc2lkZSwgdmlzdWFsVHlwZSk7CiAgfQogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAcGFyYW0ge251bWJlcn0gb3B0LmNvdW50IFBvc2l0aXZlIGludGVyZ2VyLgogICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmJhcldpZHRoXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmJhck1heFdpZHRoXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmJhck1pbldpZHRoXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmJhckdhcF0KICAgKiBAcGFyYW0ge251bWJlcn0gW29wdC5iYXJDYXRlZ29yeUdhcF0KICAgKiBAcmV0dXJuIHtPYmplY3R9IHt3aWR0aCwgb2Zmc2V0LCBvZmZzZXRDZW50ZXJ9IGlzIG5vdCBzdXBwb3J0LCByZXR1cm4gdW5kZWZpbmVkLgogICAqLwoKCiAgZnVuY3Rpb24gYmFyTGF5b3V0KG9wdCkgewogICAgaWYgKGNvb3JkU3lzLmdldEJhc2VBeGlzKSB7CiAgICAgIHZhciBiYXNlQXhpcyA9IGNvb3JkU3lzLmdldEJhc2VBeGlzKCk7CiAgICAgIHJldHVybiBnZXRMYXlvdXRPbkF4aXMoenJVdGlsLmRlZmF1bHRzKHsKICAgICAgICBheGlzOiBiYXNlQXhpcwogICAgICB9LCBvcHQpLCBhcGkpOwogICAgfQogIH0KICAvKioKICAgKiBAcHVibGljCiAgICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59CiAgICovCgoKICBmdW5jdGlvbiBjdXJyZW50U2VyaWVzSW5kaWNlcygpIHsKICAgIHJldHVybiBlY01vZGVsLmdldEN1cnJlbnRTZXJpZXNJbmRpY2VzKCk7CiAgfQogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0CiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHQuZm9udFN0eWxlXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmZvbnRXZWlnaHRdCiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuZm9udFNpemVdCiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHQuZm9udEZhbWlseV0KICAgKiBAcmV0dXJuIHtzdHJpbmd9IGZvbnQgc3RyaW5nCiAgICovCgoKICBmdW5jdGlvbiBmb250KG9wdCkgewogICAgcmV0dXJuIGdyYXBoaWNVdGlsLmdldEZvbnQob3B0LCBlY01vZGVsKTsKICB9Cn0KCmZ1bmN0aW9uIHdyYXBFbmNvZGVEZWYoZGF0YSkgewogIHZhciBlbmNvZGVEZWYgPSB7fTsKICB6clV0aWwuZWFjaChkYXRhLmRpbWVuc2lvbnMsIGZ1bmN0aW9uIChkaW1OYW1lLCBkYXRhRGltSW5kZXgpIHsKICAgIHZhciBkaW1JbmZvID0gZGF0YS5nZXREaW1lbnNpb25JbmZvKGRpbU5hbWUpOwoKICAgIGlmICghZGltSW5mby5pc0V4dHJhQ29vcmQpIHsKICAgICAgdmFyIGNvb3JkRGltID0gZGltSW5mby5jb29yZERpbTsKICAgICAgdmFyIGRhdGFEaW1zID0gZW5jb2RlRGVmW2Nvb3JkRGltXSA9IGVuY29kZURlZltjb29yZERpbV0gfHwgW107CiAgICAgIGRhdGFEaW1zW2RpbUluZm8uY29vcmREaW1JbmRleF0gPSBkYXRhRGltSW5kZXg7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGVuY29kZURlZjsKfQoKZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUoZWwsIGRhdGFJbmRleCwgZWxPcHRpb24sIGFuaW1hdGFibGVNb2RlbCwgZ3JvdXAsIGRhdGEpIHsKICBlbCA9IGRvQ3JlYXRlT3JVcGRhdGUoZWwsIGRhdGFJbmRleCwgZWxPcHRpb24sIGFuaW1hdGFibGVNb2RlbCwgZ3JvdXAsIGRhdGEsIHRydWUpOwogIGVsICYmIGRhdGEuc2V0SXRlbUdyYXBoaWNFbChkYXRhSW5kZXgsIGVsKTsKICByZXR1cm4gZWw7Cn0KCmZ1bmN0aW9uIGRvQ3JlYXRlT3JVcGRhdGUoZWwsIGRhdGFJbmRleCwgZWxPcHRpb24sIGFuaW1hdGFibGVNb2RlbCwgZ3JvdXAsIGRhdGEsIGlzUm9vdCkgewogIC8vIFtSdWxlXQogIC8vIEJ5IGRlZmF1bHQsIGZvbGxvdyBtZXJnZSBtb2RlLgogIC8vICAgICAoSXQgcHJvYmFibHkgYnJpbmdzIGJlbmlmaXQgZm9yIHBlcmZvcm1hbmNlIGluIHNvbWUgY2FzZXMgb2YgbGFyZ2UgZGF0YSwgd2hlcmUKICAvLyAgICAgdXNlciBwcm9ncmFtIGNhbiBiZSBvcHRpbWl6ZWQgdG8gdGhhdCBvbmx5IHVwZGF0ZWQgcHJvcHMgbmVlZGVkIHRvIGJlIHJlLWNhbGN1bGF0ZWQsCiAgLy8gICAgIG9yIGFjY29yZGluZyB0byBgYWN0aW9uVHlwZWAgc29tZSBjYWxjdWxhdGlvbiBjYW4gYmUgc2tpcHBlZC4pCiAgLy8gSWYgYHJlbmRlckl0ZW1gIHJldHVybnMgYG51bGxgL2B1bmRlZmluZWRgL2BmYWxzZWAsIHJlbW92ZSB0aGUgcHJldmlvdXMgZWwgaWYgZXhpc3RpbmcuCiAgLy8gICAgIChJdCBzZWVtcyB0aGF0IHZpb2xhdGUgdGhlICJtZXJnZSIgcHJpbmNpcGxlLCBidXQgbW9zdCBvZiB1c2VycyBwcm9iYWJseSBpbnR1aXRpdmVseQogIC8vICAgICByZWdhcmQgInJldHVybjsiIGFzICJzaG93IG5vdGhpbmcgZWxlbWVudCB3aGF0ZXZlciIsIHNvIG1ha2UgYSBleGNlcHRpb24gdG8gbWVldCB0aGUKICAvLyAgICAgbW9zdCBjYXNlcy4pCiAgdmFyIHNpbXBseVJlbW92ZSA9ICFlbE9wdGlvbjsgLy8gYG51bGxgL2B1bmRlZmluZWRgL2BmYWxzZWAKCiAgZWxPcHRpb24gPSBlbE9wdGlvbiB8fCB7fTsKICB2YXIgZWxPcHRpb25UeXBlID0gZWxPcHRpb24udHlwZTsKICB2YXIgZWxPcHRpb25TaGFwZSA9IGVsT3B0aW9uLnNoYXBlOwogIHZhciBlbE9wdGlvblN0eWxlID0gZWxPcHRpb24uc3R5bGU7CgogIGlmIChlbCAmJiAoc2ltcGx5UmVtb3ZlIC8vIHx8IGVsT3B0aW9uLiRtZXJnZSA9PT0gZmFsc2UKICAvLyBJZiBgZWxPcHRpb25UeXBlYCBpcyBgbnVsbGAsIGZvbGxvdyB0aGUgbWVyZ2UgcHJpbmNpcGxlLgogIHx8IGVsT3B0aW9uVHlwZSAhPSBudWxsICYmIGVsT3B0aW9uVHlwZSAhPT0gZWwuX19jdXN0b21HcmFwaGljVHlwZSB8fCBlbE9wdGlvblR5cGUgPT09ICdwYXRoJyAmJiBoYXNPd25QYXRoRGF0YShlbE9wdGlvblNoYXBlKSAmJiBnZXRQYXRoRGF0YShlbE9wdGlvblNoYXBlKSAhPT0gZWwuX19jdXN0b21QYXRoRGF0YSB8fCBlbE9wdGlvblR5cGUgPT09ICdpbWFnZScgJiYgaGFzT3duKGVsT3B0aW9uU3R5bGUsICdpbWFnZScpICYmIGVsT3B0aW9uU3R5bGUuaW1hZ2UgIT09IGVsLl9fY3VzdG9tSW1hZ2VQYXRoIC8vIEZJWE1FIHRlc3QgYW5kIHJlbW92ZSB0aGlzIHJlc3RyaWN0aW9uPwogIHx8IGVsT3B0aW9uVHlwZSA9PT0gJ3RleHQnICYmIGhhc093bihlbE9wdGlvblNoYXBlLCAndGV4dCcpICYmIGVsT3B0aW9uU3R5bGUudGV4dCAhPT0gZWwuX19jdXN0b21UZXh0KSkgewogICAgZ3JvdXAucmVtb3ZlKGVsKTsKICAgIGVsID0gbnVsbDsKICB9IC8vIGBlbE9wdGlvbi50eXBlYCBpcyB1bmRlZmluZWQgd2hlbiBgcmVuZGVySXRlbWAgcmV0dXJucyBub3RoaW5nLgoKCiAgaWYgKHNpbXBseVJlbW92ZSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGlzSW5pdCA9ICFlbDsKICAhZWwgJiYgKGVsID0gY3JlYXRlRWwoZWxPcHRpb24pKTsKICB1cGRhdGVFbChlbCwgZGF0YUluZGV4LCBlbE9wdGlvbiwgYW5pbWF0YWJsZU1vZGVsLCBkYXRhLCBpc0luaXQsIGlzUm9vdCk7CgogIGlmIChlbE9wdGlvblR5cGUgPT09ICdncm91cCcpIHsKICAgIG1lcmdlQ2hpbGRyZW4oZWwsIGRhdGFJbmRleCwgZWxPcHRpb24sIGFuaW1hdGFibGVNb2RlbCwgZGF0YSk7CiAgfSAvLyBBbHdheXMgYWRkIHdoYXRldmVyIGFscmVhZHkgYWRkZWQgdG8gZW5zdXJlIHNlcXVlbmNlLgoKCiAgZ3JvdXAuYWRkKGVsKTsKICByZXR1cm4gZWw7Cn0gLy8gVXNhZ2U6Ci8vICgxKSBCeSBkZWZhdWx0LCBgZWxPcHRpb24uJG1lcmdlQ2hpbGRyZW5gIGlzIGAnYnlJbmRleCdgLCB3aGljaCBpbmRpY2F0ZXMgdGhhdAovLyAgICAgdGhlIGV4aXN0aW5nIGNoaWxkcmVuIHdpbGwgbm90IGJlIHJlbW92ZWQsIGFuZCBlbmFibGVzIHRoZSBmZWF0dXJlIHRoYXQKLy8gICAgIHVwZGF0ZSBzb21lIG9mIHRoZSBwcm9wcyBvZiBzb21lIG9mIHRoZSBjaGlsZHJlbiBzaW1wbHkgYnkgY29uc3RydWN0Ci8vICAgICB0aGUgcmV0dXJuZWQgY2hpbGRyZW4gb2YgYHJlbmRlckl0ZW1gIGxpa2U6Ci8vICAgICBgdmFyIGNoaWxkcmVuID0gZ3JvdXAuY2hpbGRyZW4gPSBbXTsgY2hpbGRyZW5bM10gPSB7b3BhY2l0eTogMC41fTtgCi8vICgyKSBJZiBgZWxPcHRpb24uJG1lcmdlQ2hpbGRyZW5gIGlzIGAnYnlOYW1lJ2AsIGFkZC91cGRhdGUvcmVtb3ZlIGNoaWxkcmVuCi8vICAgICBieSBjaGlsZC5uYW1lLiBCdXQgdGhhdCBtaWdodCBiZSBsb3dlciBwZXJmb3JtYW5jZS4KLy8gKDMpIElmIGBlbE9wdGlvbi4kbWVyZ2VDaGlsZHJlbmAgaXMgYGZhbHNlYCwgdGhlIGV4aXN0aW5nIGNoaWxkcmVuIHdpbGwgYmUKLy8gICAgIHJlcGxhY2VkIHRvdGFsbHkuCi8vICg0KSBJZiBgIWVsT3B0aW9uLmNoaWxkcmVuYCwgZm9sbG93aW5nIHRoZSAibWVyZ2UiIHByaW5jaXBsZSwgbm90aGluZyB3aWxsIGhhcHBlbi4KLy8KLy8gRm9yIGltcGxlbWVudGF0aW9uIHNpbXBsZW5lc3MsIGRvIG5vdCBwcm92aWRlIGEgZGlyZWN0IHdheSB0byByZW1vdmUgc2lubGdlCi8vIGNoaWxkIChvdGhlcndpc2UgdGhlIHRvdGFsIGluZGljaWVzIG9mIHRoZSBjaGlsZHJlbiBhcnJheSBoYXZlIHRvIGJlIG1vZGlmaWVkKS4KLy8gVXNlciBjYW4gcmVtb3ZlIGEgc2luZ2xlIGNoaWxkIGJ5IHNldCBpdHMgYGlnbm9yZWAgYXMgYHRydWVgIG9yIHJlcGxhY2UKLy8gaXQgYnkgYW5vdGhlciBlbGVtZW50LCB3aGVyZSBpdHMgYCRtZXJnZWAgY2FuIGJlIHNldCBhcyBgdHJ1ZWAgaWYgbmVjZXNzYXJ5LgoKCmZ1bmN0aW9uIG1lcmdlQ2hpbGRyZW4oZWwsIGRhdGFJbmRleCwgZWxPcHRpb24sIGFuaW1hdGFibGVNb2RlbCwgZGF0YSkgewogIHZhciBuZXdDaGlsZHJlbiA9IGVsT3B0aW9uLmNoaWxkcmVuOwogIHZhciBuZXdMZW4gPSBuZXdDaGlsZHJlbiA/IG5ld0NoaWxkcmVuLmxlbmd0aCA6IDA7CiAgdmFyIG1lcmdlQ2hpbGRyZW4gPSBlbE9wdGlvbi4kbWVyZ2VDaGlsZHJlbjsgLy8gYGRpZmZDaGlsZHJlbkJ5TmFtZWAgaGFzIGJlZW4gZGVwcmVjYXRlZC4KCiAgdmFyIGJ5TmFtZSA9IG1lcmdlQ2hpbGRyZW4gPT09ICdieU5hbWUnIHx8IGVsT3B0aW9uLmRpZmZDaGlsZHJlbkJ5TmFtZTsKICB2YXIgbm90TWVyZ2UgPSBtZXJnZUNoaWxkcmVuID09PSBmYWxzZTsgLy8gRm9yIGJldHRlciBwZXJmb3JtYW5jZSBvbiByb2FtIHVwZGF0ZSwgb25seSBlbnRlciBpZiBuZWNlc3NhcnkuCgogIGlmICghbmV3TGVuICYmICFieU5hbWUgJiYgIW5vdE1lcmdlKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoYnlOYW1lKSB7CiAgICBkaWZmR3JvdXBDaGlsZHJlbih7CiAgICAgIG9sZENoaWxkcmVuOiBlbC5jaGlsZHJlbigpIHx8IFtdLAogICAgICBuZXdDaGlsZHJlbjogbmV3Q2hpbGRyZW4gfHwgW10sCiAgICAgIGRhdGFJbmRleDogZGF0YUluZGV4LAogICAgICBhbmltYXRhYmxlTW9kZWw6IGFuaW1hdGFibGVNb2RlbCwKICAgICAgZ3JvdXA6IGVsLAogICAgICBkYXRhOiBkYXRhCiAgICB9KTsKICAgIHJldHVybjsKICB9CgogIG5vdE1lcmdlICYmIGVsLnJlbW92ZUFsbCgpOyAvLyBNYXBwaW5nIGNoaWxkcmVuIG9mIGEgZ3JvdXAgc2ltcGx5IGJ5IGluZGV4LCB3aGljaAogIC8vIG1pZ2h0IGJlIGJldHRlciBwZXJmb3JtYW5jZS4KCiAgdmFyIGluZGV4ID0gMDsKCiAgZm9yICg7IGluZGV4IDwgbmV3TGVuOyBpbmRleCsrKSB7CiAgICBuZXdDaGlsZHJlbltpbmRleF0gJiYgZG9DcmVhdGVPclVwZGF0ZShlbC5jaGlsZEF0KGluZGV4KSwgZGF0YUluZGV4LCBuZXdDaGlsZHJlbltpbmRleF0sIGFuaW1hdGFibGVNb2RlbCwgZWwsIGRhdGEpOwogIH0KfQoKZnVuY3Rpb24gZGlmZkdyb3VwQ2hpbGRyZW4oY29udGV4dCkgewogIG5ldyBEYXRhRGlmZmVyKGNvbnRleHQub2xkQ2hpbGRyZW4sIGNvbnRleHQubmV3Q2hpbGRyZW4sIGdldEtleSwgZ2V0S2V5LCBjb250ZXh0KS5hZGQocHJvY2Vzc0FkZFVwZGF0ZSkudXBkYXRlKHByb2Nlc3NBZGRVcGRhdGUpLnJlbW92ZShwcm9jZXNzUmVtb3ZlKS5leGVjdXRlKCk7Cn0KCmZ1bmN0aW9uIGdldEtleShpdGVtLCBpZHgpIHsKICB2YXIgbmFtZSA9IGl0ZW0gJiYgaXRlbS5uYW1lOwogIHJldHVybiBuYW1lICE9IG51bGwgPyBuYW1lIDogR1JPVVBfRElGRl9QUkVGSVggKyBpZHg7Cn0KCmZ1bmN0aW9uIHByb2Nlc3NBZGRVcGRhdGUobmV3SW5kZXgsIG9sZEluZGV4KSB7CiAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7CiAgdmFyIGNoaWxkT3B0aW9uID0gbmV3SW5kZXggIT0gbnVsbCA/IGNvbnRleHQubmV3Q2hpbGRyZW5bbmV3SW5kZXhdIDogbnVsbDsKICB2YXIgY2hpbGQgPSBvbGRJbmRleCAhPSBudWxsID8gY29udGV4dC5vbGRDaGlsZHJlbltvbGRJbmRleF0gOiBudWxsOwogIGRvQ3JlYXRlT3JVcGRhdGUoY2hpbGQsIGNvbnRleHQuZGF0YUluZGV4LCBjaGlsZE9wdGlvbiwgY29udGV4dC5hbmltYXRhYmxlTW9kZWwsIGNvbnRleHQuZ3JvdXAsIGNvbnRleHQuZGF0YSk7Cn0gLy8gYGdyYXBoaWMjYXBwbHlEZWZhdWx0VGV4dFN0eWxlYCB3aWxsIGNhY2hlCi8vIHRleHRGaWxsLCB0ZXh0U3Ryb2tlLCB0ZXh0U3Ryb2tlV2lkdGguCi8vIFdlIGhhdmUgdG8gZG8gdGhpcyB0cmljay4KCgpmdW5jdGlvbiBhcHBseUV4dHJhQmVmb3JlKGV4dHJhLCBtb2RlbCkgewogIHZhciBkdW1teU1vZGVsID0gbmV3IE1vZGVsKHt9LCBtb2RlbCk7CiAgenJVdGlsLmVhY2goQ0FDSEVEX0xBQkVMX1NUWUxFX1BST1BFUlRJRVMsIGZ1bmN0aW9uIChzdHlsZVByb3BOYW1lLCBtb2RlbFByb3BOYW1lKSB7CiAgICBpZiAoZXh0cmEuaGFzT3duUHJvcGVydHkoc3R5bGVQcm9wTmFtZSkpIHsKICAgICAgZHVtbXlNb2RlbC5vcHRpb25bbW9kZWxQcm9wTmFtZV0gPSBleHRyYVtzdHlsZVByb3BOYW1lXTsKICAgIH0KICB9KTsKICByZXR1cm4gZHVtbXlNb2RlbDsKfQoKZnVuY3Rpb24gYXBwbHlFeHRyYUFmdGVyKGl0ZW1TdHlsZSwgZXh0cmEpIHsKICBmb3IgKHZhciBrZXkgaW4gZXh0cmEpIHsKICAgIGlmIChleHRyYS5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8ICFDQUNIRURfTEFCRUxfU1RZTEVfUFJPUEVSVElFUy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIGl0ZW1TdHlsZVtrZXldID0gZXh0cmFba2V5XTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHByb2Nlc3NSZW1vdmUob2xkSW5kZXgpIHsKICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDsKICB2YXIgY2hpbGQgPSBjb250ZXh0Lm9sZENoaWxkcmVuW29sZEluZGV4XTsKICBjaGlsZCAmJiBjb250ZXh0Lmdyb3VwLnJlbW92ZShjaGlsZCk7Cn0KCmZ1bmN0aW9uIGdldFBhdGhEYXRhKHNoYXBlKSB7CiAgLy8gImQiIGZvbGxvd3MgdGhlIFNWRyBjb252ZW50aW9uLgogIHJldHVybiBzaGFwZSAmJiAoc2hhcGUucGF0aERhdGEgfHwgc2hhcGUuZCk7Cn0KCmZ1bmN0aW9uIGhhc093blBhdGhEYXRhKHNoYXBlKSB7CiAgcmV0dXJuIHNoYXBlICYmIChzaGFwZS5oYXNPd25Qcm9wZXJ0eSgncGF0aERhdGEnKSB8fCBzaGFwZS5oYXNPd25Qcm9wZXJ0eSgnZCcpKTsKfQoKZnVuY3Rpb24gaGFzT3duKGhvc3QsIHByb3ApIHsKICByZXR1cm4gaG9zdCAmJiBob3N0Lmhhc093blByb3BlcnR5KHByb3ApOwp9"},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/custom.js"],"names":["_config","require","__DEV__","zrUtil","graphicUtil","_labelHelper","getDefaultLabel","createListFromArray","_barGrid","getLayoutOnAxis","DataDiffer","SeriesModel","Model","ChartView","_createClipPathFromCoordSys","createClipPath","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","CACHED_LABEL_STYLE_PROPERTIES","ITEM_STYLE_NORMAL_PATH","ITEM_STYLE_EMPHASIS_PATH","LABEL_NORMAL","LABEL_EMPHASIS","GROUP_DIFF_PREFIX","prepareCustoms","cartesian2d","geo","singleAxis","polar","calendar","extend","type","dependencies","defaultOption","coordinateSystem","zlevel","z","legendHoverLink","useTransform","clip","getInitialData","option","ecModel","getSource","getDataParams","dataIndex","dataType","el","params","prototype","apply","arguments","info","_data","render","customSeries","api","payload","oldData","data","getData","group","renderItem","makeRenderItem","diff","add","newIdx","createOrUpdate","update","oldIdx","getItemGraphicEl","remove","execute","clipPath","get","setClipPath","removeClipPath","incrementalPrepareRender","removeAll","incrementalRender","setIncrementalAndHoverLayer","isGroup","incremental","useHoverLayer","idx","start","end","traverse","dispose","noop","filterForExposedEvent","eventType","query","targetEl","packedEvent","elementName","element","name","parent","createEl","elOption","graphicType","shape","pathRect","width","height","x","y","pathData","getPathData","makePath","layout","__customPathData","Image","__customImagePath","style","image","Text","__customText","text","Group","Error","Clz","getShapeClass","__customGraphicType","updateEl","animatableModel","isInit","isRoot","transitionProps","elOptionStyle","clone","position","slice","scale","origin","rotation","targetStyle","each","prop","prepareStyleTransition","hasOwnProperty","fill","textFill","stroke","textStroke","useStyle","opacity","targetOpacity","initProps","attr","updateProps","z2","silent","invisible","ignore","styleEmphasis","setElementHoverStyle","setAsHighDownDispatcher","oldElStyle","coordSys","prepareResult","userAPI","defaults","getWidth","getHeight","getZr","getDevicePixelRatio","value","visual","barLayout","currentSeriesIndices","font","userParams","context","seriesId","id","seriesName","seriesIndex","dataInsideLength","count","encode","wrapEncodeDef","currDataIndexInside","currDirty","currItemModel","currLabelNormalModel","currLabelEmphasisModel","currVisualColor","dataIndexInside","getRawIndex","actionType","updateCache","getItemModel","getModel","getItemVisual","dim","getDimension","extra","itemStyle","getItemStyle","labelModel","applyExtraBefore","setTextStyle","autoColor","isRectText","getShallow","retrieve2","getFormattedLabel","applyExtraAfter","retrieve3","visualType","opt","getBaseAxis","baseAxis","axis","getCurrentSeriesIndices","getFont","encodeDef","dimensions","dimName","dataDimIndex","dimInfo","getDimensionInfo","isExtraCoord","coordDim","dataDims","coordDimIndex","doCreateOrUpdate","setItemGraphicEl","simplyRemove","elOptionType","elOptionShape","hasOwnPathData","hasOwn","mergeChildren","newChildren","children","newLen","length","$mergeChildren","byName","diffChildrenByName","notMerge","diffGroupChildren","oldChildren","index","childAt","getKey","processAddUpdate","processRemove","item","newIndex","oldIndex","childOption","child","model","dummyModel","stylePropName","modelPropName","key","d","host"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _labelHelper = require(\"./helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\nvar createListFromArray = require(\"./helper/createListFromArray\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar getLayoutOnAxis = _barGrid.getLayoutOnAxis;\n\nvar DataDiffer = require(\"../data/DataDiffer\");\n\nvar SeriesModel = require(\"../model/Series\");\n\nvar Model = require(\"../model/Model\");\n\nvar ChartView = require(\"../view/Chart\");\n\nvar _createClipPathFromCoordSys = require(\"./helper/createClipPathFromCoordSys\");\n\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\n\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\n\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\n\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\n\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\n\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CACHED_LABEL_STYLE_PROPERTIES = graphicUtil.CACHED_LABEL_STYLE_PROPERTIES;\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['emphasis', 'itemStyle'];\nvar LABEL_NORMAL = ['label'];\nvar LABEL_EMPHASIS = ['emphasis', 'label']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\nSeriesModel.extend({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    useTransform: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    // Only works on polar and cartesian2d coordinate system.\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n\n  },\n\n  /**\n   * @override\n   */\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n\n  /**\n   * @override\n   */\n  getDataParams: function (dataIndex, dataType, el) {\n    var params = SeriesModel.prototype.getDataParams.apply(this, arguments);\n    el && (params.info = el.info);\n    return params;\n  }\n}); // -----\n// View\n// -----\n\nChartView.extend({\n  type: 'custom',\n\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api, payload) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api); // By default, merge mode is applied. In most cases, custom series is\n    // used in the scenario that data amount is not large but graphic elements\n    // is complicated, where merge mode is probably necessary for optimization.\n    // For example, reuse graphic elements and only update the transform when\n    // roam or data zoom according to `actionType`.\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdate(null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdate(el, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  incrementalPrepareRender: function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  },\n  incrementalRender: function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.useHoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdate(null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      el.traverse(setIncrementalAndHoverLayer);\n    }\n  },\n\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop,\n\n  /**\n   * @override\n   */\n  filterForExposedEvent: function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n\n    while ((targetEl = targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n});\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    el.__customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n    el = new Clz();\n  }\n\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\n\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot) {\n  var transitionProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (transitionProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (transitionProps.position = elOption.position.slice());\n  elOption.scale && (transitionProps.scale = elOption.scale.slice());\n  elOption.origin && (transitionProps.origin = elOption.origin.slice());\n  elOption.rotation && (transitionProps.rotation = elOption.rotation);\n\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = transitionProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n\n  if (isInit) {\n    el.attr(transitionProps);\n  } else {\n    graphicUtil.updateProps(el, transitionProps, animatableModel, dataIndex);\n  } // Merge by default.\n  // z2 must not be null/undefined, otherwise sort error may occur.\n\n\n  elOption.hasOwnProperty('z2') && el.attr('z2', elOption.z2 || 0);\n  elOption.hasOwnProperty('silent') && el.attr('silent', elOption.silent);\n  elOption.hasOwnProperty('invisible') && el.attr('invisible', elOption.invisible);\n  elOption.hasOwnProperty('ignore') && el.attr('ignore', elOption.ignore); // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n  // Update them only when user specified, otherwise, remain.\n\n  elOption.hasOwnProperty('info') && el.attr('info', elOption.info); // If `elOption.styleEmphasis` is `false`, remove hover style. The\n  // logic is ensured by `graphicUtil.setElementHoverStyle`.\n\n  var styleEmphasis = elOption.styleEmphasis; // hoverStyle should always be set here, because if the hover style\n  // may already be changed, where the inner cache should be reset.\n\n  graphicUtil.setElementHoverStyle(el, styleEmphasis);\n\n  if (isRoot) {\n    graphicUtil.setAsHighDownDispatcher(el, styleEmphasis !== false);\n  }\n}\n\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currVisualColor;\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n    var labelModel = extra ? applyExtraBefore(extra, currLabelNormalModel) : currLabelNormalModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      autoColor: currVisualColor,\n      isRectText: true\n    });\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n    var labelModel = extra ? applyExtraBefore(extra, currLabelEmphasisModel) : currLabelEmphasisModel;\n    graphicUtil.setTextStyle(itemStyle, labelModel, null, {\n      isRectText: true\n    }, true);\n    itemStyle.text = labelModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && applyExtraAfter(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barMinWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, true);\n  el && data.setItemGraphicEl(dataIndex, el);\n  return el;\n}\n\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data, isRoot) {\n  // [Rule]\n  // By default, follow merge mode.\n  //     (It probably brings benifit for performance in some cases of large data, where\n  //     user program can be optimized to that only updated props needed to be re-calculated,\n  //     or according to `actionType` some calculation can be skipped.)\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  var simplyRemove = !elOption; // `null`/`undefined`/`false`\n\n  elOption = elOption || {};\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n\n  if (el && (simplyRemove // || elOption.$merge === false\n  // If `elOptionType` is `null`, follow the merge principle.\n  || elOptionType != null && elOptionType !== el.__customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== el.__customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== el.__customImagePath // FIXME test and remove this restriction?\n  || elOptionType === 'text' && hasOwn(elOptionShape, 'text') && elOptionStyle.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n\n  if (simplyRemove) {\n    return;\n  }\n\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit, isRoot);\n\n  if (elOptionType === 'group') {\n    mergeChildren(el, dataIndex, elOption, animatableModel, data);\n  } // Always add whatever already added to ensure sequence.\n\n\n  group.add(el);\n  return el;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true` or replace\n// it by another element, where its `$merge` can be set as `true` if necessary.\n\n\nfunction mergeChildren(el, dataIndex, elOption, animatableModel, data) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      animatableModel: animatableModel,\n      group: el,\n      data: data\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n  }\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n} // `graphic#applyDefaultTextStyle` will cache\n// textFill, textStroke, textStrokeWidth.\n// We have to do this trick.\n\n\nfunction applyExtraBefore(extra, model) {\n  var dummyModel = new Model({}, model);\n  zrUtil.each(CACHED_LABEL_STYLE_PROPERTIES, function (stylePropName, modelPropName) {\n    if (extra.hasOwnProperty(stylePropName)) {\n      dummyModel.option[modelPropName] = extra[stylePropName];\n    }\n  });\n  return dummyModel;\n}\n\nfunction applyExtraAfter(itemStyle, extra) {\n  for (var key in extra) {\n    if (extra.hasOwnProperty(key) || !CACHED_LABEL_STYLE_PROPERTIES.hasOwnProperty(key)) {\n      itemStyle[key] = extra[key];\n    }\n  }\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (shape.hasOwnProperty('pathData') || shape.hasOwnProperty('d'));\n}\n\nfunction hasOwn(host, prop) {\n  return host && host.hasOwnProperty(prop);\n}"]}]}