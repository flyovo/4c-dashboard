{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIik7CgovKgoqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiogdW5kZXIgdGhlIExpY2Vuc2UuCiovCnZhciBfY29uZmlnID0gcmVxdWlyZSgiLi4vLi4vY29uZmlnIik7Cgp2YXIgX19ERVZfXyA9IF9jb25maWcuX19ERVZfXzsKCnZhciB6clV0aWwgPSByZXF1aXJlKCJ6cmVuZGVyL2xpYi9jb3JlL3V0aWwiKTsKCnZhciBWaXN1YWxNYXBNb2RlbCA9IHJlcXVpcmUoIi4vVmlzdWFsTWFwTW9kZWwiKTsKCnZhciBWaXN1YWxNYXBwaW5nID0gcmVxdWlyZSgiLi4vLi4vdmlzdWFsL1Zpc3VhbE1hcHBpbmciKTsKCnZhciB2aXN1YWxEZWZhdWx0ID0gcmVxdWlyZSgiLi4vLi4vdmlzdWFsL3Zpc3VhbERlZmF1bHQiKTsKCnZhciBfbnVtYmVyID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9udW1iZXIiKTsKCnZhciByZWZvcm1JbnRlcnZhbHMgPSBfbnVtYmVyLnJlZm9ybUludGVydmFsczsKLyoKKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24KKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQoqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAoqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwoqIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwoKdmFyIFBpZWNld2lzZU1vZGVsID0gVmlzdWFsTWFwTW9kZWwuZXh0ZW5kKHsKICB0eXBlOiAndmlzdWFsTWFwLnBpZWNld2lzZScsCgogIC8qKgogICAqIE9yZGVyIFJ1bGU6CiAgICoKICAgKiBvcHRpb24uY2F0ZWdvcmllcyAvIG9wdGlvbi5waWVjZXMgLyBvcHRpb24udGV4dCAvIG9wdGlvbi5zZWxlY3RlZDoKICAgKiAgICAgSWYgIW9wdGlvbi5pbnZlcnNlLAogICAqICAgICBPcmRlciB3aGVuIHZlcnRpY2FsOiBbJ3RvcCcsIC4uLiwgJ2JvdHRvbSddLgogICAqICAgICBPcmRlciB3aGVuIGhvcml6b250YWw6IFsnbGVmdCcsIC4uLiwgJ3JpZ2h0J10uCiAgICogICAgIElmIG9wdGlvbi5pbnZlcnNlLCB0aGUgbWVhbmluZyBvZgogICAqICAgICB0aGUgb3JkZXIgc2hvdWxkIGJlIHJldmVyc2VkLgogICAqCiAgICogdGhpcy5fcGllY2VMaXN0OgogICAqICAgICBUaGUgb3JkZXIgaXMgYWx3YXlzIFtsb3csIC4uLiwgaGlnaF0uCiAgICoKICAgKiBNYXBwaW5nIGZyb20gbG9jYXRpb24gdG8gbG93LWhpZ2g6CiAgICogICAgIElmICFvcHRpb24uaW52ZXJzZQogICAqICAgICBXaGVuIHZlcnRpY2FsLCB0b3AgaXMgaGlnaC4KICAgKiAgICAgV2hlbiBob3Jpem9udGFsLCByaWdodCBpcyBoaWdoLgogICAqICAgICBJZiBvcHRpb24uaW52ZXJzZSwgcmV2ZXJzZS4KICAgKi8KCiAgLyoqCiAgICogQHByb3RlY3RlZAogICAqLwogIGRlZmF1bHRPcHRpb246IHsKICAgIHNlbGVjdGVkOiBudWxsLAogICAgLy8gT2JqZWN0LiBJZiBub3Qgc3BlY2lmaWVkLCBtZWFucyBzZWxlY3RlZC4KICAgIC8vIFdoZW4gcGllY2VzIGFuZCBzcGxpdE51bWJlcjogeycwJzogdHJ1ZSwgJzUnOiB0cnVlfQogICAgLy8gV2hlbiBjYXRlZ29yaWVzOiB7J2NhdGUxJzogZmFsc2UsICdjYXRlMyc6IHRydWV9CiAgICAvLyBXaGVuIHNlbGVjdGVkID09PSBmYWxzZSwgbWVhbnMgYWxsIHVuc2VsZWN0ZWQuCiAgICBtaW5PcGVuOiBmYWxzZSwKICAgIC8vIFdoZXRoZXIgaW5jbHVkZSB2YWx1ZXMgdGhhdCBzbWFsbGVyIHRoYW4gYG1pbmAuCiAgICBtYXhPcGVuOiBmYWxzZSwKICAgIC8vIFdoZXRoZXIgaW5jbHVkZSB2YWx1ZXMgdGhhdCBiaWdnZXIgdGhhbiBgbWF4YC4KICAgIGFsaWduOiAnYXV0bycsCiAgICAvLyAnYXV0bycsICdsZWZ0JywgJ3JpZ2h0JwogICAgaXRlbVdpZHRoOiAyMCwKICAgIC8vIFdoZW4gcHV0IHRoZSBjb250cm9sbGVyIHZlcnRpY2FsbHksIGl0IGlzIHRoZSBsZW5ndGggb2YKICAgIC8vIGhvcml6b250YWwgc2lkZSBvZiBlYWNoIGl0ZW0uIE90aGVyd2lzZSwgdmVydGljYWwgc2lkZS4KICAgIGl0ZW1IZWlnaHQ6IDE0LAogICAgLy8gV2hlbiBwdXQgdGhlIGNvbnRyb2xsZXIgdmVydGljYWxseSwgaXQgaXMgdGhlIGxlbmd0aCBvZgogICAgLy8gdmVydGljYWwgc2lkZSBvZiBlYWNoIGl0ZW0uIE90aGVyd2lzZSwgaG9yaXpvbnRhbCBzaWRlLgogICAgaXRlbVN5bWJvbDogJ3JvdW5kUmVjdCcsCiAgICBwaWVjZUxpc3Q6IG51bGwsCiAgICAvLyBFYWNoIGl0ZW0gaXMgT2JqZWN0LCB3aXRoIHNvbWUgb2YgdGhvc2UgYXR0cnM6CiAgICAvLyB7bWluLCBtYXgsIGx0LCBndCwgbHRlLCBndGUsIHZhbHVlLAogICAgLy8gY29sb3IsIGNvbG9yU2F0dXJhdGlvbiwgY29sb3JBbHBoYSwgb3BhY2l0eSwKICAgIC8vIHN5bWJvbCwgc3ltYm9sU2l6ZX0sIHdoaWNoIGN1c3RvbWl6ZSB0aGUgcmFuZ2Ugb3IgdmlzdWFsCiAgICAvLyBjb2Rpbmcgb2YgdGhlIGNlcnRhaW4gcGllY2UuIEJlc2lkZXMsIHNlZSAiT3JkZXIgUnVsZSIuCiAgICBjYXRlZ29yaWVzOiBudWxsLAogICAgLy8gY2F0ZWdvcnkgbmFtZXMsIGxpa2U6IFsnc29tZTEnLCAnc29tZTInLCAnc29tZTMnXS4KICAgIC8vIEF0dHIgbWluL21heCBhcmUgaWdub3JlZCB3aGVuIGNhdGVnb3JpZXMgc2V0LiBTZWUgIk9yZGVyIFJ1bGUiCiAgICBzcGxpdE51bWJlcjogNSwKICAgIC8vIElmIHNldCB0byA1LCBhdXRvIHNwbGl0IGZpdmUgcGllY2VzIGVxdWFsbHkuCiAgICAvLyBJZiBzZXQgdG8gMCBhbmQgY29tcG9uZW50IHR5cGUgbm90IHNldCwgY29tcG9uZW50IHR5cGUgd2lsbCBiZQogICAgLy8gZGV0ZXJtaW5lZCBhcyAiY29udGludW91cyIuIChJdCBpcyBsZXNzIHJlYXNvbmFibGUgYnV0IGZvciBlYzIKICAgIC8vIGNvbXBhdGliaWxpdHksIHNlZSBlY2hhcnRzL2NvbXBvbmVudC92aXN1YWxNYXAvdHlwZURlZmF1bHRlcikKICAgIHNlbGVjdGVkTW9kZTogJ211bHRpcGxlJywKICAgIC8vIENhbiBiZSAnbXVsdGlwbGUnIG9yICdzaW5nbGUnLgogICAgaXRlbUdhcDogMTAsCiAgICAvLyBUaGUgZ2FwIGJldHdlZW4gdHdvIGl0ZW1zLCBpbiBweC4KICAgIGhvdmVyTGluazogdHJ1ZSwKICAgIC8vIEVuYWJsZSBob3ZlciBoaWdobGlnaHQuCiAgICBzaG93TGFiZWw6IG51bGwgLy8gQnkgZGVmYXVsdCwgd2hlbiB0ZXh0IGlzIHVzZWQsIGxhYmVsIHdpbGwgaGlkZSAodGhlIGxvZ2ljCiAgICAvLyBpcyByZW1haW5lZCBmb3IgY29tcGF0aWJpbGl0eSByZWFzb24pCgogIH0sCgogIC8qKgogICAqIEBvdmVycmlkZQogICAqLwogIG9wdGlvblVwZGF0ZWQ6IGZ1bmN0aW9uIG9wdGlvblVwZGF0ZWQobmV3T3B0aW9uLCBpc0luaXQpIHsKICAgIFBpZWNld2lzZU1vZGVsLnN1cGVyQXBwbHkodGhpcywgJ29wdGlvblVwZGF0ZWQnLCBhcmd1bWVudHMpOwogICAgLyoqCiAgICAgKiBUaGUgb3JkZXIgaXMgYWx3YXlzIFtsb3csIC4uLiwgaGlnaF0uCiAgICAgKiBbe3RleHQ6IHN0cmluZywgaW50ZXJ2YWw6IEFycmF5LjxudW1iZXI+fSwgLi4uXQogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlIHtBcnJheS48T2JqZWN0Pn0KICAgICAqLwoKICAgIHRoaXMuX3BpZWNlTGlzdCA9IFtdOwogICAgdGhpcy5yZXNldEV4dGVudCgpOwogICAgLyoqCiAgICAgKiAncGllY2VzJywgJ2NhdGVnb3JpZXMnLCAnc3BsaXROdW1iZXInCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCgogICAgdmFyIG1vZGUgPSB0aGlzLl9tb2RlID0gdGhpcy5fZGV0ZXJtaW5lTW9kZSgpOwoKICAgIHJlc2V0TWV0aG9kc1t0aGlzLl9tb2RlXS5jYWxsKHRoaXMpOwoKICAgIHRoaXMuX3Jlc2V0U2VsZWN0ZWQobmV3T3B0aW9uLCBpc0luaXQpOwoKICAgIHZhciBjYXRlZ29yaWVzID0gdGhpcy5vcHRpb24uY2F0ZWdvcmllczsKICAgIHRoaXMucmVzZXRWaXN1YWwoZnVuY3Rpb24gKG1hcHBpbmdPcHRpb24sIHN0YXRlKSB7CiAgICAgIGlmIChtb2RlID09PSAnY2F0ZWdvcmllcycpIHsKICAgICAgICBtYXBwaW5nT3B0aW9uLm1hcHBpbmdNZXRob2QgPSAnY2F0ZWdvcnknOwogICAgICAgIG1hcHBpbmdPcHRpb24uY2F0ZWdvcmllcyA9IHpyVXRpbC5jbG9uZShjYXRlZ29yaWVzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXBwaW5nT3B0aW9uLmRhdGFFeHRlbnQgPSB0aGlzLmdldEV4dGVudCgpOwogICAgICAgIG1hcHBpbmdPcHRpb24ubWFwcGluZ01ldGhvZCA9ICdwaWVjZXdpc2UnOwogICAgICAgIG1hcHBpbmdPcHRpb24ucGllY2VMaXN0ID0genJVdGlsLm1hcCh0aGlzLl9waWVjZUxpc3QsIGZ1bmN0aW9uIChwaWVjZSkgewogICAgICAgICAgdmFyIHBpZWNlID0genJVdGlsLmNsb25lKHBpZWNlKTsKCiAgICAgICAgICBpZiAoc3RhdGUgIT09ICdpblJhbmdlJykgewogICAgICAgICAgICAvLyBGSVhNRQogICAgICAgICAgICAvLyBvdXRPZlJhbmdlIGRvIG5vdCBzdXBwb3J0IHNwZWNpYWwgdmlzdWFsIGluIHBpZWNlcy4KICAgICAgICAgICAgcGllY2UudmlzdWFsID0gbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcGllY2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIC8qKgogICAqIEBwcm90ZWN0ZWQKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBjb21wbGV0ZVZpc3VhbE9wdGlvbjogZnVuY3Rpb24gY29tcGxldGVWaXN1YWxPcHRpb24oKSB7CiAgICAvLyBDb25zaWRlciB0aGlzIGNhc2U6CiAgICAvLyB2aXN1YWxNYXA6IHsKICAgIC8vICAgICAgcGllY2VzOiBbe3N5bWJvbDogJ2NpcmNsZScsIGx0OiAwfSwge3N5bWJvbDogJ3JlY3QnLCBndGU6IDB9XQogICAgLy8gfQogICAgLy8gd2hlcmUgbm8gaW5SYW5nZS9vdXRPZlJhbmdlIHNldCBidXQgb25seSBwaWVjZXMuIFNvIHdlIHNob3VsZCBtYWtlCiAgICAvLyBkZWZhdWx0IGluUmFuZ2Uvb3V0T2ZSYW5nZSBmb3IgdGhpcyBjYXNlLCBvdGhlcndpc2UgdmlzdWFscyB0aGF0IG9ubHkKICAgIC8vIGFwcGVhciBpbiBgcGllY2VzYCB3aWxsIG5vdCBiZSB0YWtlbiBpbnRvIGFjY291bnQgaW4gdmlzdWFsIGVuY29kaW5nLgogICAgdmFyIG9wdGlvbiA9IHRoaXMub3B0aW9uOwogICAgdmFyIHZpc3VhbFR5cGVzSW5QaWVjZXMgPSB7fTsKICAgIHZhciB2aXN1YWxUeXBlcyA9IFZpc3VhbE1hcHBpbmcubGlzdFZpc3VhbFR5cGVzKCk7CiAgICB2YXIgaXNDYXRlZ29yeSA9IHRoaXMuaXNDYXRlZ29yeSgpOwogICAgenJVdGlsLmVhY2gob3B0aW9uLnBpZWNlcywgZnVuY3Rpb24gKHBpZWNlKSB7CiAgICAgIHpyVXRpbC5lYWNoKHZpc3VhbFR5cGVzLCBmdW5jdGlvbiAodmlzdWFsVHlwZSkgewogICAgICAgIGlmIChwaWVjZS5oYXNPd25Qcm9wZXJ0eSh2aXN1YWxUeXBlKSkgewogICAgICAgICAgdmlzdWFsVHlwZXNJblBpZWNlc1t2aXN1YWxUeXBlXSA9IDE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgenJVdGlsLmVhY2godmlzdWFsVHlwZXNJblBpZWNlcywgZnVuY3Rpb24gKHYsIHZpc3VhbFR5cGUpIHsKICAgICAgdmFyIGV4aXN0cyA9IDA7CiAgICAgIHpyVXRpbC5lYWNoKHRoaXMuc3RhdGVMaXN0LCBmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICBleGlzdHMgfD0gaGFzKG9wdGlvbiwgc3RhdGUsIHZpc3VhbFR5cGUpIHx8IGhhcyhvcHRpb24udGFyZ2V0LCBzdGF0ZSwgdmlzdWFsVHlwZSk7CiAgICAgIH0sIHRoaXMpOwogICAgICAhZXhpc3RzICYmIHpyVXRpbC5lYWNoKHRoaXMuc3RhdGVMaXN0LCBmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICAob3B0aW9uW3N0YXRlXSB8fCAob3B0aW9uW3N0YXRlXSA9IHt9KSlbdmlzdWFsVHlwZV0gPSB2aXN1YWxEZWZhdWx0LmdldCh2aXN1YWxUeXBlLCBzdGF0ZSA9PT0gJ2luUmFuZ2UnID8gJ2FjdGl2ZScgOiAnaW5hY3RpdmUnLCBpc0NhdGVnb3J5KTsKICAgICAgfSk7CiAgICB9LCB0aGlzKTsKCiAgICBmdW5jdGlvbiBoYXMob2JqLCBzdGF0ZSwgdmlzdWFsVHlwZSkgewogICAgICByZXR1cm4gb2JqICYmIG9ialtzdGF0ZV0gJiYgKHpyVXRpbC5pc09iamVjdChvYmpbc3RhdGVdKSA/IG9ialtzdGF0ZV0uaGFzT3duUHJvcGVydHkodmlzdWFsVHlwZSkgOiBvYmpbc3RhdGVdID09PSB2aXN1YWxUeXBlIC8vIGUuZy4sIGluUmFuZ2U6ICdzeW1ib2wnCiAgICAgICk7CiAgICB9CgogICAgVmlzdWFsTWFwTW9kZWwucHJvdG90eXBlLmNvbXBsZXRlVmlzdWFsT3B0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSwKICBfcmVzZXRTZWxlY3RlZDogZnVuY3Rpb24gX3Jlc2V0U2VsZWN0ZWQobmV3T3B0aW9uLCBpc0luaXQpIHsKICAgIHZhciB0aGlzT3B0aW9uID0gdGhpcy5vcHRpb247CiAgICB2YXIgcGllY2VMaXN0ID0gdGhpcy5fcGllY2VMaXN0OyAvLyBTZWxlY3RlZCBkbyBub3QgbWVyZ2UgYnV0IGFsbCBvdmVycmlkZS4KCiAgICB2YXIgc2VsZWN0ZWQgPSAoaXNJbml0ID8gdGhpc09wdGlvbiA6IG5ld09wdGlvbikuc2VsZWN0ZWQgfHwge307CiAgICB0aGlzT3B0aW9uLnNlbGVjdGVkID0gc2VsZWN0ZWQ7IC8vIENvbnNpZGVyICdub3Qgc3BlY2lmaWVkJyBtZWFucyB0cnVlLgoKICAgIHpyVXRpbC5lYWNoKHBpZWNlTGlzdCwgZnVuY3Rpb24gKHBpZWNlLCBpbmRleCkgewogICAgICB2YXIga2V5ID0gdGhpcy5nZXRTZWxlY3RlZE1hcEtleShwaWVjZSk7CgogICAgICBpZiAoIXNlbGVjdGVkLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICBzZWxlY3RlZFtrZXldID0gdHJ1ZTsKICAgICAgfQogICAgfSwgdGhpcyk7CgogICAgaWYgKHRoaXNPcHRpb24uc2VsZWN0ZWRNb2RlID09PSAnc2luZ2xlJykgewogICAgICAvLyBFbnN1cmUgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0ZWQuCiAgICAgIHZhciBoYXNTZWwgPSBmYWxzZTsKICAgICAgenJVdGlsLmVhY2gocGllY2VMaXN0LCBmdW5jdGlvbiAocGllY2UsIGluZGV4KSB7CiAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0U2VsZWN0ZWRNYXBLZXkocGllY2UpOwoKICAgICAgICBpZiAoc2VsZWN0ZWRba2V5XSkgewogICAgICAgICAgaGFzU2VsID8gc2VsZWN0ZWRba2V5XSA9IGZhbHNlIDogaGFzU2VsID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0sIHRoaXMpOwogICAgfSAvLyB0aGlzT3B0aW9uLnNlbGVjdGVkTW9kZSA9PT0gJ211bHRpcGxlJywgZGVmYXVsdDogYWxsIHNlbGVjdGVkLgoKICB9LAoKICAvKioKICAgKiBAcHVibGljCiAgICovCiAgZ2V0U2VsZWN0ZWRNYXBLZXk6IGZ1bmN0aW9uIGdldFNlbGVjdGVkTWFwS2V5KHBpZWNlKSB7CiAgICByZXR1cm4gdGhpcy5fbW9kZSA9PT0gJ2NhdGVnb3JpZXMnID8gcGllY2UudmFsdWUgKyAnJyA6IHBpZWNlLmluZGV4ICsgJyc7CiAgfSwKCiAgLyoqCiAgICogQHB1YmxpYwogICAqLwogIGdldFBpZWNlTGlzdDogZnVuY3Rpb24gZ2V0UGllY2VMaXN0KCkgewogICAgcmV0dXJuIHRoaXMuX3BpZWNlTGlzdDsKICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqIEByZXR1cm4ge3N0cmluZ30KICAgKi8KICBfZGV0ZXJtaW5lTW9kZTogZnVuY3Rpb24gX2RldGVybWluZU1vZGUoKSB7CiAgICB2YXIgb3B0aW9uID0gdGhpcy5vcHRpb247CiAgICByZXR1cm4gb3B0aW9uLnBpZWNlcyAmJiBvcHRpb24ucGllY2VzLmxlbmd0aCA+IDAgPyAncGllY2VzJyA6IHRoaXMub3B0aW9uLmNhdGVnb3JpZXMgPyAnY2F0ZWdvcmllcycgOiAnc3BsaXROdW1iZXInOwogIH0sCgogIC8qKgogICAqIEBwdWJsaWMKICAgKiBAb3ZlcnJpZGUKICAgKi8KICBzZXRTZWxlY3RlZDogZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc2VsZWN0ZWQpIHsKICAgIHRoaXMub3B0aW9uLnNlbGVjdGVkID0genJVdGlsLmNsb25lKHNlbGVjdGVkKTsKICB9LAoKICAvKioKICAgKiBAcHVibGljCiAgICogQG92ZXJyaWRlCiAgICovCiAgZ2V0VmFsdWVTdGF0ZTogZnVuY3Rpb24gZ2V0VmFsdWVTdGF0ZSh2YWx1ZSkgewogICAgdmFyIGluZGV4ID0gVmlzdWFsTWFwcGluZy5maW5kUGllY2VJbmRleCh2YWx1ZSwgdGhpcy5fcGllY2VMaXN0KTsKICAgIHJldHVybiBpbmRleCAhPSBudWxsID8gdGhpcy5vcHRpb24uc2VsZWN0ZWRbdGhpcy5nZXRTZWxlY3RlZE1hcEtleSh0aGlzLl9waWVjZUxpc3RbaW5kZXhdKV0gPyAnaW5SYW5nZScgOiAnb3V0T2ZSYW5nZScgOiAnb3V0T2ZSYW5nZSc7CiAgfSwKCiAgLyoqCiAgICogQHB1YmxpYwogICAqIEBwYXJhbXMge251bWJlcn0gcGllY2VJbmRleCBwaWVjZSBpbmRleCBpbiB2aXN1YWxNYXBNb2RlbC5nZXRQaWVjZUxpc3QoKQogICAqIEByZXR1cm4ge0FycmF5LjxPYmplY3Q+fSBbe3Nlcmllc0lkLCBkYXRhSW5kZXg6IDxBcnJheS48bnVtYmVyPj59LCAuLi5dCiAgICovCiAgZmluZFRhcmdldERhdGFJbmRpY2VzOiBmdW5jdGlvbiBmaW5kVGFyZ2V0RGF0YUluZGljZXMocGllY2VJbmRleCkgewogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgdGhpcy5lYWNoVGFyZ2V0U2VyaWVzKGZ1bmN0aW9uIChzZXJpZXNNb2RlbCkgewogICAgICB2YXIgZGF0YUluZGljZXMgPSBbXTsKICAgICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7CiAgICAgIGRhdGEuZWFjaCh0aGlzLmdldERhdGFEaW1lbnNpb24oZGF0YSksIGZ1bmN0aW9uICh2YWx1ZSwgZGF0YUluZGV4KSB7CiAgICAgICAgLy8gU2hvdWxkIGFsd2F5cyBiYXNlIG9uIG1vZGVsIHBpZWNlTGlzdCwgYmVjYXVzZSBpdCBpcyBvcmRlciBzZW5zaXRpdmUuCiAgICAgICAgdmFyIHBJZHggPSBWaXN1YWxNYXBwaW5nLmZpbmRQaWVjZUluZGV4KHZhbHVlLCB0aGlzLl9waWVjZUxpc3QpOwogICAgICAgIHBJZHggPT09IHBpZWNlSW5kZXggJiYgZGF0YUluZGljZXMucHVzaChkYXRhSW5kZXgpOwogICAgICB9LCB0aGlzKTsKICAgICAgcmVzdWx0LnB1c2goewogICAgICAgIHNlcmllc0lkOiBzZXJpZXNNb2RlbC5pZCwKICAgICAgICBkYXRhSW5kZXg6IGRhdGFJbmRpY2VzCiAgICAgIH0pOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICogQHBhcmFtIHtPYmplY3R9IHBpZWNlIHBpZWNlLnZhbHVlIG9yIHBpZWNlLmludGVydmFsIGlzIHJlcXVpcmVkLgogICAqIEByZXR1cm4ge251bWJlcn0gQ2FuIGJlIEluZmluaXR5IG9yIC1JbmZpbml0eQogICAqLwogIGdldFJlcHJlc2VudFZhbHVlOiBmdW5jdGlvbiBnZXRSZXByZXNlbnRWYWx1ZShwaWVjZSkgewogICAgdmFyIHJlcHJlc2VudFZhbHVlOwoKICAgIGlmICh0aGlzLmlzQ2F0ZWdvcnkoKSkgewogICAgICByZXByZXNlbnRWYWx1ZSA9IHBpZWNlLnZhbHVlOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHBpZWNlLnZhbHVlICE9IG51bGwpIHsKICAgICAgICByZXByZXNlbnRWYWx1ZSA9IHBpZWNlLnZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwaWVjZUludGVydmFsID0gcGllY2UuaW50ZXJ2YWwgfHwgW107CiAgICAgICAgcmVwcmVzZW50VmFsdWUgPSBwaWVjZUludGVydmFsWzBdID09PSAtSW5maW5pdHkgJiYgcGllY2VJbnRlcnZhbFsxXSA9PT0gSW5maW5pdHkgPyAwIDogKHBpZWNlSW50ZXJ2YWxbMF0gKyBwaWVjZUludGVydmFsWzFdKSAvIDI7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVwcmVzZW50VmFsdWU7CiAgfSwKICBnZXRWaXN1YWxNZXRhOiBmdW5jdGlvbiBnZXRWaXN1YWxNZXRhKGdldENvbG9yVmlzdWFsKSB7CiAgICAvLyBEbyBub3Qgc3VwcG9ydCBjYXRlZ29yeS4gKGNhdGVnb3J5IGF4aXMgaXMgb3JkaW5hbCwgbnVtZXJpY2FsKQogICAgaWYgKHRoaXMuaXNDYXRlZ29yeSgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3RvcHMgPSBbXTsKICAgIHZhciBvdXRlckNvbG9ycyA9IFtdOwogICAgdmFyIHZpc3VhbE1hcE1vZGVsID0gdGhpczsKCiAgICBmdW5jdGlvbiBzZXRTdG9wKGludGVydmFsLCB2YWx1ZVN0YXRlKSB7CiAgICAgIHZhciByZXByZXNlbnRWYWx1ZSA9IHZpc3VhbE1hcE1vZGVsLmdldFJlcHJlc2VudFZhbHVlKHsKICAgICAgICBpbnRlcnZhbDogaW50ZXJ2YWwKICAgICAgfSk7CgogICAgICBpZiAoIXZhbHVlU3RhdGUpIHsKICAgICAgICB2YWx1ZVN0YXRlID0gdmlzdWFsTWFwTW9kZWwuZ2V0VmFsdWVTdGF0ZShyZXByZXNlbnRWYWx1ZSk7CiAgICAgIH0KCiAgICAgIHZhciBjb2xvciA9IGdldENvbG9yVmlzdWFsKHJlcHJlc2VudFZhbHVlLCB2YWx1ZVN0YXRlKTsKCiAgICAgIGlmIChpbnRlcnZhbFswXSA9PT0gLUluZmluaXR5KSB7CiAgICAgICAgb3V0ZXJDb2xvcnNbMF0gPSBjb2xvcjsKICAgICAgfSBlbHNlIGlmIChpbnRlcnZhbFsxXSA9PT0gSW5maW5pdHkpIHsKICAgICAgICBvdXRlckNvbG9yc1sxXSA9IGNvbG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3BzLnB1c2goewogICAgICAgICAgdmFsdWU6IGludGVydmFsWzBdLAogICAgICAgICAgY29sb3I6IGNvbG9yCiAgICAgICAgfSwgewogICAgICAgICAgdmFsdWU6IGludGVydmFsWzFdLAogICAgICAgICAgY29sb3I6IGNvbG9yCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gLy8gU3VwbGVtZW50CgoKICAgIHZhciBwaWVjZUxpc3QgPSB0aGlzLl9waWVjZUxpc3Quc2xpY2UoKTsKCiAgICBpZiAoIXBpZWNlTGlzdC5sZW5ndGgpIHsKICAgICAgcGllY2VMaXN0LnB1c2goewogICAgICAgIGludGVydmFsOiBbLUluZmluaXR5LCBJbmZpbml0eV0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgZWRnZSA9IHBpZWNlTGlzdFswXS5pbnRlcnZhbFswXTsKICAgICAgZWRnZSAhPT0gLUluZmluaXR5ICYmIHBpZWNlTGlzdC51bnNoaWZ0KHsKICAgICAgICBpbnRlcnZhbDogWy1JbmZpbml0eSwgZWRnZV0KICAgICAgfSk7CiAgICAgIGVkZ2UgPSBwaWVjZUxpc3RbcGllY2VMaXN0Lmxlbmd0aCAtIDFdLmludGVydmFsWzFdOwogICAgICBlZGdlICE9PSBJbmZpbml0eSAmJiBwaWVjZUxpc3QucHVzaCh7CiAgICAgICAgaW50ZXJ2YWw6IFtlZGdlLCBJbmZpbml0eV0KICAgICAgfSk7CiAgICB9CgogICAgdmFyIGN1cnIgPSAtSW5maW5pdHk7CiAgICB6clV0aWwuZWFjaChwaWVjZUxpc3QsIGZ1bmN0aW9uIChwaWVjZSkgewogICAgICB2YXIgaW50ZXJ2YWwgPSBwaWVjZS5pbnRlcnZhbDsKCiAgICAgIGlmIChpbnRlcnZhbCkgewogICAgICAgIC8vIEZ1bGZpbGwgZ2FwLgogICAgICAgIGludGVydmFsWzBdID4gY3VyciAmJiBzZXRTdG9wKFtjdXJyLCBpbnRlcnZhbFswXV0sICdvdXRPZlJhbmdlJyk7CiAgICAgICAgc2V0U3RvcChpbnRlcnZhbC5zbGljZSgpKTsKICAgICAgICBjdXJyID0gaW50ZXJ2YWxbMV07CiAgICAgIH0KICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHsKICAgICAgc3RvcHM6IHN0b3BzLAogICAgICBvdXRlckNvbG9yczogb3V0ZXJDb2xvcnMKICAgIH07CiAgfQp9KTsKLyoqCiAqIEtleSBpcyB0aGlzLl9tb2RlCiAqIEB0eXBlIHtPYmplY3R9CiAqIEB0aGlzIHttb2R1bGU6ZWNoYXJ0cy9jb21wb25lbnQvdml1c2FsTWFwL1BpZWNld2lzZU1vZGV9CiAqLwoKdmFyIHJlc2V0TWV0aG9kcyA9IHsKICBzcGxpdE51bWJlcjogZnVuY3Rpb24gc3BsaXROdW1iZXIoKSB7CiAgICB2YXIgdGhpc09wdGlvbiA9IHRoaXMub3B0aW9uOwogICAgdmFyIHBpZWNlTGlzdCA9IHRoaXMuX3BpZWNlTGlzdDsKICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLm1pbih0aGlzT3B0aW9uLnByZWNpc2lvbiwgMjApOwogICAgdmFyIGRhdGFFeHRlbnQgPSB0aGlzLmdldEV4dGVudCgpOwogICAgdmFyIHNwbGl0TnVtYmVyID0gdGhpc09wdGlvbi5zcGxpdE51bWJlcjsKICAgIHNwbGl0TnVtYmVyID0gTWF0aC5tYXgocGFyc2VJbnQoc3BsaXROdW1iZXIsIDEwKSwgMSk7CiAgICB0aGlzT3B0aW9uLnNwbGl0TnVtYmVyID0gc3BsaXROdW1iZXI7CiAgICB2YXIgc3BsaXRTdGVwID0gKGRhdGFFeHRlbnRbMV0gLSBkYXRhRXh0ZW50WzBdKSAvIHNwbGl0TnVtYmVyOyAvLyBQcmVjaXNpb24gYXV0by1hZGFwdGlvbgoKICAgIHdoaWxlICgrc3BsaXRTdGVwLnRvRml4ZWQocHJlY2lzaW9uKSAhPT0gc3BsaXRTdGVwICYmIHByZWNpc2lvbiA8IDUpIHsKICAgICAgcHJlY2lzaW9uKys7CiAgICB9CgogICAgdGhpc09wdGlvbi5wcmVjaXNpb24gPSBwcmVjaXNpb247CiAgICBzcGxpdFN0ZXAgPSArc3BsaXRTdGVwLnRvRml4ZWQocHJlY2lzaW9uKTsKCiAgICBpZiAodGhpc09wdGlvbi5taW5PcGVuKSB7CiAgICAgIHBpZWNlTGlzdC5wdXNoKHsKICAgICAgICBpbnRlcnZhbDogWy1JbmZpbml0eSwgZGF0YUV4dGVudFswXV0sCiAgICAgICAgY2xvc2U6IFswLCAwXQogICAgICB9KTsKICAgIH0KCiAgICBmb3IgKHZhciBpbmRleCA9IDAsIGN1cnIgPSBkYXRhRXh0ZW50WzBdOyBpbmRleCA8IHNwbGl0TnVtYmVyOyBjdXJyICs9IHNwbGl0U3RlcCwgaW5kZXgrKykgewogICAgICB2YXIgbWF4ID0gaW5kZXggPT09IHNwbGl0TnVtYmVyIC0gMSA/IGRhdGFFeHRlbnRbMV0gOiBjdXJyICsgc3BsaXRTdGVwOwogICAgICBwaWVjZUxpc3QucHVzaCh7CiAgICAgICAgaW50ZXJ2YWw6IFtjdXJyLCBtYXhdLAogICAgICAgIGNsb3NlOiBbMSwgMV0KICAgICAgfSk7CiAgICB9CgogICAgaWYgKHRoaXNPcHRpb24ubWF4T3BlbikgewogICAgICBwaWVjZUxpc3QucHVzaCh7CiAgICAgICAgaW50ZXJ2YWw6IFtkYXRhRXh0ZW50WzFdLCBJbmZpbml0eV0sCiAgICAgICAgY2xvc2U6IFswLCAwXQogICAgICB9KTsKICAgIH0KCiAgICByZWZvcm1JbnRlcnZhbHMocGllY2VMaXN0KTsKICAgIHpyVXRpbC5lYWNoKHBpZWNlTGlzdCwgZnVuY3Rpb24gKHBpZWNlLCBpbmRleCkgewogICAgICBwaWVjZS5pbmRleCA9IGluZGV4OwogICAgICBwaWVjZS50ZXh0ID0gdGhpcy5mb3JtYXRWYWx1ZVRleHQocGllY2UuaW50ZXJ2YWwpOwogICAgfSwgdGhpcyk7CiAgfSwKICBjYXRlZ29yaWVzOiBmdW5jdGlvbiBjYXRlZ29yaWVzKCkgewogICAgdmFyIHRoaXNPcHRpb24gPSB0aGlzLm9wdGlvbjsKICAgIHpyVXRpbC5lYWNoKHRoaXNPcHRpb24uY2F0ZWdvcmllcywgZnVuY3Rpb24gKGNhdGUpIHsKICAgICAgLy8gRklYTUUgY2F0ZWdvcnnmqKHlvI/kuZ/kvb/nlKhwaWVjZUxpc3TvvIzkvYblnKh2aXN1YWxNYXBwaW5n5Lit5LiN5piv5L2/55SocGllY2VMaXN044CCCiAgICAgIC8vIOaYr+WQpuaUueS4gOiHtOOAggogICAgICB0aGlzLl9waWVjZUxpc3QucHVzaCh7CiAgICAgICAgdGV4dDogdGhpcy5mb3JtYXRWYWx1ZVRleHQoY2F0ZSwgdHJ1ZSksCiAgICAgICAgdmFsdWU6IGNhdGUKICAgICAgfSk7CiAgICB9LCB0aGlzKTsgLy8gU2VlICJPcmRlciBSdWxlIi4KCiAgICBub3JtYWxpemVSZXZlcnNlKHRoaXNPcHRpb24sIHRoaXMuX3BpZWNlTGlzdCk7CiAgfSwKICBwaWVjZXM6IGZ1bmN0aW9uIHBpZWNlcygpIHsKICAgIHZhciB0aGlzT3B0aW9uID0gdGhpcy5vcHRpb247CiAgICB2YXIgcGllY2VMaXN0ID0gdGhpcy5fcGllY2VMaXN0OwogICAgenJVdGlsLmVhY2godGhpc09wdGlvbi5waWVjZXMsIGZ1bmN0aW9uIChwaWVjZUxpc3RJdGVtLCBpbmRleCkgewogICAgICBpZiAoIXpyVXRpbC5pc09iamVjdChwaWVjZUxpc3RJdGVtKSkgewogICAgICAgIHBpZWNlTGlzdEl0ZW0gPSB7CiAgICAgICAgICB2YWx1ZTogcGllY2VMaXN0SXRlbQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gewogICAgICAgIHRleHQ6ICcnLAogICAgICAgIGluZGV4OiBpbmRleAogICAgICB9OwoKICAgICAgaWYgKHBpZWNlTGlzdEl0ZW0ubGFiZWwgIT0gbnVsbCkgewogICAgICAgIGl0ZW0udGV4dCA9IHBpZWNlTGlzdEl0ZW0ubGFiZWw7CiAgICAgIH0KCiAgICAgIGlmIChwaWVjZUxpc3RJdGVtLmhhc093blByb3BlcnR5KCd2YWx1ZScpKSB7CiAgICAgICAgdmFyIHZhbHVlID0gaXRlbS52YWx1ZSA9IHBpZWNlTGlzdEl0ZW0udmFsdWU7CiAgICAgICAgaXRlbS5pbnRlcnZhbCA9IFt2YWx1ZSwgdmFsdWVdOwogICAgICAgIGl0ZW0uY2xvc2UgPSBbMSwgMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gYG1pbmAgYG1heGAgaXMgbGVnYWN5IG9wdGlvbi4KICAgICAgICAvLyBgbHRgIGBndGAgYGx0ZWAgYGd0ZWAgaXMgcmVjb21tYW5kZWQuCiAgICAgICAgdmFyIGludGVydmFsID0gaXRlbS5pbnRlcnZhbCA9IFtdOwogICAgICAgIHZhciBjbG9zZSA9IGl0ZW0uY2xvc2UgPSBbMCwgMF07CiAgICAgICAgdmFyIGNsb3NlTGlzdCA9IFsxLCAwLCAxXTsKICAgICAgICB2YXIgaW5maW5pdHlMaXN0ID0gWy1JbmZpbml0eSwgSW5maW5pdHldOwogICAgICAgIHZhciB1c2VNaW5NYXggPSBbXTsKCiAgICAgICAgZm9yICh2YXIgbGcgPSAwOyBsZyA8IDI7IGxnKyspIHsKICAgICAgICAgIHZhciBuYW1lcyA9IFtbJ2d0ZScsICdndCcsICdtaW4nXSwgWydsdGUnLCAnbHQnLCAnbWF4J11dW2xnXTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMgJiYgaW50ZXJ2YWxbbGddID09IG51bGw7IGkrKykgewogICAgICAgICAgICBpbnRlcnZhbFtsZ10gPSBwaWVjZUxpc3RJdGVtW25hbWVzW2ldXTsKICAgICAgICAgICAgY2xvc2VbbGddID0gY2xvc2VMaXN0W2ldOwogICAgICAgICAgICB1c2VNaW5NYXhbbGddID0gaSA9PT0gMjsKICAgICAgICAgIH0KCiAgICAgICAgICBpbnRlcnZhbFtsZ10gPT0gbnVsbCAmJiAoaW50ZXJ2YWxbbGddID0gaW5maW5pdHlMaXN0W2xnXSk7CiAgICAgICAgfQoKICAgICAgICB1c2VNaW5NYXhbMF0gJiYgaW50ZXJ2YWxbMV0gPT09IEluZmluaXR5ICYmIChjbG9zZVswXSA9IDApOwogICAgICAgIHVzZU1pbk1heFsxXSAmJiBpbnRlcnZhbFswXSA9PT0gLUluZmluaXR5ICYmIChjbG9zZVsxXSA9IDApOwoKICAgICAgICBpZiAoaW50ZXJ2YWxbMF0gPT09IGludGVydmFsWzFdICYmIGNsb3NlWzBdICYmIGNsb3NlWzFdKSB7CiAgICAgICAgICAvLyBDb25zaWRlcjogW3ttaW46IDUsIG1heDogNSwgdmlzdWFsOiB7Li4ufX0sIHttaW46IDAsIG1heDogNX1dLAogICAgICAgICAgLy8gd2UgdXNlIHZhbHVlIHRvIGxpZnQgdGhlIHByaW9yaXR5IHdoZW4gbWluID09PSBtYXgKICAgICAgICAgIGl0ZW0udmFsdWUgPSBpbnRlcnZhbFswXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGl0ZW0udmlzdWFsID0gVmlzdWFsTWFwcGluZy5yZXRyaWV2ZVZpc3VhbHMocGllY2VMaXN0SXRlbSk7CiAgICAgIHBpZWNlTGlzdC5wdXNoKGl0ZW0pOwogICAgfSwgdGhpcyk7IC8vIFNlZSAiT3JkZXIgUnVsZSIuCgogICAgbm9ybWFsaXplUmV2ZXJzZSh0aGlzT3B0aW9uLCBwaWVjZUxpc3QpOyAvLyBPbmx5IHBpZWNlcwoKICAgIHJlZm9ybUludGVydmFscyhwaWVjZUxpc3QpOwogICAgenJVdGlsLmVhY2gocGllY2VMaXN0LCBmdW5jdGlvbiAocGllY2UpIHsKICAgICAgdmFyIGNsb3NlID0gcGllY2UuY2xvc2U7CiAgICAgIHZhciBlZGdlU3ltYm9scyA9IFtbJzwnLCAn4omkJ11bY2xvc2VbMV1dLCBbJz4nLCAn4omlJ11bY2xvc2VbMF1dXTsKICAgICAgcGllY2UudGV4dCA9IHBpZWNlLnRleHQgfHwgdGhpcy5mb3JtYXRWYWx1ZVRleHQocGllY2UudmFsdWUgIT0gbnVsbCA/IHBpZWNlLnZhbHVlIDogcGllY2UuaW50ZXJ2YWwsIGZhbHNlLCBlZGdlU3ltYm9scyk7CiAgICB9LCB0aGlzKTsKICB9Cn07CgpmdW5jdGlvbiBub3JtYWxpemVSZXZlcnNlKHRoaXNPcHRpb24sIHBpZWNlTGlzdCkgewogIHZhciBpbnZlcnNlID0gdGhpc09wdGlvbi5pbnZlcnNlOwoKICBpZiAodGhpc09wdGlvbi5vcmllbnQgPT09ICd2ZXJ0aWNhbCcgPyAhaW52ZXJzZSA6IGludmVyc2UpIHsKICAgIHBpZWNlTGlzdC5yZXZlcnNlKCk7CiAgfQp9Cgp2YXIgX2RlZmF1bHQgPSBQaWVjZXdpc2VNb2RlbDsKbW9kdWxlLmV4cG9ydHMgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/visualMap/PiecewiseModel.js"],"names":["_config","require","__DEV__","zrUtil","VisualMapModel","VisualMapping","visualDefault","_number","reformIntervals","PiecewiseModel","extend","type","defaultOption","selected","minOpen","maxOpen","align","itemWidth","itemHeight","itemSymbol","pieceList","categories","splitNumber","selectedMode","itemGap","hoverLink","showLabel","optionUpdated","newOption","isInit","superApply","arguments","_pieceList","resetExtent","mode","_mode","_determineMode","resetMethods","call","_resetSelected","option","resetVisual","mappingOption","state","mappingMethod","clone","dataExtent","getExtent","map","piece","visual","completeVisualOption","visualTypesInPieces","visualTypes","listVisualTypes","isCategory","each","pieces","visualType","hasOwnProperty","v","exists","stateList","has","target","get","obj","isObject","prototype","apply","thisOption","index","key","getSelectedMapKey","hasSel","value","getPieceList","length","setSelected","getValueState","findPieceIndex","findTargetDataIndices","pieceIndex","result","eachTargetSeries","seriesModel","dataIndices","data","getData","getDataDimension","dataIndex","pIdx","push","seriesId","id","getRepresentValue","representValue","pieceInterval","interval","Infinity","getVisualMeta","getColorVisual","stops","outerColors","visualMapModel","setStop","valueState","color","slice","edge","unshift","curr","precision","Math","min","max","parseInt","splitStep","toFixed","close","text","formatValueText","cate","normalizeReverse","pieceListItem","item","label","closeList","infinityList","useMinMax","lg","names","i","retrieveVisuals","edgeSymbols","inverse","orient","reverse","_default","module","exports"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar VisualMapModel = require(\"./VisualMapModel\");\n\nvar VisualMapping = require(\"../../visual/VisualMapping\");\n\nvar visualDefault = require(\"../../visual/visualDefault\");\n\nvar _number = require(\"../../util/number\");\n\nvar reformIntervals = _number.reformIntervals;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PiecewiseModel = VisualMapModel.extend({\n  type: 'visualMap.piecewise',\n\n  /**\n   * Order Rule:\n   *\n   * option.categories / option.pieces / option.text / option.selected:\n   *     If !option.inverse,\n   *     Order when vertical: ['top', ..., 'bottom'].\n   *     Order when horizontal: ['left', ..., 'right'].\n   *     If option.inverse, the meaning of\n   *     the order should be reversed.\n   *\n   * this._pieceList:\n   *     The order is always [low, ..., high].\n   *\n   * Mapping from location to low-high:\n   *     If !option.inverse\n   *     When vertical, top is high.\n   *     When horizontal, right is high.\n   *     If option.inverse, reverse.\n   */\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    selected: null,\n    // Object. If not specified, means selected.\n    // When pieces and splitNumber: {'0': true, '5': true}\n    // When categories: {'cate1': false, 'cate3': true}\n    // When selected === false, means all unselected.\n    minOpen: false,\n    // Whether include values that smaller than `min`.\n    maxOpen: false,\n    // Whether include values that bigger than `max`.\n    align: 'auto',\n    // 'auto', 'left', 'right'\n    itemWidth: 20,\n    // When put the controller vertically, it is the length of\n    // horizontal side of each item. Otherwise, vertical side.\n    itemHeight: 14,\n    // When put the controller vertically, it is the length of\n    // vertical side of each item. Otherwise, horizontal side.\n    itemSymbol: 'roundRect',\n    pieceList: null,\n    // Each item is Object, with some of those attrs:\n    // {min, max, lt, gt, lte, gte, value,\n    // color, colorSaturation, colorAlpha, opacity,\n    // symbol, symbolSize}, which customize the range or visual\n    // coding of the certain piece. Besides, see \"Order Rule\".\n    categories: null,\n    // category names, like: ['some1', 'some2', 'some3'].\n    // Attr min/max are ignored when categories set. See \"Order Rule\"\n    splitNumber: 5,\n    // If set to 5, auto split five pieces equally.\n    // If set to 0 and component type not set, component type will be\n    // determined as \"continuous\". (It is less reasonable but for ec2\n    // compatibility, see echarts/component/visualMap/typeDefaulter)\n    selectedMode: 'multiple',\n    // Can be 'multiple' or 'single'.\n    itemGap: 10,\n    // The gap between two items, in px.\n    hoverLink: true,\n    // Enable hover highlight.\n    showLabel: null // By default, when text is used, label will hide (the logic\n    // is remained for compatibility reason)\n\n  },\n\n  /**\n   * @override\n   */\n  optionUpdated: function (newOption, isInit) {\n    PiecewiseModel.superApply(this, 'optionUpdated', arguments);\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     * @private\n     * @type {Array.<Object>}\n     */\n\n    this._pieceList = [];\n    this.resetExtent();\n    /**\n     * 'pieces', 'categories', 'splitNumber'\n     * @type {string}\n     */\n\n    var mode = this._mode = this._determineMode();\n\n    resetMethods[this._mode].call(this);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          var piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  },\n\n  /**\n   * @protected\n   * @override\n   */\n  completeVisualOption: function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = 0;\n      zrUtil.each(this.stateList, function (state) {\n        exists |= has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && (zrUtil.isObject(obj[state]) ? obj[state].hasOwnProperty(visualType) : obj[state] === visualType // e.g., inRange: 'symbol'\n      );\n    }\n\n    VisualMapModel.prototype.completeVisualOption.apply(this, arguments);\n  },\n  _resetSelected: function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel ? selected[key] = false : hasSel = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  },\n\n  /**\n   * @public\n   */\n  getSelectedMapKey: function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  },\n\n  /**\n   * @public\n   */\n  getPieceList: function () {\n    return this._pieceList;\n  },\n\n  /**\n   * @private\n   * @return {string}\n   */\n  _determineMode: function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  setSelected: function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  },\n\n  /**\n   * @public\n   * @override\n   */\n  getValueState: function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  },\n\n  /**\n   * @public\n   * @params {number} pieceIndex piece index in visualMapModel.getPieceList()\n   * @return {Array.<Object>} [{seriesId, dataIndex: <Array.<number>>}, ...]\n   */\n  findTargetDataIndices: function (pieceIndex) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimension(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, this._pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  },\n\n  /**\n   * @private\n   * @param {Object} piece piece.value or piece.interval is required.\n   * @return {number} Can be Infinity or -Infinity\n   */\n  getRepresentValue: function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  },\n  getVisualMeta: function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = [];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      });\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  }\n});\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      pieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      pieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      pieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function () {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME category模式也使用pieceList，但在visualMapping中不是使用pieceList。\n      // 是否改一致。\n      this._pieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, this._pieceList);\n  },\n  pieces: function () {\n    var thisOption = this.option;\n    var pieceList = this._pieceList;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close[1] = 0);\n\n        if (interval[0] === interval[1] && close[0] && close[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      pieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, pieceList); // Only pieces\n\n    reformIntervals(pieceList);\n    zrUtil.each(pieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', '≤'][close[1]], ['>', '≥'][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nvar _default = PiecewiseModel;\nmodule.exports = _default;"]}]}