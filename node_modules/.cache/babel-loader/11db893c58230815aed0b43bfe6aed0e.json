{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/graph/forceLayout.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/graph/forceLayout.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5maXhlZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7CgovKgoqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiogdW5kZXIgdGhlIExpY2Vuc2UuCiovCnZhciBfZm9yY2VIZWxwZXIgPSByZXF1aXJlKCIuL2ZvcmNlSGVscGVyIik7Cgp2YXIgZm9yY2VMYXlvdXQgPSBfZm9yY2VIZWxwZXIuZm9yY2VMYXlvdXQ7Cgp2YXIgX3NpbXBsZUxheW91dEhlbHBlciA9IHJlcXVpcmUoIi4vc2ltcGxlTGF5b3V0SGVscGVyIik7Cgp2YXIgc2ltcGxlTGF5b3V0ID0gX3NpbXBsZUxheW91dEhlbHBlci5zaW1wbGVMYXlvdXQ7Cgp2YXIgX2NpcmN1bGFyTGF5b3V0SGVscGVyID0gcmVxdWlyZSgiLi9jaXJjdWxhckxheW91dEhlbHBlciIpOwoKdmFyIGNpcmN1bGFyTGF5b3V0ID0gX2NpcmN1bGFyTGF5b3V0SGVscGVyLmNpcmN1bGFyTGF5b3V0OwoKdmFyIF9udW1iZXIgPSByZXF1aXJlKCIuLi8uLi91dGlsL251bWJlciIpOwoKdmFyIGxpbmVhck1hcCA9IF9udW1iZXIubGluZWFyTWFwOwoKdmFyIHZlYzIgPSByZXF1aXJlKCJ6cmVuZGVyL2xpYi9jb3JlL3ZlY3RvciIpOwoKdmFyIHpyVXRpbCA9IHJlcXVpcmUoInpyZW5kZXIvbGliL2NvcmUvdXRpbCIpOwoKdmFyIF9tdWx0aXBsZUdyYXBoRWRnZUhlbHBlciA9IHJlcXVpcmUoIi4uL2hlbHBlci9tdWx0aXBsZUdyYXBoRWRnZUhlbHBlciIpOwoKdmFyIGdldEN1cnZlbmVzc0ZvckVkZ2UgPSBfbXVsdGlwbGVHcmFwaEVkZ2VIZWxwZXIuZ2V0Q3VydmVuZXNzRm9yRWRnZTsKLyoKKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24KKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQoqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAoqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwoqIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwoKZnVuY3Rpb24gX2RlZmF1bHQoZWNNb2RlbCkgewogIGVjTW9kZWwuZWFjaFNlcmllc0J5VHlwZSgnZ3JhcGgnLCBmdW5jdGlvbiAoZ3JhcGhTZXJpZXMpIHsKICAgIHZhciBjb29yZFN5cyA9IGdyYXBoU2VyaWVzLmNvb3JkaW5hdGVTeXN0ZW07CgogICAgaWYgKGNvb3JkU3lzICYmIGNvb3JkU3lzLnR5cGUgIT09ICd2aWV3JykgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGdyYXBoU2VyaWVzLmdldCgnbGF5b3V0JykgPT09ICdmb3JjZScpIHsKICAgICAgdmFyIHByZXNlcnZlZFBvaW50cyA9IGdyYXBoU2VyaWVzLnByZXNlcnZlZFBvaW50cyB8fCB7fTsKICAgICAgdmFyIGdyYXBoID0gZ3JhcGhTZXJpZXMuZ2V0R3JhcGgoKTsKICAgICAgdmFyIG5vZGVEYXRhID0gZ3JhcGguZGF0YTsKICAgICAgdmFyIGVkZ2VEYXRhID0gZ3JhcGguZWRnZURhdGE7CiAgICAgIHZhciBmb3JjZU1vZGVsID0gZ3JhcGhTZXJpZXMuZ2V0TW9kZWwoJ2ZvcmNlJyk7CiAgICAgIHZhciBpbml0TGF5b3V0ID0gZm9yY2VNb2RlbC5nZXQoJ2luaXRMYXlvdXQnKTsKCiAgICAgIGlmIChncmFwaFNlcmllcy5wcmVzZXJ2ZWRQb2ludHMpIHsKICAgICAgICBub2RlRGF0YS5lYWNoKGZ1bmN0aW9uIChpZHgpIHsKICAgICAgICAgIHZhciBpZCA9IG5vZGVEYXRhLmdldElkKGlkeCk7CiAgICAgICAgICBub2RlRGF0YS5zZXRJdGVtTGF5b3V0KGlkeCwgcHJlc2VydmVkUG9pbnRzW2lkXSB8fCBbTmFOLCBOYU5dKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICghaW5pdExheW91dCB8fCBpbml0TGF5b3V0ID09PSAnbm9uZScpIHsKICAgICAgICBzaW1wbGVMYXlvdXQoZ3JhcGhTZXJpZXMpOwogICAgICB9IGVsc2UgaWYgKGluaXRMYXlvdXQgPT09ICdjaXJjdWxhcicpIHsKICAgICAgICBjaXJjdWxhckxheW91dChncmFwaFNlcmllcywgJ3ZhbHVlJyk7CiAgICAgIH0KCiAgICAgIHZhciBub2RlRGF0YUV4dGVudCA9IG5vZGVEYXRhLmdldERhdGFFeHRlbnQoJ3ZhbHVlJyk7CiAgICAgIHZhciBlZGdlRGF0YUV4dGVudCA9IGVkZ2VEYXRhLmdldERhdGFFeHRlbnQoJ3ZhbHVlJyk7IC8vIHZhciBlZGdlRGF0YUV4dGVudCA9IGVkZ2VEYXRhLmdldERhdGFFeHRlbnQoJ3ZhbHVlJyk7CgogICAgICB2YXIgcmVwdWxzaW9uID0gZm9yY2VNb2RlbC5nZXQoJ3JlcHVsc2lvbicpOwogICAgICB2YXIgZWRnZUxlbmd0aCA9IGZvcmNlTW9kZWwuZ2V0KCdlZGdlTGVuZ3RoJyk7CgogICAgICBpZiAoIXpyVXRpbC5pc0FycmF5KHJlcHVsc2lvbikpIHsKICAgICAgICByZXB1bHNpb24gPSBbcmVwdWxzaW9uLCByZXB1bHNpb25dOwogICAgICB9CgogICAgICBpZiAoIXpyVXRpbC5pc0FycmF5KGVkZ2VMZW5ndGgpKSB7CiAgICAgICAgZWRnZUxlbmd0aCA9IFtlZGdlTGVuZ3RoLCBlZGdlTGVuZ3RoXTsKICAgICAgfSAvLyBMYXJnZXIgdmFsdWUgaGFzIHNtYWxsZXIgbGVuZ3RoCgoKICAgICAgZWRnZUxlbmd0aCA9IFtlZGdlTGVuZ3RoWzFdLCBlZGdlTGVuZ3RoWzBdXTsKICAgICAgdmFyIG5vZGVzID0gbm9kZURhdGEubWFwQXJyYXkoJ3ZhbHVlJywgZnVuY3Rpb24gKHZhbHVlLCBpZHgpIHsKICAgICAgICB2YXIgcG9pbnQgPSBub2RlRGF0YS5nZXRJdGVtTGF5b3V0KGlkeCk7CiAgICAgICAgdmFyIHJlcCA9IGxpbmVhck1hcCh2YWx1ZSwgbm9kZURhdGFFeHRlbnQsIHJlcHVsc2lvbik7CgogICAgICAgIGlmIChpc05hTihyZXApKSB7CiAgICAgICAgICByZXAgPSAocmVwdWxzaW9uWzBdICsgcmVwdWxzaW9uWzFdKSAvIDI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgdzogcmVwLAogICAgICAgICAgcmVwOiByZXAsCiAgICAgICAgICBmaXhlZDogbm9kZURhdGEuZ2V0SXRlbU1vZGVsKGlkeCkuZ2V0KCdmaXhlZCcpLAogICAgICAgICAgcDogIXBvaW50IHx8IGlzTmFOKHBvaW50WzBdKSB8fCBpc05hTihwb2ludFsxXSkgPyBudWxsIDogcG9pbnQKICAgICAgICB9OwogICAgICB9KTsKICAgICAgdmFyIGVkZ2VzID0gZWRnZURhdGEubWFwQXJyYXkoJ3ZhbHVlJywgZnVuY3Rpb24gKHZhbHVlLCBpZHgpIHsKICAgICAgICB2YXIgZWRnZSA9IGdyYXBoLmdldEVkZ2VCeUluZGV4KGlkeCk7CiAgICAgICAgdmFyIGQgPSBsaW5lYXJNYXAodmFsdWUsIGVkZ2VEYXRhRXh0ZW50LCBlZGdlTGVuZ3RoKTsKCiAgICAgICAgaWYgKGlzTmFOKGQpKSB7CiAgICAgICAgICBkID0gKGVkZ2VMZW5ndGhbMF0gKyBlZGdlTGVuZ3RoWzFdKSAvIDI7CiAgICAgICAgfQoKICAgICAgICB2YXIgZWRnZU1vZGVsID0gZWRnZS5nZXRNb2RlbCgpOwogICAgICAgIHZhciBjdXJ2ZW5lc3MgPSB6clV0aWwucmV0cmlldmUzKGVkZ2VNb2RlbC5nZXQoJ2xpbmVTdHlsZS5jdXJ2ZW5lc3MnKSwgLWdldEN1cnZlbmVzc0ZvckVkZ2UoZWRnZSwgZ3JhcGhTZXJpZXMsIGlkeCwgdHJ1ZSksIDApOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuMTogbm9kZXNbZWRnZS5ub2RlMS5kYXRhSW5kZXhdLAogICAgICAgICAgbjI6IG5vZGVzW2VkZ2Uubm9kZTIuZGF0YUluZGV4XSwKICAgICAgICAgIGQ6IGQsCiAgICAgICAgICBjdXJ2ZW5lc3M6IGN1cnZlbmVzcywKICAgICAgICAgIGlnbm9yZUZvcmNlTGF5b3V0OiBlZGdlTW9kZWwuZ2V0KCdpZ25vcmVGb3JjZUxheW91dCcpCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHZhciBjb29yZFN5cyA9IGdyYXBoU2VyaWVzLmNvb3JkaW5hdGVTeXN0ZW07CiAgICAgIHZhciByZWN0ID0gY29vcmRTeXMuZ2V0Qm91bmRpbmdSZWN0KCk7CiAgICAgIHZhciBmb3JjZUluc3RhbmNlID0gZm9yY2VMYXlvdXQobm9kZXMsIGVkZ2VzLCB7CiAgICAgICAgcmVjdDogcmVjdCwKICAgICAgICBncmF2aXR5OiBmb3JjZU1vZGVsLmdldCgnZ3Jhdml0eScpLAogICAgICAgIGZyaWN0aW9uOiBmb3JjZU1vZGVsLmdldCgnZnJpY3Rpb24nKQogICAgICB9KTsKICAgICAgdmFyIG9sZFN0ZXAgPSBmb3JjZUluc3RhbmNlLnN0ZXA7CgogICAgICBmb3JjZUluc3RhbmNlLnN0ZXAgPSBmdW5jdGlvbiAoY2IpIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaWYgKG5vZGVzW2ldLmZpeGVkKSB7CiAgICAgICAgICAgIC8vIFdyaXRlIGJhY2sgdG8gbGF5b3V0IGluc3RhbmNlCiAgICAgICAgICAgIHZlYzIuY29weShub2Rlc1tpXS5wLCBncmFwaC5nZXROb2RlQnlJbmRleChpKS5nZXRMYXlvdXQoKSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBvbGRTdGVwKGZ1bmN0aW9uIChub2RlcywgZWRnZXMsIHN0b3BwZWQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIGlmICghbm9kZXNbaV0uZml4ZWQpIHsKICAgICAgICAgICAgICBncmFwaC5nZXROb2RlQnlJbmRleChpKS5zZXRMYXlvdXQobm9kZXNbaV0ucCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHByZXNlcnZlZFBvaW50c1tub2RlRGF0YS5nZXRJZChpKV0gPSBub2Rlc1tpXS5wOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZWRnZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBlID0gZWRnZXNbaV07CiAgICAgICAgICAgIHZhciBlZGdlID0gZ3JhcGguZ2V0RWRnZUJ5SW5kZXgoaSk7CiAgICAgICAgICAgIHZhciBwMSA9IGUubjEucDsKICAgICAgICAgICAgdmFyIHAyID0gZS5uMi5wOwogICAgICAgICAgICB2YXIgcG9pbnRzID0gZWRnZS5nZXRMYXlvdXQoKTsKICAgICAgICAgICAgcG9pbnRzID0gcG9pbnRzID8gcG9pbnRzLnNsaWNlKCkgOiBbXTsKICAgICAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzBdIHx8IFtdOwogICAgICAgICAgICBwb2ludHNbMV0gPSBwb2ludHNbMV0gfHwgW107CiAgICAgICAgICAgIHZlYzIuY29weShwb2ludHNbMF0sIHAxKTsKICAgICAgICAgICAgdmVjMi5jb3B5KHBvaW50c1sxXSwgcDIpOwoKICAgICAgICAgICAgaWYgKCtlLmN1cnZlbmVzcykgewogICAgICAgICAgICAgIHBvaW50c1syXSA9IFsocDFbMF0gKyBwMlswXSkgLyAyIC0gKHAxWzFdIC0gcDJbMV0pICogZS5jdXJ2ZW5lc3MsIChwMVsxXSArIHAyWzFdKSAvIDIgLSAocDJbMF0gLSBwMVswXSkgKiBlLmN1cnZlbmVzc107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVkZ2Uuc2V0TGF5b3V0KHBvaW50cyk7CiAgICAgICAgICB9IC8vIFVwZGF0ZSBsYXlvdXQKCgogICAgICAgICAgY2IgJiYgY2Ioc3RvcHBlZCk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBncmFwaFNlcmllcy5mb3JjZUxheW91dCA9IGZvcmNlSW5zdGFuY2U7CiAgICAgIGdyYXBoU2VyaWVzLnByZXNlcnZlZFBvaW50cyA9IHByZXNlcnZlZFBvaW50czsgLy8gU3RlcCB0byBnZXQgdGhlIGxheW91dAoKICAgICAgZm9yY2VJbnN0YW5jZS5zdGVwKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBSZW1vdmUgcHJldiBpbmplY3RlZCBmb3JjZUxheW91dCBpbnN0YW5jZQogICAgICBncmFwaFNlcmllcy5mb3JjZUxheW91dCA9IG51bGw7CiAgICB9CiAgfSk7Cn0KCm1vZHVsZS5leHBvcnRzID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/graph/forceLayout.js"],"names":["_forceHelper","require","forceLayout","_simpleLayoutHelper","simpleLayout","_circularLayoutHelper","circularLayout","_number","linearMap","vec2","zrUtil","_multipleGraphEdgeHelper","getCurvenessForEdge","_default","ecModel","eachSeriesByType","graphSeries","coordSys","coordinateSystem","type","get","preservedPoints","graph","getGraph","nodeData","data","edgeData","forceModel","getModel","initLayout","each","idx","id","getId","setItemLayout","NaN","nodeDataExtent","getDataExtent","edgeDataExtent","repulsion","edgeLength","isArray","nodes","mapArray","value","point","getItemLayout","rep","isNaN","w","fixed","getItemModel","p","edges","edge","getEdgeByIndex","d","edgeModel","curveness","retrieve3","n1","node1","dataIndex","n2","node2","ignoreForceLayout","rect","getBoundingRect","forceInstance","gravity","friction","oldStep","step","cb","i","l","length","copy","getNodeByIndex","getLayout","stopped","setLayout","e","p1","p2","points","slice","module","exports"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _forceHelper = require(\"./forceHelper\");\n\nvar forceLayout = _forceHelper.forceLayout;\n\nvar _simpleLayoutHelper = require(\"./simpleLayoutHelper\");\n\nvar simpleLayout = _simpleLayoutHelper.simpleLayout;\n\nvar _circularLayoutHelper = require(\"./circularLayoutHelper\");\n\nvar circularLayout = _circularLayoutHelper.circularLayout;\n\nvar _number = require(\"../../util/number\");\n\nvar linearMap = _number.linearMap;\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _multipleGraphEdgeHelper = require(\"../helper/multipleGraphEdgeHelper\");\n\nvar getCurvenessForEdge = _multipleGraphEdgeHelper.getCurvenessForEdge;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints = graphSeries.preservedPoints || {};\n      var graph = graphSeries.getGraph();\n      var nodeData = graph.data;\n      var edgeData = graph.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData.each(function (idx) {\n          var id = nodeData.getId(idx);\n          nodeData.setItemLayout(idx, preservedPoints[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent = nodeData.getDataExtent('value');\n      var edgeDataExtent = edgeData.getDataExtent('value'); // var edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n\n      if (!zrUtil.isArray(repulsion)) {\n        repulsion = [repulsion, repulsion];\n      }\n\n      if (!zrUtil.isArray(edgeLength)) {\n        edgeLength = [edgeLength, edgeLength];\n      } // Larger value has smaller length\n\n\n      edgeLength = [edgeLength[1], edgeLength[0]];\n      var nodes = nodeData.mapArray('value', function (value, idx) {\n        var point = nodeData.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent, repulsion);\n\n        if (isNaN(rep)) {\n          rep = (repulsion[0] + repulsion[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent, edgeLength);\n\n        if (isNaN(d)) {\n          d = (edgeLength[0] + edgeLength[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edgeModel.get('lineStyle.curveness'), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes[edge.node1.dataIndex],\n          n2: nodes[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      var coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      var oldStep = forceInstance.step;\n\n      forceInstance.step = function (cb) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph.getNodeByIndex(i).getLayout());\n          }\n        }\n\n        oldStep(function (nodes, edges, stopped) {\n          for (var i = 0, l = nodes.length; i < l; i++) {\n            if (!nodes[i].fixed) {\n              graph.getNodeByIndex(i).setLayout(nodes[i].p);\n            }\n\n            preservedPoints[nodeData.getId(i)] = nodes[i].p;\n          }\n\n          for (var i = 0, l = edges.length; i < l; i++) {\n            var e = edges[i];\n            var edge = graph.getEdgeByIndex(i);\n            var p1 = e.n1.p;\n            var p2 = e.n2.p;\n            var points = edge.getLayout();\n            points = points ? points.slice() : [];\n            points[0] = points[0] || [];\n            points[1] = points[1] || [];\n            vec2.copy(points[0], p1);\n            vec2.copy(points[1], p2);\n\n            if (+e.curveness) {\n              points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n            }\n\n            edge.setLayout(points);\n          } // Update layout\n\n\n          cb && cb(stopped);\n        });\n      };\n\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}\n\nmodule.exports = _default;"]}]}