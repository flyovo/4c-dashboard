{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/helper/BrushController.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/helper/BrushController.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7CgovKgoqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiogdW5kZXIgdGhlIExpY2Vuc2UuCiovCnZhciBfY29uZmlnID0gcmVxdWlyZSgiLi4vLi4vY29uZmlnIik7Cgp2YXIgX19ERVZfXyA9IF9jb25maWcuX19ERVZfXzsKCnZhciB6clV0aWwgPSByZXF1aXJlKCJ6cmVuZGVyL2xpYi9jb3JlL3V0aWwiKTsKCnZhciBFdmVudGZ1bCA9IHJlcXVpcmUoInpyZW5kZXIvbGliL21peGluL0V2ZW50ZnVsIik7Cgp2YXIgZ3JhcGhpYyA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvZ3JhcGhpYyIpOwoKdmFyIGludGVyYWN0aW9uTXV0ZXggPSByZXF1aXJlKCIuL2ludGVyYWN0aW9uTXV0ZXgiKTsKCnZhciBEYXRhRGlmZmVyID0gcmVxdWlyZSgiLi4vLi4vZGF0YS9EYXRhRGlmZmVyIik7Ci8qCiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQoqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQoqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQoqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgoqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQoqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQoqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKKiB1bmRlciB0aGUgTGljZW5zZS4KKi8KCgp2YXIgY3VycnkgPSB6clV0aWwuY3Vycnk7CnZhciBlYWNoID0genJVdGlsLmVhY2g7CnZhciBtYXAgPSB6clV0aWwubWFwOwp2YXIgbWF0aE1pbiA9IE1hdGgubWluOwp2YXIgbWF0aE1heCA9IE1hdGgubWF4Owp2YXIgbWF0aFBvdyA9IE1hdGgucG93Owp2YXIgQ09WRVJfWiA9IDEwMDAwOwp2YXIgVU5TRUxFQ1RfVEhSRVNIT0xEID0gNjsKdmFyIE1JTl9SRVNJWkVfTElORV9XSURUSCA9IDY7CnZhciBNVVRFWF9SRVNPVVJDRV9LRVkgPSAnZ2xvYmFsUGFuJzsKdmFyIERJUkVDVElPTl9NQVAgPSB7CiAgdzogWzAsIDBdLAogIGU6IFswLCAxXSwKICBuOiBbMSwgMF0sCiAgczogWzEsIDFdCn07CnZhciBDVVJTT1JfTUFQID0gewogIHc6ICdldycsCiAgZTogJ2V3JywKICBuOiAnbnMnLAogIHM6ICducycsCiAgbmU6ICduZXN3JywKICBzdzogJ25lc3cnLAogIG53OiAnbndzZScsCiAgc2U6ICdud3NlJwp9Owp2YXIgREVGQVVMVF9CUlVTSF9PUFQgPSB7CiAgYnJ1c2hTdHlsZTogewogICAgbGluZVdpZHRoOiAyLAogICAgc3Ryb2tlOiAncmdiYSgwLDAsMCwwLjMpJywKICAgIGZpbGw6ICdyZ2JhKDAsMCwwLDAuMSknCiAgfSwKICB0cmFuc2Zvcm1hYmxlOiB0cnVlLAogIGJydXNoTW9kZTogJ3NpbmdsZScsCiAgcmVtb3ZlT25DbGljazogZmFsc2UKfTsKdmFyIGJhc2VVSUQgPSAwOwovKioKICogQGFsaWFzIG1vZHVsZTplY2hhcnRzL2NvbXBvbmVudC9oZWxwZXIvQnJ1c2hDb250cm9sbGVyCiAqIEBjb25zdHJ1Y3RvcgogKiBAbWl4aW4ge21vZHVsZTp6cmVuZGVyL21peGluL0V2ZW50ZnVsfQogKiBAZXZlbnQgbW9kdWxlOmVjaGFydHMvY29tcG9uZW50L2hlbHBlci9CcnVzaENvbnRyb2xsZXIjYnJ1c2gKICogICAgICAgIHBhcmFtczoKICogICAgICAgICAgICBhcmVhczogQXJyYXkuPEFycmF5PiwgY29vcmQgcmVsYXRlcyB0byBjb250YWluZXIgZ3JvdXAsCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgbm8gY29udGFpbmVyIHNwZWNpZmllZCwgdG8gZ2xvYmFsLgogKiAgICAgICAgICAgIG9wdCB7CiAqICAgICAgICAgICAgICAgIGlzRW5kOiBib29sZWFuLAogKiAgICAgICAgICAgICAgICByZW1vdmVPbkNsaWNrOiBib29sZWFuCiAqICAgICAgICAgICAgfQogKgogKiBAcGFyYW0ge21vZHVsZTp6cmVuZGVyL3pyZW5kZXJ+WlJlbmRlcn0genIKICovCgpmdW5jdGlvbiBCcnVzaENvbnRyb2xsZXIoenIpIHsKICBFdmVudGZ1bC5jYWxsKHRoaXMpOwogIC8qKgogICAqIEB0eXBlIHttb2R1bGU6enJlbmRlci96cmVuZGVyflpSZW5kZXJ9CiAgICogQHByaXZhdGUKICAgKi8KCiAgdGhpcy5fenIgPSB6cjsKICAvKioKICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29udGFpbmVyL0dyb3VwfQogICAqIEByZWFkT25seQogICAqLwoKICB0aGlzLmdyb3VwID0gbmV3IGdyYXBoaWMuR3JvdXAoKTsKICAvKioKICAgKiBPbmx5IGZvciBkcmF3aW5nIChhZnRlciBlbmFibGVkQnJ1c2gpLgogICAqICAgICAnbGluZScsICdyZWN0JywgJ3BvbHlnb24nIG9yIGZhbHNlCiAgICogICAgIElmIHBhc3NpbmcgZmFsc2UvbnVsbC91bmRlZmluZWQsIGRpc2FibGUgYnJ1c2guCiAgICogICAgIElmIHBhc3NpbmcgJ2F1dG8nLCBkZXRlcm1pbmVkIGJ5IHBhbmVsLmRlZmF1bHRCcnVzaFR5cGUKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtzdHJpbmd9CiAgICovCgogIHRoaXMuX2JydXNoVHlwZTsKICAvKioKICAgKiBPbmx5IGZvciBkcmF3aW5nIChhZnRlciBlbmFibGVkQnJ1c2gpLgogICAqCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSB7T2JqZWN0fQogICAqLwoKICB0aGlzLl9icnVzaE9wdGlvbjsKICAvKioKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtPYmplY3R9CiAgICovCgogIHRoaXMuX3BhbmVsczsKICAvKioKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtBcnJheS48bnVibWVyPn0KICAgKi8KCiAgdGhpcy5fdHJhY2sgPSBbXTsKICAvKioKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtib29sZWFufQogICAqLwoKICB0aGlzLl9kcmFnZ2luZzsKICAvKioKICAgKiBAcHJpdmF0ZQogICAqIEB0eXBlIHtBcnJheX0KICAgKi8KCiAgdGhpcy5fY292ZXJzID0gW107CiAgLyoqCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSB7bW91ZHVsZTp6cmVuZGVyL2NvbnRhaW5lci9Hcm91cH0KICAgKi8KCiAgdGhpcy5fY3JlYXRpbmdDb3ZlcjsKICAvKioKICAgKiBgdHJ1ZWAgbWVhbnMgZ2xvYmFsIHBhbmVsCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29udGFpbmVyL0dyb3VwfGJvb2xlYW59CiAgICovCgogIHRoaXMuX2NyZWF0aW5nUGFuZWw7CiAgLyoqCiAgICogQHByaXZhdGUKICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgKi8KCiAgdGhpcy5fZW5hYmxlR2xvYmFsUGFuOwogIC8qKgogICAqIEBwcml2YXRlCiAgICogQHR5cGUge2Jvb2xlYW59CiAgICovCgogIC8qKgogICAqIEBwcml2YXRlCiAgICogQHR5cGUge3N0cmluZ30KICAgKi8KCiAgdGhpcy5fdWlkID0gJ2JydXNoQ29udHJvbGxlcl8nICsgYmFzZVVJRCsrOwogIC8qKgogICAqIEBwcml2YXRlCiAgICogQHR5cGUge09iamVjdH0KICAgKi8KCiAgdGhpcy5faGFuZGxlcnMgPSB7fTsKICBlYWNoKHBvaW50ZXJIYW5kbGVycywgZnVuY3Rpb24gKGhhbmRsZXIsIGV2ZW50TmFtZSkgewogICAgdGhpcy5faGFuZGxlcnNbZXZlbnROYW1lXSA9IHpyVXRpbC5iaW5kKGhhbmRsZXIsIHRoaXMpOwogIH0sIHRoaXMpOwp9CgpCcnVzaENvbnRyb2xsZXIucHJvdG90eXBlID0gewogIGNvbnN0cnVjdG9yOiBCcnVzaENvbnRyb2xsZXIsCgogIC8qKgogICAqIElmIHNldCB0byBudWxsL3VuZGVmaW5lZC9mYWxzZSwgc2VsZWN0IGRpc2FibGVkLgogICAqIEBwYXJhbSB7T2JqZWN0fSBicnVzaE9wdGlvbgogICAqIEBwYXJhbSB7c3RyaW5nfGJvb2xlYW59IGJydXNoT3B0aW9uLmJydXNoVHlwZSAnbGluZScsICdyZWN0JywgJ3BvbHlnb24nIG9yIGZhbHNlCiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBhc3NpbmcgZmFsc2UvbnVsbC91bmRlZmluZWQsIGRpc2FibGUgYnJ1c2guCiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIElmIHBhc3NpbmcgJ2F1dG8nLCBkZXRlcm1pbmVkIGJ5IHBhbmVsLmRlZmF1bHRCcnVzaFR5cGUuCiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ2F1dG8nIGNhbiBub3QgYmUgdXNlZCBpbiBnbG9iYWwgcGFuZWwpCiAgICogQHBhcmFtIHtudW1iZXJ9IFticnVzaE9wdGlvbi5icnVzaE1vZGU9J3NpbmdsZSddICdzaW5nbGUnIG9yICdtdWx0aXBsZScKICAgKiBAcGFyYW0ge2Jvb2xlYW59IFticnVzaE9wdGlvbi50cmFuc2Zvcm1hYmxlPXRydWVdCiAgICogQHBhcmFtIHtib29sZWFufSBbYnJ1c2hPcHRpb24ucmVtb3ZlT25DbGljaz1mYWxzZV0KICAgKiBAcGFyYW0ge09iamVjdH0gW2JydXNoT3B0aW9uLmJydXNoU3R5bGVdCiAgICogQHBhcmFtIHtudW1iZXJ9IFticnVzaE9wdGlvbi5icnVzaFN0eWxlLndpZHRoXQogICAqIEBwYXJhbSB7bnVtYmVyfSBbYnJ1c2hPcHRpb24uYnJ1c2hTdHlsZS5saW5lV2lkdGhdCiAgICogQHBhcmFtIHtzdHJpbmd9IFticnVzaE9wdGlvbi5icnVzaFN0eWxlLnN0cm9rZV0KICAgKiBAcGFyYW0ge3N0cmluZ30gW2JydXNoT3B0aW9uLmJydXNoU3R5bGUuZmlsbF0KICAgKiBAcGFyYW0ge251bWJlcn0gW2JydXNoT3B0aW9uLnpdCiAgICovCiAgZW5hYmxlQnJ1c2g6IGZ1bmN0aW9uIGVuYWJsZUJydXNoKGJydXNoT3B0aW9uKSB7CiAgICB0aGlzLl9icnVzaFR5cGUgJiYgZG9EaXNhYmxlQnJ1c2godGhpcyk7CiAgICBicnVzaE9wdGlvbi5icnVzaFR5cGUgJiYgZG9FbmFibGVCcnVzaCh0aGlzLCBicnVzaE9wdGlvbik7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKioKICAgKiBAcGFyYW0ge0FycmF5LjxPYmplY3Q+fSBwYW5lbE9wdHMgSWYgbm90IHBhc3MsIGl0IGlzIGdsb2JhbCBicnVzaC4KICAgKiAgICAgICAgRWFjaCBpdGVtczogewogICAqICAgICAgICAgICAgcGFuZWxJZCwgLy8gbWFuZGF0b3J5LgogICAqICAgICAgICAgICAgY2xpcFBhdGgsIC8vIG1hbmRhdG9yeS4gZnVuY3Rpb24uCiAgICogICAgICAgICAgICBpc1RhcmdldEJ5Q3Vyc29yLCAvLyBtYW5kYXRvcnkuIGZ1bmN0aW9uLgogICAqICAgICAgICAgICAgZGVmYXVsdEJydXNoVHlwZSwgLy8gb3B0aW9uYWwsIG9ubHkgdXNlZCB3aGVuIGJydXNoVHlwZSBpcyAnYXV0bycuCiAgICogICAgICAgICAgICBnZXRMaW5lYXJCcnVzaE90aGVyRXh0ZW50LCAvLyBvcHRpb25hbC4gZnVuY3Rpb24uCiAgICogICAgICAgIH0KICAgKi8KICBzZXRQYW5lbHM6IGZ1bmN0aW9uIHNldFBhbmVscyhwYW5lbE9wdHMpIHsKICAgIGlmIChwYW5lbE9wdHMgJiYgcGFuZWxPcHRzLmxlbmd0aCkgewogICAgICB2YXIgcGFuZWxzID0gdGhpcy5fcGFuZWxzID0ge307CiAgICAgIHpyVXRpbC5lYWNoKHBhbmVsT3B0cywgZnVuY3Rpb24gKHBhbmVsT3B0cykgewogICAgICAgIHBhbmVsc1twYW5lbE9wdHMucGFuZWxJZF0gPSB6clV0aWwuY2xvbmUocGFuZWxPcHRzKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9wYW5lbHMgPSBudWxsOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0XQogICAqIEByZXR1cm4ge2Jvb2xlYW59IFtvcHQuZW5hYmxlR2xvYmFsUGFuPWZhbHNlXQogICAqLwogIG1vdW50OiBmdW5jdGlvbiBtb3VudChvcHQpIHsKICAgIG9wdCA9IG9wdCB8fCB7fTsKICAgIHRoaXMuX2VuYWJsZUdsb2JhbFBhbiA9IG9wdC5lbmFibGVHbG9iYWxQYW47CiAgICB2YXIgdGhpc0dyb3VwID0gdGhpcy5ncm91cDsKCiAgICB0aGlzLl96ci5hZGQodGhpc0dyb3VwKTsKCiAgICB0aGlzR3JvdXAuYXR0cih7CiAgICAgIHBvc2l0aW9uOiBvcHQucG9zaXRpb24gfHwgWzAsIDBdLAogICAgICByb3RhdGlvbjogb3B0LnJvdGF0aW9uIHx8IDAsCiAgICAgIHNjYWxlOiBvcHQuc2NhbGUgfHwgWzEsIDFdCiAgICB9KTsKICAgIHRoaXMuX3RyYW5zZm9ybSA9IHRoaXNHcm91cC5nZXRMb2NhbFRyYW5zZm9ybSgpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBlYWNoQ292ZXI6IGZ1bmN0aW9uIGVhY2hDb3ZlcihjYiwgY29udGV4dCkgewogICAgZWFjaCh0aGlzLl9jb3ZlcnMsIGNiLCBjb250ZXh0KTsKICB9LAoKICAvKioKICAgKiBVcGRhdGUgY292ZXJzLgogICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGJydXNoT3B0aW9uTGlzdCBMaWtlOgogICAqICAgICAgICBbCiAgICogICAgICAgICAgICB7aWQ6ICd4eCcsIGJydXNoVHlwZTogJ2xpbmUnLCByYW5nZTogWzIzLCA0NF0sIGJydXNoU3R5bGUsIHRyYW5zZm9ybWFibGV9LAogICAqICAgICAgICAgICAge2lkOiAneXknLCBicnVzaFR5cGU6ICdyZWN0JywgcmFuZ2U6IFtbMjMsIDQ0XSwgWzIzLCA1NF1dfSwKICAgKiAgICAgICAgICAgIC4uLgogICAqICAgICAgICBdCiAgICogICAgICAgIGBicnVzaFR5cGVgIGlzIHJlcXVpcmVkIGluIGVhY2ggY292ZXIgaW5mby4gKGNhbiBub3QgYmUgJ2F1dG8nKQogICAqICAgICAgICBgaWRgIGlzIG5vdCBtYW5kYXRvcnkuCiAgICogICAgICAgIGBicnVzaFN0eWxlYCwgYHRyYW5zZm9ybWFibGVgIGlzIG5vdCBtYW5kYXRvcnksIHVzZSBERUZBVUxUX0JSVVNIX09QVCBieSBkZWZhdWx0LgogICAqICAgICAgICBJZiBicnVzaE9wdGlvbkxpc3QgaXMgbnVsbC91bmRlZmluZWQsIGFsbCBjb3ZlcnMgcmVtb3ZlZC4KICAgKi8KICB1cGRhdGVDb3ZlcnM6IGZ1bmN0aW9uIHVwZGF0ZUNvdmVycyhicnVzaE9wdGlvbkxpc3QpIHsKICAgIGJydXNoT3B0aW9uTGlzdCA9IHpyVXRpbC5tYXAoYnJ1c2hPcHRpb25MaXN0LCBmdW5jdGlvbiAoYnJ1c2hPcHRpb24pIHsKICAgICAgcmV0dXJuIHpyVXRpbC5tZXJnZSh6clV0aWwuY2xvbmUoREVGQVVMVF9CUlVTSF9PUFQpLCBicnVzaE9wdGlvbiwgdHJ1ZSk7CiAgICB9KTsKICAgIHZhciB0bXBJZFByZWZpeCA9ICdcMC1icnVzaC1pbmRleC0nOwogICAgdmFyIG9sZENvdmVycyA9IHRoaXMuX2NvdmVyczsKICAgIHZhciBuZXdDb3ZlcnMgPSB0aGlzLl9jb3ZlcnMgPSBbXTsKICAgIHZhciBjb250cm9sbGVyID0gdGhpczsKICAgIHZhciBjcmVhdGluZ0NvdmVyID0gdGhpcy5fY3JlYXRpbmdDb3ZlcjsKICAgIG5ldyBEYXRhRGlmZmVyKG9sZENvdmVycywgYnJ1c2hPcHRpb25MaXN0LCBvbGRHZXRLZXksIGdldEtleSkuYWRkKGFkZE9yVXBkYXRlKS51cGRhdGUoYWRkT3JVcGRhdGUpLnJlbW92ZShyZW1vdmUpLmV4ZWN1dGUoKTsKICAgIHJldHVybiB0aGlzOwoKICAgIGZ1bmN0aW9uIGdldEtleShicnVzaE9wdGlvbiwgaW5kZXgpIHsKICAgICAgcmV0dXJuIChicnVzaE9wdGlvbi5pZCAhPSBudWxsID8gYnJ1c2hPcHRpb24uaWQgOiB0bXBJZFByZWZpeCArIGluZGV4KSArICctJyArIGJydXNoT3B0aW9uLmJydXNoVHlwZTsKICAgIH0KCiAgICBmdW5jdGlvbiBvbGRHZXRLZXkoY292ZXIsIGluZGV4KSB7CiAgICAgIHJldHVybiBnZXRLZXkoY292ZXIuX19icnVzaE9wdGlvbiwgaW5kZXgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZE9yVXBkYXRlKG5ld0luZGV4LCBvbGRJbmRleCkgewogICAgICB2YXIgbmV3QnJ1c2hPcHRpb24gPSBicnVzaE9wdGlvbkxpc3RbbmV3SW5kZXhdOyAvLyBDb25zaWRlciBzZXRPcHRpb24gaW4gZXZlbnQgbGlzdGVuZXIgb2YgYnJ1c2hTZWxlY3QsCiAgICAgIC8vIHdoZXJlIHVwZGF0aW5nIGNvdmVyIHdoZW4gY3JlYXRpbmcgc2hvdWxkIGJlIGZvcmJpZGVuLgoKICAgICAgaWYgKG9sZEluZGV4ICE9IG51bGwgJiYgb2xkQ292ZXJzW29sZEluZGV4XSA9PT0gY3JlYXRpbmdDb3ZlcikgewogICAgICAgIG5ld0NvdmVyc1tuZXdJbmRleF0gPSBvbGRDb3ZlcnNbb2xkSW5kZXhdOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjb3ZlciA9IG5ld0NvdmVyc1tuZXdJbmRleF0gPSBvbGRJbmRleCAhPSBudWxsID8gKG9sZENvdmVyc1tvbGRJbmRleF0uX19icnVzaE9wdGlvbiA9IG5ld0JydXNoT3B0aW9uLCBvbGRDb3ZlcnNbb2xkSW5kZXhdKSA6IGVuZENyZWF0aW5nKGNvbnRyb2xsZXIsIGNyZWF0ZUNvdmVyKGNvbnRyb2xsZXIsIG5ld0JydXNoT3B0aW9uKSk7CiAgICAgICAgdXBkYXRlQ292ZXJBZnRlckNyZWF0aW9uKGNvbnRyb2xsZXIsIGNvdmVyKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZShvbGRJbmRleCkgewogICAgICBpZiAob2xkQ292ZXJzW29sZEluZGV4XSAhPT0gY3JlYXRpbmdDb3ZlcikgewogICAgICAgIGNvbnRyb2xsZXIuZ3JvdXAucmVtb3ZlKG9sZENvdmVyc1tvbGRJbmRleF0pOwogICAgICB9CiAgICB9CiAgfSwKICB1bm1vdW50OiBmdW5jdGlvbiB1bm1vdW50KCkgewogICAgdGhpcy5lbmFibGVCcnVzaChmYWxzZSk7IC8vIGNvbnRhaW5lciBtYXkgJ3JlbW92ZUFsbCcgb3V0c2lkZS4KCiAgICBjbGVhckNvdmVycyh0aGlzKTsKCiAgICB0aGlzLl96ci5yZW1vdmUodGhpcy5ncm91cCk7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKICBkaXNwb3NlOiBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgdGhpcy51bm1vdW50KCk7CiAgICB0aGlzLm9mZigpOwogIH0KfTsKenJVdGlsLm1peGluKEJydXNoQ29udHJvbGxlciwgRXZlbnRmdWwpOwoKZnVuY3Rpb24gZG9FbmFibGVCcnVzaChjb250cm9sbGVyLCBicnVzaE9wdGlvbikgewogIHZhciB6ciA9IGNvbnRyb2xsZXIuX3pyOyAvLyBDb25zaWRlciByb2FtLCB3aGljaCB0YWtlcyBnbG9iYWxQYW4gdG9vLgoKICBpZiAoIWNvbnRyb2xsZXIuX2VuYWJsZUdsb2JhbFBhbikgewogICAgaW50ZXJhY3Rpb25NdXRleC50YWtlKHpyLCBNVVRFWF9SRVNPVVJDRV9LRVksIGNvbnRyb2xsZXIuX3VpZCk7CiAgfQoKICBtb3VudEhhbmRsZXJzKHpyLCBjb250cm9sbGVyLl9oYW5kbGVycyk7CiAgY29udHJvbGxlci5fYnJ1c2hUeXBlID0gYnJ1c2hPcHRpb24uYnJ1c2hUeXBlOwogIGNvbnRyb2xsZXIuX2JydXNoT3B0aW9uID0genJVdGlsLm1lcmdlKHpyVXRpbC5jbG9uZShERUZBVUxUX0JSVVNIX09QVCksIGJydXNoT3B0aW9uLCB0cnVlKTsKfQoKZnVuY3Rpb24gZG9EaXNhYmxlQnJ1c2goY29udHJvbGxlcikgewogIHZhciB6ciA9IGNvbnRyb2xsZXIuX3pyOwogIGludGVyYWN0aW9uTXV0ZXgucmVsZWFzZSh6ciwgTVVURVhfUkVTT1VSQ0VfS0VZLCBjb250cm9sbGVyLl91aWQpOwogIHVubW91bnRIYW5kbGVycyh6ciwgY29udHJvbGxlci5faGFuZGxlcnMpOwogIGNvbnRyb2xsZXIuX2JydXNoVHlwZSA9IGNvbnRyb2xsZXIuX2JydXNoT3B0aW9uID0gbnVsbDsKfQoKZnVuY3Rpb24gbW91bnRIYW5kbGVycyh6ciwgaGFuZGxlcnMpIHsKICBlYWNoKGhhbmRsZXJzLCBmdW5jdGlvbiAoaGFuZGxlciwgZXZlbnROYW1lKSB7CiAgICB6ci5vbihldmVudE5hbWUsIGhhbmRsZXIpOwogIH0pOwp9CgpmdW5jdGlvbiB1bm1vdW50SGFuZGxlcnMoenIsIGhhbmRsZXJzKSB7CiAgZWFjaChoYW5kbGVycywgZnVuY3Rpb24gKGhhbmRsZXIsIGV2ZW50TmFtZSkgewogICAgenIub2ZmKGV2ZW50TmFtZSwgaGFuZGxlcik7CiAgfSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUNvdmVyKGNvbnRyb2xsZXIsIGJydXNoT3B0aW9uKSB7CiAgdmFyIGNvdmVyID0gY292ZXJSZW5kZXJlcnNbYnJ1c2hPcHRpb24uYnJ1c2hUeXBlXS5jcmVhdGVDb3Zlcihjb250cm9sbGVyLCBicnVzaE9wdGlvbik7CiAgY292ZXIuX19icnVzaE9wdGlvbiA9IGJydXNoT3B0aW9uOwogIHVwZGF0ZVooY292ZXIsIGJydXNoT3B0aW9uKTsKICBjb250cm9sbGVyLmdyb3VwLmFkZChjb3Zlcik7CiAgcmV0dXJuIGNvdmVyOwp9CgpmdW5jdGlvbiBlbmRDcmVhdGluZyhjb250cm9sbGVyLCBjcmVhdGluZ0NvdmVyKSB7CiAgdmFyIGNvdmVyUmVuZGVyZXIgPSBnZXRDb3ZlclJlbmRlcmVyKGNyZWF0aW5nQ292ZXIpOwoKICBpZiAoY292ZXJSZW5kZXJlci5lbmRDcmVhdGluZykgewogICAgY292ZXJSZW5kZXJlci5lbmRDcmVhdGluZyhjb250cm9sbGVyLCBjcmVhdGluZ0NvdmVyKTsKICAgIHVwZGF0ZVooY3JlYXRpbmdDb3ZlciwgY3JlYXRpbmdDb3Zlci5fX2JydXNoT3B0aW9uKTsKICB9CgogIHJldHVybiBjcmVhdGluZ0NvdmVyOwp9CgpmdW5jdGlvbiB1cGRhdGVDb3ZlclNoYXBlKGNvbnRyb2xsZXIsIGNvdmVyKSB7CiAgdmFyIGJydXNoT3B0aW9uID0gY292ZXIuX19icnVzaE9wdGlvbjsKICBnZXRDb3ZlclJlbmRlcmVyKGNvdmVyKS51cGRhdGVDb3ZlclNoYXBlKGNvbnRyb2xsZXIsIGNvdmVyLCBicnVzaE9wdGlvbi5yYW5nZSwgYnJ1c2hPcHRpb24pOwp9CgpmdW5jdGlvbiB1cGRhdGVaKGNvdmVyLCBicnVzaE9wdGlvbikgewogIHZhciB6ID0gYnJ1c2hPcHRpb24uejsKICB6ID09IG51bGwgJiYgKHogPSBDT1ZFUl9aKTsKICBjb3Zlci50cmF2ZXJzZShmdW5jdGlvbiAoZWwpIHsKICAgIGVsLnogPSB6OwogICAgZWwuejIgPSB6OyAvLyBDb25zaWRlciBpbiBnaXZlbiBjb250YWluZXIuCiAgfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNvdmVyQWZ0ZXJDcmVhdGlvbihjb250cm9sbGVyLCBjb3ZlcikgewogIGdldENvdmVyUmVuZGVyZXIoY292ZXIpLnVwZGF0ZUNvbW1vbihjb250cm9sbGVyLCBjb3Zlcik7CiAgdXBkYXRlQ292ZXJTaGFwZShjb250cm9sbGVyLCBjb3Zlcik7Cn0KCmZ1bmN0aW9uIGdldENvdmVyUmVuZGVyZXIoY292ZXIpIHsKICByZXR1cm4gY292ZXJSZW5kZXJlcnNbY292ZXIuX19icnVzaE9wdGlvbi5icnVzaFR5cGVdOwp9IC8vIHJldHVybiB0YXJnZXQgcGFuZWwgb3IgYHRydWVgIChtZWFucyBnbG9iYWwgcGFuZWwpCgoKZnVuY3Rpb24gZ2V0UGFuZWxCeVBvaW50KGNvbnRyb2xsZXIsIGUsIGxvY2FsQ3Vyc29yUG9pbnQpIHsKICB2YXIgcGFuZWxzID0gY29udHJvbGxlci5fcGFuZWxzOwoKICBpZiAoIXBhbmVscykgewogICAgcmV0dXJuIHRydWU7IC8vIEdsb2JhbCBwYW5lbAogIH0KCiAgdmFyIHBhbmVsOwogIHZhciB0cmFuc2Zvcm0gPSBjb250cm9sbGVyLl90cmFuc2Zvcm07CiAgZWFjaChwYW5lbHMsIGZ1bmN0aW9uIChwbikgewogICAgcG4uaXNUYXJnZXRCeUN1cnNvcihlLCBsb2NhbEN1cnNvclBvaW50LCB0cmFuc2Zvcm0pICYmIChwYW5lbCA9IHBuKTsKICB9KTsKICByZXR1cm4gcGFuZWw7Cn0gLy8gUmV0dXJuIGEgcGFuZWwgb3IgdHJ1ZQoKCmZ1bmN0aW9uIGdldFBhbmVsQnlDb3Zlcihjb250cm9sbGVyLCBjb3ZlcikgewogIHZhciBwYW5lbHMgPSBjb250cm9sbGVyLl9wYW5lbHM7CgogIGlmICghcGFuZWxzKSB7CiAgICByZXR1cm4gdHJ1ZTsgLy8gR2xvYmFsIHBhbmVsCiAgfQoKICB2YXIgcGFuZWxJZCA9IGNvdmVyLl9fYnJ1c2hPcHRpb24ucGFuZWxJZDsgLy8gVXNlciBtYXkgZ2l2ZSBjb3ZlciB3aXRob3V0IGNvb3JkIHN5cyBpbmZvLAogIC8vIHdoaWNoIGlzIHRoZW4gdHJlYXRlZCBhcyBnbG9iYWwgcGFuZWwuCgogIHJldHVybiBwYW5lbElkICE9IG51bGwgPyBwYW5lbHNbcGFuZWxJZF0gOiB0cnVlOwp9CgpmdW5jdGlvbiBjbGVhckNvdmVycyhjb250cm9sbGVyKSB7CiAgdmFyIGNvdmVycyA9IGNvbnRyb2xsZXIuX2NvdmVyczsKICB2YXIgb3JpZ2luYWxMZW5ndGggPSBjb3ZlcnMubGVuZ3RoOwogIGVhY2goY292ZXJzLCBmdW5jdGlvbiAoY292ZXIpIHsKICAgIGNvbnRyb2xsZXIuZ3JvdXAucmVtb3ZlKGNvdmVyKTsKICB9LCBjb250cm9sbGVyKTsKICBjb3ZlcnMubGVuZ3RoID0gMDsKICByZXR1cm4gISFvcmlnaW5hbExlbmd0aDsKfQoKZnVuY3Rpb24gdHJpZ2dlcihjb250cm9sbGVyLCBvcHQpIHsKICB2YXIgYXJlYXMgPSBtYXAoY29udHJvbGxlci5fY292ZXJzLCBmdW5jdGlvbiAoY292ZXIpIHsKICAgIHZhciBicnVzaE9wdGlvbiA9IGNvdmVyLl9fYnJ1c2hPcHRpb247CiAgICB2YXIgcmFuZ2UgPSB6clV0aWwuY2xvbmUoYnJ1c2hPcHRpb24ucmFuZ2UpOwogICAgcmV0dXJuIHsKICAgICAgYnJ1c2hUeXBlOiBicnVzaE9wdGlvbi5icnVzaFR5cGUsCiAgICAgIHBhbmVsSWQ6IGJydXNoT3B0aW9uLnBhbmVsSWQsCiAgICAgIHJhbmdlOiByYW5nZQogICAgfTsKICB9KTsKICBjb250cm9sbGVyLnRyaWdnZXIoJ2JydXNoJywgYXJlYXMsIHsKICAgIGlzRW5kOiAhIW9wdC5pc0VuZCwKICAgIHJlbW92ZU9uQ2xpY2s6ICEhb3B0LnJlbW92ZU9uQ2xpY2sKICB9KTsKfQoKZnVuY3Rpb24gc2hvdWxkU2hvd0NvdmVyKGNvbnRyb2xsZXIpIHsKICB2YXIgdHJhY2sgPSBjb250cm9sbGVyLl90cmFjazsKCiAgaWYgKCF0cmFjay5sZW5ndGgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBwMiA9IHRyYWNrW3RyYWNrLmxlbmd0aCAtIDFdOwogIHZhciBwMSA9IHRyYWNrWzBdOwogIHZhciBkeCA9IHAyWzBdIC0gcDFbMF07CiAgdmFyIGR5ID0gcDJbMV0gLSBwMVsxXTsKICB2YXIgZGlzdCA9IG1hdGhQb3coZHggKiBkeCArIGR5ICogZHksIDAuNSk7CiAgcmV0dXJuIGRpc3QgPiBVTlNFTEVDVF9USFJFU0hPTEQ7Cn0KCmZ1bmN0aW9uIGdldFRyYWNrRW5kcyh0cmFjaykgewogIHZhciB0YWlsID0gdHJhY2subGVuZ3RoIC0gMTsKICB0YWlsIDwgMCAmJiAodGFpbCA9IDApOwogIHJldHVybiBbdHJhY2tbMF0sIHRyYWNrW3RhaWxdXTsKfQoKZnVuY3Rpb24gY3JlYXRlQmFzZVJlY3RDb3Zlcihkb0RyaWZ0LCBjb250cm9sbGVyLCBicnVzaE9wdGlvbiwgZWRnZU5hbWVzKSB7CiAgdmFyIGNvdmVyID0gbmV3IGdyYXBoaWMuR3JvdXAoKTsKICBjb3Zlci5hZGQobmV3IGdyYXBoaWMuUmVjdCh7CiAgICBuYW1lOiAnbWFpbicsCiAgICBzdHlsZTogbWFrZVN0eWxlKGJydXNoT3B0aW9uKSwKICAgIHNpbGVudDogdHJ1ZSwKICAgIGRyYWdnYWJsZTogdHJ1ZSwKICAgIGN1cnNvcjogJ21vdmUnLAogICAgZHJpZnQ6IGN1cnJ5KGRvRHJpZnQsIGNvbnRyb2xsZXIsIGNvdmVyLCAnbnN3ZScpLAogICAgb25kcmFnZW5kOiBjdXJyeSh0cmlnZ2VyLCBjb250cm9sbGVyLCB7CiAgICAgIGlzRW5kOiB0cnVlCiAgICB9KQogIH0pKTsKICBlYWNoKGVkZ2VOYW1lcywgZnVuY3Rpb24gKG5hbWUpIHsKICAgIGNvdmVyLmFkZChuZXcgZ3JhcGhpYy5SZWN0KHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgc3R5bGU6IHsKICAgICAgICBvcGFjaXR5OiAwCiAgICAgIH0sCiAgICAgIGRyYWdnYWJsZTogdHJ1ZSwKICAgICAgc2lsZW50OiB0cnVlLAogICAgICBpbnZpc2libGU6IHRydWUsCiAgICAgIGRyaWZ0OiBjdXJyeShkb0RyaWZ0LCBjb250cm9sbGVyLCBjb3ZlciwgbmFtZSksCiAgICAgIG9uZHJhZ2VuZDogY3VycnkodHJpZ2dlciwgY29udHJvbGxlciwgewogICAgICAgIGlzRW5kOiB0cnVlCiAgICAgIH0pCiAgICB9KSk7CiAgfSk7CiAgcmV0dXJuIGNvdmVyOwp9CgpmdW5jdGlvbiB1cGRhdGVCYXNlUmVjdChjb250cm9sbGVyLCBjb3ZlciwgbG9jYWxSYW5nZSwgYnJ1c2hPcHRpb24pIHsKICB2YXIgbGluZVdpZHRoID0gYnJ1c2hPcHRpb24uYnJ1c2hTdHlsZS5saW5lV2lkdGggfHwgMDsKICB2YXIgaGFuZGxlU2l6ZSA9IG1hdGhNYXgobGluZVdpZHRoLCBNSU5fUkVTSVpFX0xJTkVfV0lEVEgpOwogIHZhciB4ID0gbG9jYWxSYW5nZVswXVswXTsKICB2YXIgeSA9IGxvY2FsUmFuZ2VbMV1bMF07CiAgdmFyIHhhID0geCAtIGxpbmVXaWR0aCAvIDI7CiAgdmFyIHlhID0geSAtIGxpbmVXaWR0aCAvIDI7CiAgdmFyIHgyID0gbG9jYWxSYW5nZVswXVsxXTsKICB2YXIgeTIgPSBsb2NhbFJhbmdlWzFdWzFdOwogIHZhciB4MmEgPSB4MiAtIGhhbmRsZVNpemUgKyBsaW5lV2lkdGggLyAyOwogIHZhciB5MmEgPSB5MiAtIGhhbmRsZVNpemUgKyBsaW5lV2lkdGggLyAyOwogIHZhciB3aWR0aCA9IHgyIC0geDsKICB2YXIgaGVpZ2h0ID0geTIgLSB5OwogIHZhciB3aWR0aGEgPSB3aWR0aCArIGxpbmVXaWR0aDsKICB2YXIgaGVpZ2h0YSA9IGhlaWdodCArIGxpbmVXaWR0aDsKICB1cGRhdGVSZWN0U2hhcGUoY29udHJvbGxlciwgY292ZXIsICdtYWluJywgeCwgeSwgd2lkdGgsIGhlaWdodCk7CgogIGlmIChicnVzaE9wdGlvbi50cmFuc2Zvcm1hYmxlKSB7CiAgICB1cGRhdGVSZWN0U2hhcGUoY29udHJvbGxlciwgY292ZXIsICd3JywgeGEsIHlhLCBoYW5kbGVTaXplLCBoZWlnaHRhKTsKICAgIHVwZGF0ZVJlY3RTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgJ2UnLCB4MmEsIHlhLCBoYW5kbGVTaXplLCBoZWlnaHRhKTsKICAgIHVwZGF0ZVJlY3RTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgJ24nLCB4YSwgeWEsIHdpZHRoYSwgaGFuZGxlU2l6ZSk7CiAgICB1cGRhdGVSZWN0U2hhcGUoY29udHJvbGxlciwgY292ZXIsICdzJywgeGEsIHkyYSwgd2lkdGhhLCBoYW5kbGVTaXplKTsKICAgIHVwZGF0ZVJlY3RTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgJ253JywgeGEsIHlhLCBoYW5kbGVTaXplLCBoYW5kbGVTaXplKTsKICAgIHVwZGF0ZVJlY3RTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgJ25lJywgeDJhLCB5YSwgaGFuZGxlU2l6ZSwgaGFuZGxlU2l6ZSk7CiAgICB1cGRhdGVSZWN0U2hhcGUoY29udHJvbGxlciwgY292ZXIsICdzdycsIHhhLCB5MmEsIGhhbmRsZVNpemUsIGhhbmRsZVNpemUpOwogICAgdXBkYXRlUmVjdFNoYXBlKGNvbnRyb2xsZXIsIGNvdmVyLCAnc2UnLCB4MmEsIHkyYSwgaGFuZGxlU2l6ZSwgaGFuZGxlU2l6ZSk7CiAgfQp9CgpmdW5jdGlvbiB1cGRhdGVDb21tb24oY29udHJvbGxlciwgY292ZXIpIHsKICB2YXIgYnJ1c2hPcHRpb24gPSBjb3Zlci5fX2JydXNoT3B0aW9uOwogIHZhciB0cmFuc2Zvcm1hYmxlID0gYnJ1c2hPcHRpb24udHJhbnNmb3JtYWJsZTsKICB2YXIgbWFpbkVsID0gY292ZXIuY2hpbGRBdCgwKTsKICBtYWluRWwudXNlU3R5bGUobWFrZVN0eWxlKGJydXNoT3B0aW9uKSk7CiAgbWFpbkVsLmF0dHIoewogICAgc2lsZW50OiAhdHJhbnNmb3JtYWJsZSwKICAgIGN1cnNvcjogdHJhbnNmb3JtYWJsZSA/ICdtb3ZlJyA6ICdkZWZhdWx0JwogIH0pOwogIGVhY2goWyd3JywgJ2UnLCAnbicsICdzJywgJ3NlJywgJ3N3JywgJ25lJywgJ253J10sIGZ1bmN0aW9uIChuYW1lKSB7CiAgICB2YXIgZWwgPSBjb3Zlci5jaGlsZE9mTmFtZShuYW1lKTsKICAgIHZhciBnbG9iYWxEaXIgPSBnZXRHbG9iYWxEaXJlY3Rpb24oY29udHJvbGxlciwgbmFtZSk7CiAgICBlbCAmJiBlbC5hdHRyKHsKICAgICAgc2lsZW50OiAhdHJhbnNmb3JtYWJsZSwKICAgICAgaW52aXNpYmxlOiAhdHJhbnNmb3JtYWJsZSwKICAgICAgY3Vyc29yOiB0cmFuc2Zvcm1hYmxlID8gQ1VSU09SX01BUFtnbG9iYWxEaXJdICsgJy1yZXNpemUnIDogbnVsbAogICAgfSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVJlY3RTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgbmFtZSwgeCwgeSwgdywgaCkgewogIHZhciBlbCA9IGNvdmVyLmNoaWxkT2ZOYW1lKG5hbWUpOwogIGVsICYmIGVsLnNldFNoYXBlKHBvaW50c1RvUmVjdChjbGlwQnlQYW5lbChjb250cm9sbGVyLCBjb3ZlciwgW1t4LCB5XSwgW3ggKyB3LCB5ICsgaF1dKSkpOwp9CgpmdW5jdGlvbiBtYWtlU3R5bGUoYnJ1c2hPcHRpb24pIHsKICByZXR1cm4genJVdGlsLmRlZmF1bHRzKHsKICAgIHN0cm9rZU5vU2NhbGU6IHRydWUKICB9LCBicnVzaE9wdGlvbi5icnVzaFN0eWxlKTsKfQoKZnVuY3Rpb24gZm9ybWF0UmVjdFJhbmdlKHgsIHksIHgyLCB5MikgewogIHZhciBtaW4gPSBbbWF0aE1pbih4LCB4MiksIG1hdGhNaW4oeSwgeTIpXTsKICB2YXIgbWF4ID0gW21hdGhNYXgoeCwgeDIpLCBtYXRoTWF4KHksIHkyKV07CiAgcmV0dXJuIFtbbWluWzBdLCBtYXhbMF1dLCAvLyB4IHJhbmdlCiAgW21pblsxXSwgbWF4WzFdXSAvLyB5IHJhbmdlCiAgXTsKfQoKZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKGNvbnRyb2xsZXIpIHsKICByZXR1cm4gZ3JhcGhpYy5nZXRUcmFuc2Zvcm0oY29udHJvbGxlci5ncm91cCk7Cn0KCmZ1bmN0aW9uIGdldEdsb2JhbERpcmVjdGlvbihjb250cm9sbGVyLCBsb2NhbERpcmVjdGlvbikgewogIGlmIChsb2NhbERpcmVjdGlvbi5sZW5ndGggPiAxKSB7CiAgICBsb2NhbERpcmVjdGlvbiA9IGxvY2FsRGlyZWN0aW9uLnNwbGl0KCcnKTsKICAgIHZhciBnbG9iYWxEaXIgPSBbZ2V0R2xvYmFsRGlyZWN0aW9uKGNvbnRyb2xsZXIsIGxvY2FsRGlyZWN0aW9uWzBdKSwgZ2V0R2xvYmFsRGlyZWN0aW9uKGNvbnRyb2xsZXIsIGxvY2FsRGlyZWN0aW9uWzFdKV07CiAgICAoZ2xvYmFsRGlyWzBdID09PSAnZScgfHwgZ2xvYmFsRGlyWzBdID09PSAndycpICYmIGdsb2JhbERpci5yZXZlcnNlKCk7CiAgICByZXR1cm4gZ2xvYmFsRGlyLmpvaW4oJycpOwogIH0gZWxzZSB7CiAgICB2YXIgbWFwID0gewogICAgICB3OiAnbGVmdCcsCiAgICAgIGU6ICdyaWdodCcsCiAgICAgIG46ICd0b3AnLAogICAgICBzOiAnYm90dG9tJwogICAgfTsKICAgIHZhciBpbnZlcnNlTWFwID0gewogICAgICBsZWZ0OiAndycsCiAgICAgIHJpZ2h0OiAnZScsCiAgICAgIHRvcDogJ24nLAogICAgICBib3R0b206ICdzJwogICAgfTsKICAgIHZhciBnbG9iYWxEaXIgPSBncmFwaGljLnRyYW5zZm9ybURpcmVjdGlvbihtYXBbbG9jYWxEaXJlY3Rpb25dLCBnZXRUcmFuc2Zvcm0oY29udHJvbGxlcikpOwogICAgcmV0dXJuIGludmVyc2VNYXBbZ2xvYmFsRGlyXTsKICB9Cn0KCmZ1bmN0aW9uIGRyaWZ0UmVjdCh0b1JlY3RSYW5nZSwgZnJvbVJlY3RSYW5nZSwgY29udHJvbGxlciwgY292ZXIsIG5hbWUsIGR4LCBkeSwgZSkgewogIHZhciBicnVzaE9wdGlvbiA9IGNvdmVyLl9fYnJ1c2hPcHRpb247CiAgdmFyIHJlY3RSYW5nZSA9IHRvUmVjdFJhbmdlKGJydXNoT3B0aW9uLnJhbmdlKTsKICB2YXIgbG9jYWxEZWx0YSA9IHRvTG9jYWxEZWx0YShjb250cm9sbGVyLCBkeCwgZHkpOwogIGVhY2gobmFtZS5zcGxpdCgnJyksIGZ1bmN0aW9uIChuYW1lUGFydCkgewogICAgdmFyIGluZCA9IERJUkVDVElPTl9NQVBbbmFtZVBhcnRdOwogICAgcmVjdFJhbmdlW2luZFswXV1baW5kWzFdXSArPSBsb2NhbERlbHRhW2luZFswXV07CiAgfSk7CiAgYnJ1c2hPcHRpb24ucmFuZ2UgPSBmcm9tUmVjdFJhbmdlKGZvcm1hdFJlY3RSYW5nZShyZWN0UmFuZ2VbMF1bMF0sIHJlY3RSYW5nZVsxXVswXSwgcmVjdFJhbmdlWzBdWzFdLCByZWN0UmFuZ2VbMV1bMV0pKTsKICB1cGRhdGVDb3ZlckFmdGVyQ3JlYXRpb24oY29udHJvbGxlciwgY292ZXIpOwogIHRyaWdnZXIoY29udHJvbGxlciwgewogICAgaXNFbmQ6IGZhbHNlCiAgfSk7Cn0KCmZ1bmN0aW9uIGRyaWZ0UG9seWdvbihjb250cm9sbGVyLCBjb3ZlciwgZHgsIGR5LCBlKSB7CiAgdmFyIHJhbmdlID0gY292ZXIuX19icnVzaE9wdGlvbi5yYW5nZTsKICB2YXIgbG9jYWxEZWx0YSA9IHRvTG9jYWxEZWx0YShjb250cm9sbGVyLCBkeCwgZHkpOwogIGVhY2gocmFuZ2UsIGZ1bmN0aW9uIChwb2ludCkgewogICAgcG9pbnRbMF0gKz0gbG9jYWxEZWx0YVswXTsKICAgIHBvaW50WzFdICs9IGxvY2FsRGVsdGFbMV07CiAgfSk7CiAgdXBkYXRlQ292ZXJBZnRlckNyZWF0aW9uKGNvbnRyb2xsZXIsIGNvdmVyKTsKICB0cmlnZ2VyKGNvbnRyb2xsZXIsIHsKICAgIGlzRW5kOiBmYWxzZQogIH0pOwp9CgpmdW5jdGlvbiB0b0xvY2FsRGVsdGEoY29udHJvbGxlciwgZHgsIGR5KSB7CiAgdmFyIHRoaXNHcm91cCA9IGNvbnRyb2xsZXIuZ3JvdXA7CiAgdmFyIGxvY2FsRCA9IHRoaXNHcm91cC50cmFuc2Zvcm1Db29yZFRvTG9jYWwoZHgsIGR5KTsKICB2YXIgbG9jYWxaZXJvID0gdGhpc0dyb3VwLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbCgwLCAwKTsKICByZXR1cm4gW2xvY2FsRFswXSAtIGxvY2FsWmVyb1swXSwgbG9jYWxEWzFdIC0gbG9jYWxaZXJvWzFdXTsKfQoKZnVuY3Rpb24gY2xpcEJ5UGFuZWwoY29udHJvbGxlciwgY292ZXIsIGRhdGEpIHsKICB2YXIgcGFuZWwgPSBnZXRQYW5lbEJ5Q292ZXIoY29udHJvbGxlciwgY292ZXIpOwogIHJldHVybiBwYW5lbCAmJiBwYW5lbCAhPT0gdHJ1ZSA/IHBhbmVsLmNsaXBQYXRoKGRhdGEsIGNvbnRyb2xsZXIuX3RyYW5zZm9ybSkgOiB6clV0aWwuY2xvbmUoZGF0YSk7Cn0KCmZ1bmN0aW9uIHBvaW50c1RvUmVjdChwb2ludHMpIHsKICB2YXIgeG1pbiA9IG1hdGhNaW4ocG9pbnRzWzBdWzBdLCBwb2ludHNbMV1bMF0pOwogIHZhciB5bWluID0gbWF0aE1pbihwb2ludHNbMF1bMV0sIHBvaW50c1sxXVsxXSk7CiAgdmFyIHhtYXggPSBtYXRoTWF4KHBvaW50c1swXVswXSwgcG9pbnRzWzFdWzBdKTsKICB2YXIgeW1heCA9IG1hdGhNYXgocG9pbnRzWzBdWzFdLCBwb2ludHNbMV1bMV0pOwogIHJldHVybiB7CiAgICB4OiB4bWluLAogICAgeTogeW1pbiwKICAgIHdpZHRoOiB4bWF4IC0geG1pbiwKICAgIGhlaWdodDogeW1heCAtIHltaW4KICB9Owp9CgpmdW5jdGlvbiByZXNldEN1cnNvcihjb250cm9sbGVyLCBlLCBsb2NhbEN1cnNvclBvaW50KSB7CiAgaWYgKCAvLyBDaGVjayBhY3RpdmUKICAhY29udHJvbGxlci5fYnJ1c2hUeXBlIC8vIHJlc2V0Q3Vyc29yIHNob3VsZCBiZSBhbHdheXMgY2FsbGVkIHdoZW4gbW91c2UgaXMgaW4genIgYXJlYSwKICAvLyBidXQgbm90IGNhbGxlZCB3aGVuIG1vdXNlIGlzIG91dCBvZiB6ciBhcmVhIHRvIGF2b2lkIGJhZCBpbmZsdWVuY2UKICAvLyBpZiBgbW91c2Vtb3ZlYCwgYG1vdXNldXBgIGFyZSB0cmlnZ2VyZWQgZnJvbSBgZG9jdW1lbnRgIGV2ZW50LgogIHx8IGlzT3V0c2lkZVpyQXJlYShjb250cm9sbGVyLCBlKSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIHpyID0gY29udHJvbGxlci5fenI7CiAgdmFyIGNvdmVycyA9IGNvbnRyb2xsZXIuX2NvdmVyczsKICB2YXIgY3VyclBhbmVsID0gZ2V0UGFuZWxCeVBvaW50KGNvbnRyb2xsZXIsIGUsIGxvY2FsQ3Vyc29yUG9pbnQpOyAvLyBDaGVjayB3aGV0aGVyIGluIGNvdmVycy4KCiAgaWYgKCFjb250cm9sbGVyLl9kcmFnZ2luZykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3ZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGJydXNoT3B0aW9uID0gY292ZXJzW2ldLl9fYnJ1c2hPcHRpb247CgogICAgICBpZiAoY3VyclBhbmVsICYmIChjdXJyUGFuZWwgPT09IHRydWUgfHwgYnJ1c2hPcHRpb24ucGFuZWxJZCA9PT0gY3VyclBhbmVsLnBhbmVsSWQpICYmIGNvdmVyUmVuZGVyZXJzW2JydXNoT3B0aW9uLmJydXNoVHlwZV0uY29udGFpbihjb3ZlcnNbaV0sIGxvY2FsQ3Vyc29yUG9pbnRbMF0sIGxvY2FsQ3Vyc29yUG9pbnRbMV0pKSB7CiAgICAgICAgLy8gVXNlIGN1cnNvciBzdHlsZSBzZXQgb24gY292ZXIuCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgfQoKICBjdXJyUGFuZWwgJiYgenIuc2V0Q3Vyc29yU3R5bGUoJ2Nyb3NzaGFpcicpOwp9CgpmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKSB7CiAgdmFyIHJhd0UgPSBlLmV2ZW50OwogIHJhd0UucHJldmVudERlZmF1bHQgJiYgcmF3RS5wcmV2ZW50RGVmYXVsdCgpOwp9CgpmdW5jdGlvbiBtYWluU2hhcGVDb250YWluKGNvdmVyLCB4LCB5KSB7CiAgcmV0dXJuIGNvdmVyLmNoaWxkT2ZOYW1lKCdtYWluJykuY29udGFpbih4LCB5KTsKfQoKZnVuY3Rpb24gdXBkYXRlQ292ZXJCeU1vdXNlKGNvbnRyb2xsZXIsIGUsIGxvY2FsQ3Vyc29yUG9pbnQsIGlzRW5kKSB7CiAgdmFyIGNyZWF0aW5nQ292ZXIgPSBjb250cm9sbGVyLl9jcmVhdGluZ0NvdmVyOwogIHZhciBwYW5lbCA9IGNvbnRyb2xsZXIuX2NyZWF0aW5nUGFuZWw7CiAgdmFyIHRoaXNCcnVzaE9wdGlvbiA9IGNvbnRyb2xsZXIuX2JydXNoT3B0aW9uOwogIHZhciBldmVudFBhcmFtczsKCiAgY29udHJvbGxlci5fdHJhY2sucHVzaChsb2NhbEN1cnNvclBvaW50LnNsaWNlKCkpOwoKICBpZiAoc2hvdWxkU2hvd0NvdmVyKGNvbnRyb2xsZXIpIHx8IGNyZWF0aW5nQ292ZXIpIHsKICAgIGlmIChwYW5lbCAmJiAhY3JlYXRpbmdDb3ZlcikgewogICAgICB0aGlzQnJ1c2hPcHRpb24uYnJ1c2hNb2RlID09PSAnc2luZ2xlJyAmJiBjbGVhckNvdmVycyhjb250cm9sbGVyKTsKICAgICAgdmFyIGJydXNoT3B0aW9uID0genJVdGlsLmNsb25lKHRoaXNCcnVzaE9wdGlvbik7CiAgICAgIGJydXNoT3B0aW9uLmJydXNoVHlwZSA9IGRldGVybWluZUJydXNoVHlwZShicnVzaE9wdGlvbi5icnVzaFR5cGUsIHBhbmVsKTsKICAgICAgYnJ1c2hPcHRpb24ucGFuZWxJZCA9IHBhbmVsID09PSB0cnVlID8gbnVsbCA6IHBhbmVsLnBhbmVsSWQ7CiAgICAgIGNyZWF0aW5nQ292ZXIgPSBjb250cm9sbGVyLl9jcmVhdGluZ0NvdmVyID0gY3JlYXRlQ292ZXIoY29udHJvbGxlciwgYnJ1c2hPcHRpb24pOwoKICAgICAgY29udHJvbGxlci5fY292ZXJzLnB1c2goY3JlYXRpbmdDb3Zlcik7CiAgICB9CgogICAgaWYgKGNyZWF0aW5nQ292ZXIpIHsKICAgICAgdmFyIGNvdmVyUmVuZGVyZXIgPSBjb3ZlclJlbmRlcmVyc1tkZXRlcm1pbmVCcnVzaFR5cGUoY29udHJvbGxlci5fYnJ1c2hUeXBlLCBwYW5lbCldOwogICAgICB2YXIgY292ZXJCcnVzaE9wdGlvbiA9IGNyZWF0aW5nQ292ZXIuX19icnVzaE9wdGlvbjsKICAgICAgY292ZXJCcnVzaE9wdGlvbi5yYW5nZSA9IGNvdmVyUmVuZGVyZXIuZ2V0Q3JlYXRpbmdSYW5nZShjbGlwQnlQYW5lbChjb250cm9sbGVyLCBjcmVhdGluZ0NvdmVyLCBjb250cm9sbGVyLl90cmFjaykpOwoKICAgICAgaWYgKGlzRW5kKSB7CiAgICAgICAgZW5kQ3JlYXRpbmcoY29udHJvbGxlciwgY3JlYXRpbmdDb3Zlcik7CiAgICAgICAgY292ZXJSZW5kZXJlci51cGRhdGVDb21tb24oY29udHJvbGxlciwgY3JlYXRpbmdDb3Zlcik7CiAgICAgIH0KCiAgICAgIHVwZGF0ZUNvdmVyU2hhcGUoY29udHJvbGxlciwgY3JlYXRpbmdDb3Zlcik7CiAgICAgIGV2ZW50UGFyYW1zID0gewogICAgICAgIGlzRW5kOiBpc0VuZAogICAgICB9OwogICAgfQogIH0gZWxzZSBpZiAoaXNFbmQgJiYgdGhpc0JydXNoT3B0aW9uLmJydXNoTW9kZSA9PT0gJ3NpbmdsZScgJiYgdGhpc0JydXNoT3B0aW9uLnJlbW92ZU9uQ2xpY2spIHsKICAgIC8vIEhlbHAgdXNlciB0byByZW1vdmUgY292ZXJzIGVhc2lseSwgb25seSBieSBhIHRpbnkgZHJhZywgaW4gJ3NpbmdsZScgbW9kZS4KICAgIC8vIEJ1dCBhIHNpbmdsZSBjbGljayBkbyBub3QgY2xlYXIgY292ZXJzLCBiZWNhdXNlIHVzZXIgbWF5IGhhdmUgY2FzdWFsCiAgICAvLyBjbGlja3MgKGZvciBleGFtcGxlLCBjbGljayBvbiBvdGhlciBjb21wb25lbnQgYW5kIGRvIG5vdCBleHBlY3QgY292ZXJzCiAgICAvLyBkaXNhcHBlYXIpLgogICAgLy8gT25seSBzb21lIGNvdmVyIHJlbW92ZWQsIHRyaWdnZXIgYWN0aW9uLCBidXQgbm90IGV2ZXJ5IGNsaWNrIHRyaWdnZXIgYWN0aW9uLgogICAgaWYgKGdldFBhbmVsQnlQb2ludChjb250cm9sbGVyLCBlLCBsb2NhbEN1cnNvclBvaW50KSAmJiBjbGVhckNvdmVycyhjb250cm9sbGVyKSkgewogICAgICBldmVudFBhcmFtcyA9IHsKICAgICAgICBpc0VuZDogaXNFbmQsCiAgICAgICAgcmVtb3ZlT25DbGljazogdHJ1ZQogICAgICB9OwogICAgfQogIH0KCiAgcmV0dXJuIGV2ZW50UGFyYW1zOwp9CgpmdW5jdGlvbiBkZXRlcm1pbmVCcnVzaFR5cGUoYnJ1c2hUeXBlLCBwYW5lbCkgewogIGlmIChicnVzaFR5cGUgPT09ICdhdXRvJykgewogICAgcmV0dXJuIHBhbmVsLmRlZmF1bHRCcnVzaFR5cGU7CiAgfQoKICByZXR1cm4gYnJ1c2hUeXBlOwp9Cgp2YXIgcG9pbnRlckhhbmRsZXJzID0gewogIG1vdXNlZG93bjogZnVuY3Rpb24gbW91c2Vkb3duKGUpIHsKICAgIGlmICh0aGlzLl9kcmFnZ2luZykgewogICAgICAvLyBJbiBjYXNlIHNvbWUgYnJvd3NlciBkbyBub3Qgc3VwcG9ydCBnbG9iYWxPdXQsCiAgICAgIC8vIGFuZCByZWxlYXNlIG1vc2Ugb3V0IHNpZGUgdGhlIGJyb3dzZXIuCiAgICAgIGhhbmRsZURyYWdFbmQodGhpcywgZSk7CiAgICB9IGVsc2UgaWYgKCFlLnRhcmdldCB8fCAhZS50YXJnZXQuZHJhZ2dhYmxlKSB7CiAgICAgIHByZXZlbnREZWZhdWx0KGUpOwogICAgICB2YXIgbG9jYWxDdXJzb3JQb2ludCA9IHRoaXMuZ3JvdXAudHJhbnNmb3JtQ29vcmRUb0xvY2FsKGUub2Zmc2V0WCwgZS5vZmZzZXRZKTsKICAgICAgdGhpcy5fY3JlYXRpbmdDb3ZlciA9IG51bGw7CiAgICAgIHZhciBwYW5lbCA9IHRoaXMuX2NyZWF0aW5nUGFuZWwgPSBnZXRQYW5lbEJ5UG9pbnQodGhpcywgZSwgbG9jYWxDdXJzb3JQb2ludCk7CgogICAgICBpZiAocGFuZWwpIHsKICAgICAgICB0aGlzLl9kcmFnZ2luZyA9IHRydWU7CiAgICAgICAgdGhpcy5fdHJhY2sgPSBbbG9jYWxDdXJzb3JQb2ludC5zbGljZSgpXTsKICAgICAgfQogICAgfQogIH0sCiAgbW91c2Vtb3ZlOiBmdW5jdGlvbiBtb3VzZW1vdmUoZSkgewogICAgdmFyIHggPSBlLm9mZnNldFg7CiAgICB2YXIgeSA9IGUub2Zmc2V0WTsKICAgIHZhciBsb2NhbEN1cnNvclBvaW50ID0gdGhpcy5ncm91cC50cmFuc2Zvcm1Db29yZFRvTG9jYWwoeCwgeSk7CiAgICByZXNldEN1cnNvcih0aGlzLCBlLCBsb2NhbEN1cnNvclBvaW50KTsKCiAgICBpZiAodGhpcy5fZHJhZ2dpbmcpIHsKICAgICAgcHJldmVudERlZmF1bHQoZSk7CiAgICAgIHZhciBldmVudFBhcmFtcyA9IHVwZGF0ZUNvdmVyQnlNb3VzZSh0aGlzLCBlLCBsb2NhbEN1cnNvclBvaW50LCBmYWxzZSk7CiAgICAgIGV2ZW50UGFyYW1zICYmIHRyaWdnZXIodGhpcywgZXZlbnRQYXJhbXMpOwogICAgfQogIH0sCiAgbW91c2V1cDogZnVuY3Rpb24gbW91c2V1cChlKSB7CiAgICBoYW5kbGVEcmFnRW5kKHRoaXMsIGUpOwogIH0KfTsKCmZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoY29udHJvbGxlciwgZSkgewogIGlmIChjb250cm9sbGVyLl9kcmFnZ2luZykgewogICAgcHJldmVudERlZmF1bHQoZSk7CiAgICB2YXIgeCA9IGUub2Zmc2V0WDsKICAgIHZhciB5ID0gZS5vZmZzZXRZOwogICAgdmFyIGxvY2FsQ3Vyc29yUG9pbnQgPSBjb250cm9sbGVyLmdyb3VwLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbCh4LCB5KTsKICAgIHZhciBldmVudFBhcmFtcyA9IHVwZGF0ZUNvdmVyQnlNb3VzZShjb250cm9sbGVyLCBlLCBsb2NhbEN1cnNvclBvaW50LCB0cnVlKTsKICAgIGNvbnRyb2xsZXIuX2RyYWdnaW5nID0gZmFsc2U7CiAgICBjb250cm9sbGVyLl90cmFjayA9IFtdOwogICAgY29udHJvbGxlci5fY3JlYXRpbmdDb3ZlciA9IG51bGw7IC8vIHRyaWdnZXIgZXZlbnQgc2hvdWxlIGJlIGF0IGZpbmFsLCBhZnRlciBwcm9jZWR1cmUgd2lsbCBiZSBuZXN0ZWQuCgogICAgZXZlbnRQYXJhbXMgJiYgdHJpZ2dlcihjb250cm9sbGVyLCBldmVudFBhcmFtcyk7CiAgfQp9CgpmdW5jdGlvbiBpc091dHNpZGVackFyZWEoY29udHJvbGxlciwgeCwgeSkgewogIHZhciB6ciA9IGNvbnRyb2xsZXIuX3pyOwogIHJldHVybiB4IDwgMCB8fCB4ID4genIuZ2V0V2lkdGgoKSB8fCB5IDwgMCB8fCB5ID4genIuZ2V0SGVpZ2h0KCk7Cn0KLyoqCiAqIGtleTogYnJ1c2hUeXBlCiAqIEB0eXBlIHtPYmplY3R9CiAqLwoKCnZhciBjb3ZlclJlbmRlcmVycyA9IHsKICBsaW5lWDogZ2V0TGluZVJlbmRlcmVyKDApLAogIGxpbmVZOiBnZXRMaW5lUmVuZGVyZXIoMSksCiAgcmVjdDogewogICAgY3JlYXRlQ292ZXI6IGZ1bmN0aW9uIGNyZWF0ZUNvdmVyKGNvbnRyb2xsZXIsIGJydXNoT3B0aW9uKSB7CiAgICAgIHJldHVybiBjcmVhdGVCYXNlUmVjdENvdmVyKGN1cnJ5KGRyaWZ0UmVjdCwgZnVuY3Rpb24gKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHJhbmdlOwogICAgICB9LCBmdW5jdGlvbiAocmFuZ2UpIHsKICAgICAgICByZXR1cm4gcmFuZ2U7CiAgICAgIH0pLCBjb250cm9sbGVyLCBicnVzaE9wdGlvbiwgWyd3JywgJ2UnLCAnbicsICdzJywgJ3NlJywgJ3N3JywgJ25lJywgJ253J10pOwogICAgfSwKICAgIGdldENyZWF0aW5nUmFuZ2U6IGZ1bmN0aW9uIGdldENyZWF0aW5nUmFuZ2UobG9jYWxUcmFjaykgewogICAgICB2YXIgZW5kcyA9IGdldFRyYWNrRW5kcyhsb2NhbFRyYWNrKTsKICAgICAgcmV0dXJuIGZvcm1hdFJlY3RSYW5nZShlbmRzWzFdWzBdLCBlbmRzWzFdWzFdLCBlbmRzWzBdWzBdLCBlbmRzWzBdWzFdKTsKICAgIH0sCiAgICB1cGRhdGVDb3ZlclNoYXBlOiBmdW5jdGlvbiB1cGRhdGVDb3ZlclNoYXBlKGNvbnRyb2xsZXIsIGNvdmVyLCBsb2NhbFJhbmdlLCBicnVzaE9wdGlvbikgewogICAgICB1cGRhdGVCYXNlUmVjdChjb250cm9sbGVyLCBjb3ZlciwgbG9jYWxSYW5nZSwgYnJ1c2hPcHRpb24pOwogICAgfSwKICAgIHVwZGF0ZUNvbW1vbjogdXBkYXRlQ29tbW9uLAogICAgY29udGFpbjogbWFpblNoYXBlQ29udGFpbgogIH0sCiAgcG9seWdvbjogewogICAgY3JlYXRlQ292ZXI6IGZ1bmN0aW9uIGNyZWF0ZUNvdmVyKGNvbnRyb2xsZXIsIGJydXNoT3B0aW9uKSB7CiAgICAgIHZhciBjb3ZlciA9IG5ldyBncmFwaGljLkdyb3VwKCk7IC8vIERvIG5vdCB1c2UgZ3JhcGhpYy5Qb2x5Z29uIGJlY2F1c2UgZ3JhcGhpYy5Qb2x5bGluZSBkbyBub3QgY2xvc2UgdGhlCiAgICAgIC8vIGJvcmRlciBvZiB0aGUgc2hhcGUgd2hlbiBkcmF3aW5nLCB3aGljaCBpcyBhIGJldHRlciBleHBlcmllbmNlIGZvciB1c2VyLgoKICAgICAgY292ZXIuYWRkKG5ldyBncmFwaGljLlBvbHlsaW5lKHsKICAgICAgICBuYW1lOiAnbWFpbicsCiAgICAgICAgc3R5bGU6IG1ha2VTdHlsZShicnVzaE9wdGlvbiksCiAgICAgICAgc2lsZW50OiB0cnVlCiAgICAgIH0pKTsKICAgICAgcmV0dXJuIGNvdmVyOwogICAgfSwKICAgIGdldENyZWF0aW5nUmFuZ2U6IGZ1bmN0aW9uIGdldENyZWF0aW5nUmFuZ2UobG9jYWxUcmFjaykgewogICAgICByZXR1cm4gbG9jYWxUcmFjazsKICAgIH0sCiAgICBlbmRDcmVhdGluZzogZnVuY3Rpb24gZW5kQ3JlYXRpbmcoY29udHJvbGxlciwgY292ZXIpIHsKICAgICAgY292ZXIucmVtb3ZlKGNvdmVyLmNoaWxkQXQoMCkpOyAvLyBVc2UgZ3JhcGhpYy5Qb2x5Z29uIGNsb3NlIHRoZSBzaGFwZS4KCiAgICAgIGNvdmVyLmFkZChuZXcgZ3JhcGhpYy5Qb2x5Z29uKHsKICAgICAgICBuYW1lOiAnbWFpbicsCiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLAogICAgICAgIGRyaWZ0OiBjdXJyeShkcmlmdFBvbHlnb24sIGNvbnRyb2xsZXIsIGNvdmVyKSwKICAgICAgICBvbmRyYWdlbmQ6IGN1cnJ5KHRyaWdnZXIsIGNvbnRyb2xsZXIsIHsKICAgICAgICAgIGlzRW5kOiB0cnVlCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgfSwKICAgIHVwZGF0ZUNvdmVyU2hhcGU6IGZ1bmN0aW9uIHVwZGF0ZUNvdmVyU2hhcGUoY29udHJvbGxlciwgY292ZXIsIGxvY2FsUmFuZ2UsIGJydXNoT3B0aW9uKSB7CiAgICAgIGNvdmVyLmNoaWxkQXQoMCkuc2V0U2hhcGUoewogICAgICAgIHBvaW50czogY2xpcEJ5UGFuZWwoY29udHJvbGxlciwgY292ZXIsIGxvY2FsUmFuZ2UpCiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUNvbW1vbjogdXBkYXRlQ29tbW9uLAogICAgY29udGFpbjogbWFpblNoYXBlQ29udGFpbgogIH0KfTsKCmZ1bmN0aW9uIGdldExpbmVSZW5kZXJlcih4eUluZGV4KSB7CiAgcmV0dXJuIHsKICAgIGNyZWF0ZUNvdmVyOiBmdW5jdGlvbiBjcmVhdGVDb3Zlcihjb250cm9sbGVyLCBicnVzaE9wdGlvbikgewogICAgICByZXR1cm4gY3JlYXRlQmFzZVJlY3RDb3ZlcihjdXJyeShkcmlmdFJlY3QsIGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgIHZhciByZWN0UmFuZ2UgPSBbcmFuZ2UsIFswLCAxMDBdXTsKICAgICAgICB4eUluZGV4ICYmIHJlY3RSYW5nZS5yZXZlcnNlKCk7CiAgICAgICAgcmV0dXJuIHJlY3RSYW5nZTsKICAgICAgfSwgZnVuY3Rpb24gKHJlY3RSYW5nZSkgewogICAgICAgIHJldHVybiByZWN0UmFuZ2VbeHlJbmRleF07CiAgICAgIH0pLCBjb250cm9sbGVyLCBicnVzaE9wdGlvbiwgW1sndycsICdlJ10sIFsnbicsICdzJ11dW3h5SW5kZXhdKTsKICAgIH0sCiAgICBnZXRDcmVhdGluZ1JhbmdlOiBmdW5jdGlvbiBnZXRDcmVhdGluZ1JhbmdlKGxvY2FsVHJhY2spIHsKICAgICAgdmFyIGVuZHMgPSBnZXRUcmFja0VuZHMobG9jYWxUcmFjayk7CiAgICAgIHZhciBtaW4gPSBtYXRoTWluKGVuZHNbMF1beHlJbmRleF0sIGVuZHNbMV1beHlJbmRleF0pOwogICAgICB2YXIgbWF4ID0gbWF0aE1heChlbmRzWzBdW3h5SW5kZXhdLCBlbmRzWzFdW3h5SW5kZXhdKTsKICAgICAgcmV0dXJuIFttaW4sIG1heF07CiAgICB9LAogICAgdXBkYXRlQ292ZXJTaGFwZTogZnVuY3Rpb24gdXBkYXRlQ292ZXJTaGFwZShjb250cm9sbGVyLCBjb3ZlciwgbG9jYWxSYW5nZSwgYnJ1c2hPcHRpb24pIHsKICAgICAgdmFyIG90aGVyRXh0ZW50OyAvLyBJZiBicnVzaFdpZHRoIG5vdCBzcGVjaWZpZWQsIGZpdCB0aGUgcGFuZWwuCgogICAgICB2YXIgcGFuZWwgPSBnZXRQYW5lbEJ5Q292ZXIoY29udHJvbGxlciwgY292ZXIpOwoKICAgICAgaWYgKHBhbmVsICE9PSB0cnVlICYmIHBhbmVsLmdldExpbmVhckJydXNoT3RoZXJFeHRlbnQpIHsKICAgICAgICBvdGhlckV4dGVudCA9IHBhbmVsLmdldExpbmVhckJydXNoT3RoZXJFeHRlbnQoeHlJbmRleCwgY29udHJvbGxlci5fdHJhbnNmb3JtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgenIgPSBjb250cm9sbGVyLl96cjsKICAgICAgICBvdGhlckV4dGVudCA9IFswLCBbenIuZ2V0V2lkdGgoKSwgenIuZ2V0SGVpZ2h0KCldWzEgLSB4eUluZGV4XV07CiAgICAgIH0KCiAgICAgIHZhciByZWN0UmFuZ2UgPSBbbG9jYWxSYW5nZSwgb3RoZXJFeHRlbnRdOwogICAgICB4eUluZGV4ICYmIHJlY3RSYW5nZS5yZXZlcnNlKCk7CiAgICAgIHVwZGF0ZUJhc2VSZWN0KGNvbnRyb2xsZXIsIGNvdmVyLCByZWN0UmFuZ2UsIGJydXNoT3B0aW9uKTsKICAgIH0sCiAgICB1cGRhdGVDb21tb246IHVwZGF0ZUNvbW1vbiwKICAgIGNvbnRhaW46IG1haW5TaGFwZUNvbnRhaW4KICB9Owp9Cgp2YXIgX2RlZmF1bHQgPSBCcnVzaENvbnRyb2xsZXI7Cm1vZHVsZS5leHBvcnRzID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/component/helper/BrushController.js"],"names":["_config","require","__DEV__","zrUtil","Eventful","graphic","interactionMutex","DataDiffer","curry","each","map","mathMin","Math","min","mathMax","max","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","w","e","n","s","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","lineWidth","stroke","fill","transformable","brushMode","removeOnClick","baseUID","BrushController","zr","call","_zr","group","Group","_brushType","_brushOption","_panels","_track","_dragging","_covers","_creatingCover","_creatingPanel","_enableGlobalPan","_uid","_handlers","pointerHandlers","handler","eventName","bind","prototype","constructor","enableBrush","brushOption","doDisableBrush","brushType","doEnableBrush","setPanels","panelOpts","length","panels","panelId","clone","mount","opt","enableGlobalPan","thisGroup","add","attr","position","rotation","scale","_transform","getLocalTransform","eachCover","cb","context","updateCovers","brushOptionList","merge","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","oldGetKey","getKey","addOrUpdate","update","remove","execute","index","id","cover","__brushOption","newIndex","oldIndex","newBrushOption","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","dispose","off","mixin","take","mountHandlers","release","unmountHandlers","handlers","on","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","range","z","traverse","el","z2","updateCommon","getPanelByPoint","localCursorPoint","panel","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","trigger","areas","isEnd","shouldShowCover","track","p2","p1","dx","dy","dist","getTrackEnds","tail","createBaseRectCover","doDrift","edgeNames","Rect","name","style","makeStyle","silent","draggable","cursor","drift","ondragend","opacity","invisible","updateBaseRect","localRange","handleSize","x","y","xa","ya","x2","y2","x2a","y2a","width","height","widtha","heighta","updateRectShape","mainEl","childAt","useStyle","childOfName","globalDir","getGlobalDirection","h","setShape","pointsToRect","clipByPanel","defaults","strokeNoScale","formatRectRange","getTransform","localDirection","split","reverse","join","inverseMap","left","right","top","bottom","transformDirection","driftRect","toRectRange","fromRectRange","rectRange","localDelta","toLocalDelta","namePart","ind","driftPolygon","point","localD","transformCoordToLocal","localZero","data","clipPath","points","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","i","contain","setCursorStyle","preventDefault","rawE","event","mainShapeContain","updateCoverByMouse","thisBrushOption","eventParams","push","slice","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","target","offsetX","offsetY","mousemove","mouseup","getWidth","getHeight","lineX","getLineRenderer","lineY","rect","localTrack","ends","polygon","Polyline","Polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","_default","module","exports"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar interactionMutex = require(\"./interactionMutex\");\n\nvar DataDiffer = require(\"../../data/DataDiffer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar map = zrUtil.map;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(0,0,0,0.3)',\n    fill: 'rgba(0,0,0,0.1)'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * @alias module:echarts/component/helper/BrushController\n * @constructor\n * @mixin {module:zrender/mixin/Eventful}\n * @event module:echarts/component/helper/BrushController#brush\n *        params:\n *            areas: Array.<Array>, coord relates to container group,\n *                                    If no container specified, to global.\n *            opt {\n *                isEnd: boolean,\n *                removeOnClick: boolean\n *            }\n *\n * @param {module:zrender/zrender~ZRender} zr\n */\n\nfunction BrushController(zr) {\n  Eventful.call(this);\n  /**\n   * @type {module:zrender/zrender~ZRender}\n   * @private\n   */\n\n  this._zr = zr;\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n\n  this.group = new graphic.Group();\n  /**\n   * Only for drawing (after enabledBrush).\n   *     'line', 'rect', 'polygon' or false\n   *     If passing false/null/undefined, disable brush.\n   *     If passing 'auto', determined by panel.defaultBrushType\n   * @private\n   * @type {string}\n   */\n\n  this._brushType;\n  /**\n   * Only for drawing (after enabledBrush).\n   *\n   * @private\n   * @type {Object}\n   */\n\n  this._brushOption;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._panels;\n  /**\n   * @private\n   * @type {Array.<nubmer>}\n   */\n\n  this._track = [];\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._dragging;\n  /**\n   * @private\n   * @type {Array}\n   */\n\n  this._covers = [];\n  /**\n   * @private\n   * @type {moudule:zrender/container/Group}\n   */\n\n  this._creatingCover;\n  /**\n   * `true` means global panel\n   * @private\n   * @type {module:zrender/container/Group|boolean}\n   */\n\n  this._creatingPanel;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._enableGlobalPan;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this._uid = 'brushController_' + baseUID++;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._handlers = {};\n  each(pointerHandlers, function (handler, eventName) {\n    this._handlers[eventName] = zrUtil.bind(handler, this);\n  }, this);\n}\n\nBrushController.prototype = {\n  constructor: BrushController,\n\n  /**\n   * If set to null/undefined/false, select disabled.\n   * @param {Object} brushOption\n   * @param {string|boolean} brushOption.brushType 'line', 'rect', 'polygon' or false\n   *                          If passing false/null/undefined, disable brush.\n   *                          If passing 'auto', determined by panel.defaultBrushType.\n   *                              ('auto' can not be used in global panel)\n   * @param {number} [brushOption.brushMode='single'] 'single' or 'multiple'\n   * @param {boolean} [brushOption.transformable=true]\n   * @param {boolean} [brushOption.removeOnClick=false]\n   * @param {Object} [brushOption.brushStyle]\n   * @param {number} [brushOption.brushStyle.width]\n   * @param {number} [brushOption.brushStyle.lineWidth]\n   * @param {string} [brushOption.brushStyle.stroke]\n   * @param {string} [brushOption.brushStyle.fill]\n   * @param {number} [brushOption.z]\n   */\n  enableBrush: function (brushOption) {\n    this._brushType && doDisableBrush(this);\n    brushOption.brushType && doEnableBrush(this, brushOption);\n    return this;\n  },\n\n  /**\n   * @param {Array.<Object>} panelOpts If not pass, it is global brush.\n   *        Each items: {\n   *            panelId, // mandatory.\n   *            clipPath, // mandatory. function.\n   *            isTargetByCursor, // mandatory. function.\n   *            defaultBrushType, // optional, only used when brushType is 'auto'.\n   *            getLinearBrushOtherExtent, // optional. function.\n   *        }\n   */\n  setPanels: function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels = this._panels = {};\n      zrUtil.each(panelOpts, function (panelOpts) {\n        panels[panelOpts.panelId] = zrUtil.clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param {Object} [opt]\n   * @return {boolean} [opt.enableGlobalPan=false]\n   */\n  mount: function (opt) {\n    opt = opt || {};\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      position: opt.position || [0, 0],\n      rotation: opt.rotation || 0,\n      scale: opt.scale || [1, 1]\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  },\n  eachCover: function (cb, context) {\n    each(this._covers, cb, context);\n  },\n\n  /**\n   * Update covers.\n   * @param {Array.<Object>} brushOptionList Like:\n   *        [\n   *            {id: 'xx', brushType: 'line', range: [23, 44], brushStyle, transformable},\n   *            {id: 'yy', brushType: 'rect', range: [[23, 44], [23, 54]]},\n   *            ...\n   *        ]\n   *        `brushType` is required in each cover info. (can not be 'auto')\n   *        `id` is not mandatory.\n   *        `brushStyle`, `transformable` is not mandatory, use DEFAULT_BRUSH_OPT by default.\n   *        If brushOptionList is null/undefined, all covers removed.\n   */\n  updateCovers: function (brushOptionList) {\n    brushOptionList = zrUtil.map(brushOptionList, function (brushOption) {\n      return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, brushOptionList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushOption = brushOptionList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushOption, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushOption));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  },\n  unmount: function () {\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    return this;\n  },\n  dispose: function () {\n    this.unmount();\n    this.off();\n  }\n};\nzrUtil.mixin(BrushController, Eventful);\n\nfunction doEnableBrush(controller, brushOption) {\n  var zr = controller._zr; // Consider roam, which takes globalPan too.\n\n  if (!controller._enableGlobalPan) {\n    interactionMutex.take(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  }\n\n  mountHandlers(zr, controller._handlers);\n  controller._brushType = brushOption.brushType;\n  controller._brushOption = zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT), brushOption, true);\n}\n\nfunction doDisableBrush(controller) {\n  var zr = controller._zr;\n  interactionMutex.release(zr, MUTEX_RESOURCE_KEY, controller._uid);\n  unmountHandlers(zr, controller._handlers);\n  controller._brushType = controller._brushOption = null;\n}\n\nfunction mountHandlers(zr, handlers) {\n  each(handlers, function (handler, eventName) {\n    zr.on(eventName, handler);\n  });\n}\n\nfunction unmountHandlers(zr, handlers) {\n  each(handlers, function (handler, eventName) {\n    zr.off(eventName, handler);\n  });\n}\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return true; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : true;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = zrUtil.clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', areas, {\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\nfunction createBaseRectCover(doDrift, controller, brushOption, edgeNames) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(doDrift, controller, cover, 'nswe'),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNames, function (name) {\n    cover.add(new graphic.Rect({\n      name: name,\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(doDrift, controller, cover, name),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each(['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw'], function (name) {\n    var el = cover.childOfName(name);\n    var globalDir = getGlobalDirection(controller, name);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return zrUtil.defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], // x range\n  [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection(controller, localDirection) {\n  if (localDirection.length > 1) {\n    localDirection = localDirection.split('');\n    var globalDir = [getGlobalDirection(controller, localDirection[0]), getGlobalDirection(controller, localDirection[1])];\n    (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n    return globalDir.join('');\n  } else {\n    var map = {\n      w: 'left',\n      e: 'right',\n      n: 'top',\n      s: 'bottom'\n    };\n    var inverseMap = {\n      left: 'w',\n      right: 'e',\n      top: 'n',\n      bottom: 's'\n    };\n    var globalDir = graphic.transformDirection(map[localDirection], getTransform(controller));\n    return inverseMap[globalDir];\n  }\n}\n\nfunction driftRect(toRectRange, fromRectRange, controller, cover, name, dx, dy, e) {\n  var brushOption = cover.__brushOption;\n  var rectRange = toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(name.split(''), function (namePart) {\n    var ind = DIRECTION_MAP[namePart];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy, e) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== true ? panel.clipPath(data, controller._transform) : zrUtil.clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === true || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = zrUtil.clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === true ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mose out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n * @type {Object}\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        return range;\n      }, function (range) {\n        return range;\n      }), controller, brushOption, ['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw']);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover(curry(driftRect, function (range) {\n        var rectRange = [range, [0, 100]];\n        xyIndex && rectRange.reverse();\n        return rectRange;\n      }, function (rectRange) {\n        return rectRange[xyIndex];\n      }), controller, brushOption, [['w', 'e'], ['n', 's']][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== true && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex, controller._transform);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nvar _default = BrushController;\nmodule.exports = _default;"]}]}