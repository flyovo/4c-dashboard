{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/bar/PictorialBarView.js","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/bar/PictorialBarView.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyIpOwoKLyoKKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lCiogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24KKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlCiogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQoqICJMaWNlbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UKKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAoqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwoqIHVuZGVyIHRoZSBMaWNlbnNlLgoqLwp2YXIgZWNoYXJ0cyA9IHJlcXVpcmUoIi4uLy4uL2VjaGFydHMiKTsKCnZhciB6clV0aWwgPSByZXF1aXJlKCJ6cmVuZGVyL2xpYi9jb3JlL3V0aWwiKTsKCnZhciBncmFwaGljID0gcmVxdWlyZSgiLi4vLi4vdXRpbC9ncmFwaGljIik7Cgp2YXIgX3N5bWJvbCA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvc3ltYm9sIik7Cgp2YXIgY3JlYXRlU3ltYm9sID0gX3N5bWJvbC5jcmVhdGVTeW1ib2w7Cgp2YXIgX251bWJlciA9IHJlcXVpcmUoIi4uLy4uL3V0aWwvbnVtYmVyIik7Cgp2YXIgcGFyc2VQZXJjZW50ID0gX251bWJlci5wYXJzZVBlcmNlbnQ7CnZhciBpc051bWVyaWMgPSBfbnVtYmVyLmlzTnVtZXJpYzsKCnZhciBfaGVscGVyID0gcmVxdWlyZSgiLi9oZWxwZXIiKTsKCnZhciBzZXRMYWJlbCA9IF9oZWxwZXIuc2V0TGFiZWw7Ci8qCiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQoqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQoqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQoqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgoqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQoqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQoqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKKiB1bmRlciB0aGUgTGljZW5zZS4KKi8KCnZhciBCQVJfQk9SREVSX1dJRFRIX1FVRVJZID0gWydpdGVtU3R5bGUnLCAnYm9yZGVyV2lkdGgnXTsgLy8gaW5kZXg6ICtpc0hvcml6b250YWwKCnZhciBMQVlPVVRfQVRUUlMgPSBbewogIHh5OiAneCcsCiAgd2g6ICd3aWR0aCcsCiAgaW5kZXg6IDAsCiAgcG9zRGVzYzogWydsZWZ0JywgJ3JpZ2h0J10KfSwgewogIHh5OiAneScsCiAgd2g6ICdoZWlnaHQnLAogIGluZGV4OiAxLAogIHBvc0Rlc2M6IFsndG9wJywgJ2JvdHRvbSddCn1dOwp2YXIgcGF0aEZvckxpbmVXaWR0aCA9IG5ldyBncmFwaGljLkNpcmNsZSgpOwp2YXIgQmFyVmlldyA9IGVjaGFydHMuZXh0ZW5kQ2hhcnRWaWV3KHsKICB0eXBlOiAncGljdG9yaWFsQmFyJywKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihzZXJpZXNNb2RlbCwgZWNNb2RlbCwgYXBpKSB7CiAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3VwOwogICAgdmFyIGRhdGEgPSBzZXJpZXNNb2RlbC5nZXREYXRhKCk7CiAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7CiAgICB2YXIgY2FydGVzaWFuID0gc2VyaWVzTW9kZWwuY29vcmRpbmF0ZVN5c3RlbTsKICAgIHZhciBiYXNlQXhpcyA9IGNhcnRlc2lhbi5nZXRCYXNlQXhpcygpOwogICAgdmFyIGlzSG9yaXpvbnRhbCA9ICEhYmFzZUF4aXMuaXNIb3Jpem9udGFsKCk7CiAgICB2YXIgY29vcmRTeXNSZWN0ID0gY2FydGVzaWFuLmdyaWQuZ2V0UmVjdCgpOwogICAgdmFyIG9wdCA9IHsKICAgICAgZWNTaXplOiB7CiAgICAgICAgd2lkdGg6IGFwaS5nZXRXaWR0aCgpLAogICAgICAgIGhlaWdodDogYXBpLmdldEhlaWdodCgpCiAgICAgIH0sCiAgICAgIHNlcmllc01vZGVsOiBzZXJpZXNNb2RlbCwKICAgICAgY29vcmRTeXM6IGNhcnRlc2lhbiwKICAgICAgY29vcmRTeXNFeHRlbnQ6IFtbY29vcmRTeXNSZWN0LngsIGNvb3JkU3lzUmVjdC54ICsgY29vcmRTeXNSZWN0LndpZHRoXSwgW2Nvb3JkU3lzUmVjdC55LCBjb29yZFN5c1JlY3QueSArIGNvb3JkU3lzUmVjdC5oZWlnaHRdXSwKICAgICAgaXNIb3Jpem9udGFsOiBpc0hvcml6b250YWwsCiAgICAgIHZhbHVlRGltOiBMQVlPVVRfQVRUUlNbK2lzSG9yaXpvbnRhbF0sCiAgICAgIGNhdGVnb3J5RGltOiBMQVlPVVRfQVRUUlNbMSAtIGlzSG9yaXpvbnRhbF0KICAgIH07CiAgICBkYXRhLmRpZmYob2xkRGF0YSkuYWRkKGZ1bmN0aW9uIChkYXRhSW5kZXgpIHsKICAgICAgaWYgKCFkYXRhLmhhc1ZhbHVlKGRhdGFJbmRleCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtTW9kZWwgPSBnZXRJdGVtTW9kZWwoZGF0YSwgZGF0YUluZGV4KTsKICAgICAgdmFyIHN5bWJvbE1ldGEgPSBnZXRTeW1ib2xNZXRhKGRhdGEsIGRhdGFJbmRleCwgaXRlbU1vZGVsLCBvcHQpOwogICAgICB2YXIgYmFyID0gY3JlYXRlQmFyKGRhdGEsIG9wdCwgc3ltYm9sTWV0YSk7CiAgICAgIGRhdGEuc2V0SXRlbUdyYXBoaWNFbChkYXRhSW5kZXgsIGJhcik7CiAgICAgIGdyb3VwLmFkZChiYXIpOwogICAgICB1cGRhdGVDb21tb24oYmFyLCBvcHQsIHN5bWJvbE1ldGEpOwogICAgfSkudXBkYXRlKGZ1bmN0aW9uIChuZXdJbmRleCwgb2xkSW5kZXgpIHsKICAgICAgdmFyIGJhciA9IG9sZERhdGEuZ2V0SXRlbUdyYXBoaWNFbChvbGRJbmRleCk7CgogICAgICBpZiAoIWRhdGEuaGFzVmFsdWUobmV3SW5kZXgpKSB7CiAgICAgICAgZ3JvdXAucmVtb3ZlKGJhcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXRlbU1vZGVsID0gZ2V0SXRlbU1vZGVsKGRhdGEsIG5ld0luZGV4KTsKICAgICAgdmFyIHN5bWJvbE1ldGEgPSBnZXRTeW1ib2xNZXRhKGRhdGEsIG5ld0luZGV4LCBpdGVtTW9kZWwsIG9wdCk7CiAgICAgIHZhciBwaWN0b3JpYWxTaGFwZVN0ciA9IGdldFNoYXBlU3RyKGRhdGEsIHN5bWJvbE1ldGEpOwoKICAgICAgaWYgKGJhciAmJiBwaWN0b3JpYWxTaGFwZVN0ciAhPT0gYmFyLl9fcGljdG9yaWFsU2hhcGVTdHIpIHsKICAgICAgICBncm91cC5yZW1vdmUoYmFyKTsKICAgICAgICBkYXRhLnNldEl0ZW1HcmFwaGljRWwobmV3SW5kZXgsIG51bGwpOwogICAgICAgIGJhciA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChiYXIpIHsKICAgICAgICB1cGRhdGVCYXIoYmFyLCBvcHQsIHN5bWJvbE1ldGEpOwogICAgICB9IGVsc2UgewogICAgICAgIGJhciA9IGNyZWF0ZUJhcihkYXRhLCBvcHQsIHN5bWJvbE1ldGEsIHRydWUpOwogICAgICB9CgogICAgICBkYXRhLnNldEl0ZW1HcmFwaGljRWwobmV3SW5kZXgsIGJhcik7CiAgICAgIGJhci5fX3BpY3RvcmlhbFN5bWJvbE1ldGEgPSBzeW1ib2xNZXRhOyAvLyBBZGQgYmFjawoKICAgICAgZ3JvdXAuYWRkKGJhcik7CiAgICAgIHVwZGF0ZUNvbW1vbihiYXIsIG9wdCwgc3ltYm9sTWV0YSk7CiAgICB9KS5yZW1vdmUoZnVuY3Rpb24gKGRhdGFJbmRleCkgewogICAgICB2YXIgYmFyID0gb2xkRGF0YS5nZXRJdGVtR3JhcGhpY0VsKGRhdGFJbmRleCk7CiAgICAgIGJhciAmJiByZW1vdmVCYXIob2xkRGF0YSwgZGF0YUluZGV4LCBiYXIuX19waWN0b3JpYWxTeW1ib2xNZXRhLmFuaW1hdGlvbk1vZGVsLCBiYXIpOwogICAgfSkuZXhlY3V0ZSgpOwogICAgdGhpcy5fZGF0YSA9IGRhdGE7CiAgICByZXR1cm4gdGhpcy5ncm91cDsKICB9LAogIGRpc3Bvc2U6IHpyVXRpbC5ub29wLAogIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGVjTW9kZWwsIGFwaSkgewogICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cDsKICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTsKCiAgICBpZiAoZWNNb2RlbC5nZXQoJ2FuaW1hdGlvbicpKSB7CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgZGF0YS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbiAoYmFyKSB7CiAgICAgICAgICByZW1vdmVCYXIoZGF0YSwgYmFyLmRhdGFJbmRleCwgZWNNb2RlbCwgYmFyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZ3JvdXAucmVtb3ZlQWxsKCk7CiAgICB9CiAgfQp9KTsgLy8gU2V0IG9yIGNhbGN1bGF0ZSBkZWZhdWx0IHZhbHVlIGFib3V0IHN5bWJvbCwgYW5kIGNhbGN1bGF0ZSBsYXlvdXQgaW5mby4KCmZ1bmN0aW9uIGdldFN5bWJvbE1ldGEoZGF0YSwgZGF0YUluZGV4LCBpdGVtTW9kZWwsIG9wdCkgewogIHZhciBsYXlvdXQgPSBkYXRhLmdldEl0ZW1MYXlvdXQoZGF0YUluZGV4KTsKICB2YXIgc3ltYm9sUmVwZWF0ID0gaXRlbU1vZGVsLmdldCgnc3ltYm9sUmVwZWF0Jyk7CiAgdmFyIHN5bWJvbENsaXAgPSBpdGVtTW9kZWwuZ2V0KCdzeW1ib2xDbGlwJyk7CiAgdmFyIHN5bWJvbFBvc2l0aW9uID0gaXRlbU1vZGVsLmdldCgnc3ltYm9sUG9zaXRpb24nKSB8fCAnc3RhcnQnOwogIHZhciBzeW1ib2xSb3RhdGUgPSBpdGVtTW9kZWwuZ2V0KCdzeW1ib2xSb3RhdGUnKTsKICB2YXIgcm90YXRpb24gPSAoc3ltYm9sUm90YXRlIHx8IDApICogTWF0aC5QSSAvIDE4MCB8fCAwOwogIHZhciBzeW1ib2xQYXR0ZXJuU2l6ZSA9IGl0ZW1Nb2RlbC5nZXQoJ3N5bWJvbFBhdHRlcm5TaXplJykgfHwgMjsKICB2YXIgaXNBbmltYXRpb25FbmFibGVkID0gaXRlbU1vZGVsLmlzQW5pbWF0aW9uRW5hYmxlZCgpOwogIHZhciBzeW1ib2xNZXRhID0gewogICAgZGF0YUluZGV4OiBkYXRhSW5kZXgsCiAgICBsYXlvdXQ6IGxheW91dCwKICAgIGl0ZW1Nb2RlbDogaXRlbU1vZGVsLAogICAgc3ltYm9sVHlwZTogZGF0YS5nZXRJdGVtVmlzdWFsKGRhdGFJbmRleCwgJ3N5bWJvbCcpIHx8ICdjaXJjbGUnLAogICAgY29sb3I6IGRhdGEuZ2V0SXRlbVZpc3VhbChkYXRhSW5kZXgsICdjb2xvcicpLAogICAgc3ltYm9sQ2xpcDogc3ltYm9sQ2xpcCwKICAgIHN5bWJvbFJlcGVhdDogc3ltYm9sUmVwZWF0LAogICAgc3ltYm9sUmVwZWF0RGlyZWN0aW9uOiBpdGVtTW9kZWwuZ2V0KCdzeW1ib2xSZXBlYXREaXJlY3Rpb24nKSwKICAgIHN5bWJvbFBhdHRlcm5TaXplOiBzeW1ib2xQYXR0ZXJuU2l6ZSwKICAgIHJvdGF0aW9uOiByb3RhdGlvbiwKICAgIGFuaW1hdGlvbk1vZGVsOiBpc0FuaW1hdGlvbkVuYWJsZWQgPyBpdGVtTW9kZWwgOiBudWxsLAogICAgaG92ZXJBbmltYXRpb246IGlzQW5pbWF0aW9uRW5hYmxlZCAmJiBpdGVtTW9kZWwuZ2V0KCdob3ZlckFuaW1hdGlvbicpLAogICAgejI6IGl0ZW1Nb2RlbC5nZXRTaGFsbG93KCd6JywgdHJ1ZSkgfHwgMAogIH07CiAgcHJlcGFyZUJhckxlbmd0aChpdGVtTW9kZWwsIHN5bWJvbFJlcGVhdCwgbGF5b3V0LCBvcHQsIHN5bWJvbE1ldGEpOwogIHByZXBhcmVTeW1ib2xTaXplKGRhdGEsIGRhdGFJbmRleCwgbGF5b3V0LCBzeW1ib2xSZXBlYXQsIHN5bWJvbENsaXAsIHN5bWJvbE1ldGEuYm91bmRpbmdMZW5ndGgsIHN5bWJvbE1ldGEucHhTaWduLCBzeW1ib2xQYXR0ZXJuU2l6ZSwgb3B0LCBzeW1ib2xNZXRhKTsKICBwcmVwYXJlTGluZVdpZHRoKGl0ZW1Nb2RlbCwgc3ltYm9sTWV0YS5zeW1ib2xTY2FsZSwgcm90YXRpb24sIG9wdCwgc3ltYm9sTWV0YSk7CiAgdmFyIHN5bWJvbFNpemUgPSBzeW1ib2xNZXRhLnN5bWJvbFNpemU7CiAgdmFyIHN5bWJvbE9mZnNldCA9IGl0ZW1Nb2RlbC5nZXQoJ3N5bWJvbE9mZnNldCcpOwoKICBpZiAoenJVdGlsLmlzQXJyYXkoc3ltYm9sT2Zmc2V0KSkgewogICAgc3ltYm9sT2Zmc2V0ID0gW3BhcnNlUGVyY2VudChzeW1ib2xPZmZzZXRbMF0sIHN5bWJvbFNpemVbMF0pLCBwYXJzZVBlcmNlbnQoc3ltYm9sT2Zmc2V0WzFdLCBzeW1ib2xTaXplWzFdKV07CiAgfQoKICBwcmVwYXJlTGF5b3V0SW5mbyhpdGVtTW9kZWwsIHN5bWJvbFNpemUsIGxheW91dCwgc3ltYm9sUmVwZWF0LCBzeW1ib2xDbGlwLCBzeW1ib2xPZmZzZXQsIHN5bWJvbFBvc2l0aW9uLCBzeW1ib2xNZXRhLnZhbHVlTGluZVdpZHRoLCBzeW1ib2xNZXRhLmJvdW5kaW5nTGVuZ3RoLCBzeW1ib2xNZXRhLnJlcGVhdEN1dExlbmd0aCwgb3B0LCBzeW1ib2xNZXRhKTsKICByZXR1cm4gc3ltYm9sTWV0YTsKfSAvLyBiYXIgbGVuZ3RoIGNhbiBiZSBuZWdhdGl2ZS4KCgpmdW5jdGlvbiBwcmVwYXJlQmFyTGVuZ3RoKGl0ZW1Nb2RlbCwgc3ltYm9sUmVwZWF0LCBsYXlvdXQsIG9wdCwgb3V0cHV0KSB7CiAgdmFyIHZhbHVlRGltID0gb3B0LnZhbHVlRGltOwogIHZhciBzeW1ib2xCb3VuZGluZ0RhdGEgPSBpdGVtTW9kZWwuZ2V0KCdzeW1ib2xCb3VuZGluZ0RhdGEnKTsKICB2YXIgdmFsdWVBeGlzID0gb3B0LmNvb3JkU3lzLmdldE90aGVyQXhpcyhvcHQuY29vcmRTeXMuZ2V0QmFzZUF4aXMoKSk7CiAgdmFyIHplcm9QeCA9IHZhbHVlQXhpcy50b0dsb2JhbENvb3JkKHZhbHVlQXhpcy5kYXRhVG9Db29yZCgwKSk7CiAgdmFyIHB4U2lnbklkeCA9IDEgLSArKGxheW91dFt2YWx1ZURpbS53aF0gPD0gMCk7CiAgdmFyIGJvdW5kaW5nTGVuZ3RoOwoKICBpZiAoenJVdGlsLmlzQXJyYXkoc3ltYm9sQm91bmRpbmdEYXRhKSkgewogICAgdmFyIHN5bWJvbEJvdW5kaW5nRXh0ZW50ID0gW2NvbnZlcnRUb0Nvb3JkT25BeGlzKHZhbHVlQXhpcywgc3ltYm9sQm91bmRpbmdEYXRhWzBdKSAtIHplcm9QeCwgY29udmVydFRvQ29vcmRPbkF4aXModmFsdWVBeGlzLCBzeW1ib2xCb3VuZGluZ0RhdGFbMV0pIC0gemVyb1B4XTsKICAgIHN5bWJvbEJvdW5kaW5nRXh0ZW50WzFdIDwgc3ltYm9sQm91bmRpbmdFeHRlbnRbMF0gJiYgc3ltYm9sQm91bmRpbmdFeHRlbnQucmV2ZXJzZSgpOwogICAgYm91bmRpbmdMZW5ndGggPSBzeW1ib2xCb3VuZGluZ0V4dGVudFtweFNpZ25JZHhdOwogIH0gZWxzZSBpZiAoc3ltYm9sQm91bmRpbmdEYXRhICE9IG51bGwpIHsKICAgIGJvdW5kaW5nTGVuZ3RoID0gY29udmVydFRvQ29vcmRPbkF4aXModmFsdWVBeGlzLCBzeW1ib2xCb3VuZGluZ0RhdGEpIC0gemVyb1B4OwogIH0gZWxzZSBpZiAoc3ltYm9sUmVwZWF0KSB7CiAgICBib3VuZGluZ0xlbmd0aCA9IG9wdC5jb29yZFN5c0V4dGVudFt2YWx1ZURpbS5pbmRleF1bcHhTaWduSWR4XSAtIHplcm9QeDsKICB9IGVsc2UgewogICAgYm91bmRpbmdMZW5ndGggPSBsYXlvdXRbdmFsdWVEaW0ud2hdOwogIH0KCiAgb3V0cHV0LmJvdW5kaW5nTGVuZ3RoID0gYm91bmRpbmdMZW5ndGg7CgogIGlmIChzeW1ib2xSZXBlYXQpIHsKICAgIG91dHB1dC5yZXBlYXRDdXRMZW5ndGggPSBsYXlvdXRbdmFsdWVEaW0ud2hdOwogIH0KCiAgb3V0cHV0LnB4U2lnbiA9IGJvdW5kaW5nTGVuZ3RoID4gMCA/IDEgOiBib3VuZGluZ0xlbmd0aCA8IDAgPyAtMSA6IDA7Cn0KCmZ1bmN0aW9uIGNvbnZlcnRUb0Nvb3JkT25BeGlzKGF4aXMsIHZhbHVlKSB7CiAgcmV0dXJuIGF4aXMudG9HbG9iYWxDb29yZChheGlzLmRhdGFUb0Nvb3JkKGF4aXMuc2NhbGUucGFyc2UodmFsdWUpKSk7Cn0gLy8gU3VwcG9ydCBbJzEwMCUnLCAnMTAwJSddCgoKZnVuY3Rpb24gcHJlcGFyZVN5bWJvbFNpemUoZGF0YSwgZGF0YUluZGV4LCBsYXlvdXQsIHN5bWJvbFJlcGVhdCwgc3ltYm9sQ2xpcCwgYm91bmRpbmdMZW5ndGgsIHB4U2lnbiwgc3ltYm9sUGF0dGVyblNpemUsIG9wdCwgb3V0cHV0KSB7CiAgdmFyIHZhbHVlRGltID0gb3B0LnZhbHVlRGltOwogIHZhciBjYXRlZ29yeURpbSA9IG9wdC5jYXRlZ29yeURpbTsKICB2YXIgY2F0ZWdvcnlTaXplID0gTWF0aC5hYnMobGF5b3V0W2NhdGVnb3J5RGltLndoXSk7CiAgdmFyIHN5bWJvbFNpemUgPSBkYXRhLmdldEl0ZW1WaXN1YWwoZGF0YUluZGV4LCAnc3ltYm9sU2l6ZScpOwoKICBpZiAoenJVdGlsLmlzQXJyYXkoc3ltYm9sU2l6ZSkpIHsKICAgIHN5bWJvbFNpemUgPSBzeW1ib2xTaXplLnNsaWNlKCk7CiAgfSBlbHNlIHsKICAgIGlmIChzeW1ib2xTaXplID09IG51bGwpIHsKICAgICAgc3ltYm9sU2l6ZSA9ICcxMDAlJzsKICAgIH0KCiAgICBzeW1ib2xTaXplID0gW3N5bWJvbFNpemUsIHN5bWJvbFNpemVdOwogIH0gLy8gTm90ZTogcGVyY2VudGFnZSBzeW1ib2xTaXplIChsaWtlICcxMDAlJykgZG8gbm90IGNvbnNpZGVyIGxpbmVXaWR0aCwgYmVjYXVzZSBpdCBpcwogIC8vIHRvIGNvbXBsaWNhdGVkIHRvIGNhbGN1bGF0ZSByZWFsIHBlcmNlbnQgdmFsdWUgaWYgY29uc2lkZXJpbmcgc2NhbGVkIGxpbmVXaWR0aC4KICAvLyBTbyB0aGUgYWN0dWFsIHNpemUgd2lsbCBiaWdnZXIgdGhhbiBsYXlvdXQgc2l6ZSBpZiBsaW5lV2lkdGggaXMgYmlnZ2VyIHRoYW4gemVybywKICAvLyB3aGljaCBjYW4gYmUgdG9sZXJhdGVkIGluIHBpY3RvcmlhbCBjaGFydC4KCgogIHN5bWJvbFNpemVbY2F0ZWdvcnlEaW0uaW5kZXhdID0gcGFyc2VQZXJjZW50KHN5bWJvbFNpemVbY2F0ZWdvcnlEaW0uaW5kZXhdLCBjYXRlZ29yeVNpemUpOwogIHN5bWJvbFNpemVbdmFsdWVEaW0uaW5kZXhdID0gcGFyc2VQZXJjZW50KHN5bWJvbFNpemVbdmFsdWVEaW0uaW5kZXhdLCBzeW1ib2xSZXBlYXQgPyBjYXRlZ29yeVNpemUgOiBNYXRoLmFicyhib3VuZGluZ0xlbmd0aCkpOwogIG91dHB1dC5zeW1ib2xTaXplID0gc3ltYm9sU2l6ZTsgLy8gSWYgeCBvciB5IGlzIGxlc3MgdGhhbiB6ZXJvLCBzaG93IHJldmVyc2VkIHNoYXBlLgoKICB2YXIgc3ltYm9sU2NhbGUgPSBvdXRwdXQuc3ltYm9sU2NhbGUgPSBbc3ltYm9sU2l6ZVswXSAvIHN5bWJvbFBhdHRlcm5TaXplLCBzeW1ib2xTaXplWzFdIC8gc3ltYm9sUGF0dGVyblNpemVdOyAvLyBGb2xsb3cgY29udmVudGlvbiwgJ3JpZ2h0JyBhbmQgJ3RvcCcgaXMgdGhlIG5vcm1hbCBzY2FsZS4KCiAgc3ltYm9sU2NhbGVbdmFsdWVEaW0uaW5kZXhdICo9IChvcHQuaXNIb3Jpem9udGFsID8gLTEgOiAxKSAqIHB4U2lnbjsKfQoKZnVuY3Rpb24gcHJlcGFyZUxpbmVXaWR0aChpdGVtTW9kZWwsIHN5bWJvbFNjYWxlLCByb3RhdGlvbiwgb3B0LCBvdXRwdXQpIHsKICAvLyBJbiBzeW1ib2xzIGFyZSBkcmF3biB3aXRoIHNjYWxlLCBzbyBkbyBub3QgbmVlZCB0byBjYXJlIGFib3V0IHRoZSBjYXNlIHRoYXQgd2lkdGgKICAvLyBvciBoZWlnaHQgYXJlIHRvbyBzbWFsbC4gQnV0IHN5bWJvbCB1c2Ugc3Ryb2tlTm9TY2FsZSwgd2hlcmUgYWN0dXJlIGxpbmVXaWR0aCBzaG91bGQKICAvLyBiZSBjYWxjdWxhdGVkLgogIHZhciB2YWx1ZUxpbmVXaWR0aCA9IGl0ZW1Nb2RlbC5nZXQoQkFSX0JPUkRFUl9XSURUSF9RVUVSWSkgfHwgMDsKCiAgaWYgKHZhbHVlTGluZVdpZHRoKSB7CiAgICBwYXRoRm9yTGluZVdpZHRoLmF0dHIoewogICAgICBzY2FsZTogc3ltYm9sU2NhbGUuc2xpY2UoKSwKICAgICAgcm90YXRpb246IHJvdGF0aW9uCiAgICB9KTsKICAgIHBhdGhGb3JMaW5lV2lkdGgudXBkYXRlVHJhbnNmb3JtKCk7CiAgICB2YWx1ZUxpbmVXaWR0aCAvPSBwYXRoRm9yTGluZVdpZHRoLmdldExpbmVTY2FsZSgpOwogICAgdmFsdWVMaW5lV2lkdGggKj0gc3ltYm9sU2NhbGVbb3B0LnZhbHVlRGltLmluZGV4XTsKICB9CgogIG91dHB1dC52YWx1ZUxpbmVXaWR0aCA9IHZhbHVlTGluZVdpZHRoOwp9CgpmdW5jdGlvbiBwcmVwYXJlTGF5b3V0SW5mbyhpdGVtTW9kZWwsIHN5bWJvbFNpemUsIGxheW91dCwgc3ltYm9sUmVwZWF0LCBzeW1ib2xDbGlwLCBzeW1ib2xPZmZzZXQsIHN5bWJvbFBvc2l0aW9uLCB2YWx1ZUxpbmVXaWR0aCwgYm91bmRpbmdMZW5ndGgsIHJlcGVhdEN1dExlbmd0aCwgb3B0LCBvdXRwdXQpIHsKICB2YXIgY2F0ZWdvcnlEaW0gPSBvcHQuY2F0ZWdvcnlEaW07CiAgdmFyIHZhbHVlRGltID0gb3B0LnZhbHVlRGltOwogIHZhciBweFNpZ24gPSBvdXRwdXQucHhTaWduOwogIHZhciB1bml0TGVuZ3RoID0gTWF0aC5tYXgoc3ltYm9sU2l6ZVt2YWx1ZURpbS5pbmRleF0gKyB2YWx1ZUxpbmVXaWR0aCwgMCk7CiAgdmFyIHBhdGhMZW4gPSB1bml0TGVuZ3RoOyAvLyBOb3RlOiByb3RhdGlvbiB3aWxsIG5vdCBlZmZlY3QgdGhlIGxheW91dCBvZiBzeW1ib2xzLCBiZWNhdXNlIHVzZXIgbWF5CiAgLy8gd2FudCBzeW1ib2xzIHRvIHJvdGF0ZSBvbiBpdHMgY2VudGVyLCB3aGljaCBzaG91bGQgbm90IGJlIHRyYW5zbGF0ZWQKICAvLyB3aGVuIHJvdGF0aW5nLgoKICBpZiAoc3ltYm9sUmVwZWF0KSB7CiAgICB2YXIgYWJzQm91bmRpbmdMZW5ndGggPSBNYXRoLmFicyhib3VuZGluZ0xlbmd0aCk7CiAgICB2YXIgc3ltYm9sTWFyZ2luID0genJVdGlsLnJldHJpZXZlKGl0ZW1Nb2RlbC5nZXQoJ3N5bWJvbE1hcmdpbicpLCAnMTUlJykgKyAnJzsKICAgIHZhciBoYXNFbmRHYXAgPSBmYWxzZTsKCiAgICBpZiAoc3ltYm9sTWFyZ2luLmxhc3RJbmRleE9mKCchJykgPT09IHN5bWJvbE1hcmdpbi5sZW5ndGggLSAxKSB7CiAgICAgIGhhc0VuZEdhcCA9IHRydWU7CiAgICAgIHN5bWJvbE1hcmdpbiA9IHN5bWJvbE1hcmdpbi5zbGljZSgwLCBzeW1ib2xNYXJnaW4ubGVuZ3RoIC0gMSk7CiAgICB9CgogICAgc3ltYm9sTWFyZ2luID0gcGFyc2VQZXJjZW50KHN5bWJvbE1hcmdpbiwgc3ltYm9sU2l6ZVt2YWx1ZURpbS5pbmRleF0pOwogICAgdmFyIHVMZW5XaXRoTWFyZ2luID0gTWF0aC5tYXgodW5pdExlbmd0aCArIHN5bWJvbE1hcmdpbiAqIDIsIDApOyAvLyBXaGVuIHN5bWJvbCBtYXJnaW4gaXMgbGVzcyB0aGFuIDAsIG1hcmdpbiBhdCBib3RoIGVuZHMgd2lsbCBiZSBzdWJ0cmFjdGVkCiAgICAvLyB0byBlbnN1cmUgdGhhdCBhbGwgb2YgdGhlIHN5bWJvbHMgd2lsbCBub3QgYmUgb3ZlcmZsb3cgdGhlIGdpdmVuIGFyZWEuCgogICAgdmFyIGVuZEZpeCA9IGhhc0VuZEdhcCA/IDAgOiBzeW1ib2xNYXJnaW4gKiAyOyAvLyBCb3RoIGZpbmFsIHJlcGVhdFRpbWVzIGFuZCBmaW5hbCBzeW1ib2xNYXJnaW4gYXJlYSBjYWxjdWxhdGVkIGJhc2VkIG9uCiAgICAvLyBib3VuZGluZ0xlbmd0aC4KCiAgICB2YXIgcmVwZWF0U3BlY2lmaWVkID0gaXNOdW1lcmljKHN5bWJvbFJlcGVhdCk7CiAgICB2YXIgcmVwZWF0VGltZXMgPSByZXBlYXRTcGVjaWZpZWQgPyBzeW1ib2xSZXBlYXQgOiB0b0ludFRpbWVzKChhYnNCb3VuZGluZ0xlbmd0aCArIGVuZEZpeCkgLyB1TGVuV2l0aE1hcmdpbik7IC8vIEFkanVzdCBjYWxjdWxhdGUgbWFyZ2luLCB0byBlbnN1cmUgZWFjaCBzeW1ib2wgaXMgZGlzcGxheWVkCiAgICAvLyBlbnRpcmVseSBpbiB0aGUgZ2l2ZW4gbGF5b3V0IGFyZWEuCgogICAgdmFyIG1EaWZmID0gYWJzQm91bmRpbmdMZW5ndGggLSByZXBlYXRUaW1lcyAqIHVuaXRMZW5ndGg7CiAgICBzeW1ib2xNYXJnaW4gPSBtRGlmZiAvIDIgLyAoaGFzRW5kR2FwID8gcmVwZWF0VGltZXMgOiByZXBlYXRUaW1lcyAtIDEpOwogICAgdUxlbldpdGhNYXJnaW4gPSB1bml0TGVuZ3RoICsgc3ltYm9sTWFyZ2luICogMjsKICAgIGVuZEZpeCA9IGhhc0VuZEdhcCA/IDAgOiBzeW1ib2xNYXJnaW4gKiAyOyAvLyBVcGRhdGUgcmVwZWF0VGltZXMgd2hlbiBub3QgYWxsIHN5bWJvbCB3aWxsIGJlIHNob3duLgoKICAgIGlmICghcmVwZWF0U3BlY2lmaWVkICYmIHN5bWJvbFJlcGVhdCAhPT0gJ2ZpeGVkJykgewogICAgICByZXBlYXRUaW1lcyA9IHJlcGVhdEN1dExlbmd0aCA/IHRvSW50VGltZXMoKE1hdGguYWJzKHJlcGVhdEN1dExlbmd0aCkgKyBlbmRGaXgpIC8gdUxlbldpdGhNYXJnaW4pIDogMDsKICAgIH0KCiAgICBwYXRoTGVuID0gcmVwZWF0VGltZXMgKiB1TGVuV2l0aE1hcmdpbiAtIGVuZEZpeDsKICAgIG91dHB1dC5yZXBlYXRUaW1lcyA9IHJlcGVhdFRpbWVzOwogICAgb3V0cHV0LnN5bWJvbE1hcmdpbiA9IHN5bWJvbE1hcmdpbjsKICB9CgogIHZhciBzaXplRml4ID0gcHhTaWduICogKHBhdGhMZW4gLyAyKTsKICB2YXIgcGF0aFBvc2l0aW9uID0gb3V0cHV0LnBhdGhQb3NpdGlvbiA9IFtdOwogIHBhdGhQb3NpdGlvbltjYXRlZ29yeURpbS5pbmRleF0gPSBsYXlvdXRbY2F0ZWdvcnlEaW0ud2hdIC8gMjsKICBwYXRoUG9zaXRpb25bdmFsdWVEaW0uaW5kZXhdID0gc3ltYm9sUG9zaXRpb24gPT09ICdzdGFydCcgPyBzaXplRml4IDogc3ltYm9sUG9zaXRpb24gPT09ICdlbmQnID8gYm91bmRpbmdMZW5ndGggLSBzaXplRml4IDogYm91bmRpbmdMZW5ndGggLyAyOyAvLyAnY2VudGVyJwoKICBpZiAoc3ltYm9sT2Zmc2V0KSB7CiAgICBwYXRoUG9zaXRpb25bMF0gKz0gc3ltYm9sT2Zmc2V0WzBdOwogICAgcGF0aFBvc2l0aW9uWzFdICs9IHN5bWJvbE9mZnNldFsxXTsKICB9CgogIHZhciBidW5kbGVQb3NpdGlvbiA9IG91dHB1dC5idW5kbGVQb3NpdGlvbiA9IFtdOwogIGJ1bmRsZVBvc2l0aW9uW2NhdGVnb3J5RGltLmluZGV4XSA9IGxheW91dFtjYXRlZ29yeURpbS54eV07CiAgYnVuZGxlUG9zaXRpb25bdmFsdWVEaW0uaW5kZXhdID0gbGF5b3V0W3ZhbHVlRGltLnh5XTsKICB2YXIgYmFyUmVjdFNoYXBlID0gb3V0cHV0LmJhclJlY3RTaGFwZSA9IHpyVXRpbC5leHRlbmQoe30sIGxheW91dCk7CiAgYmFyUmVjdFNoYXBlW3ZhbHVlRGltLndoXSA9IHB4U2lnbiAqIE1hdGgubWF4KE1hdGguYWJzKGxheW91dFt2YWx1ZURpbS53aF0pLCBNYXRoLmFicyhwYXRoUG9zaXRpb25bdmFsdWVEaW0uaW5kZXhdICsgc2l6ZUZpeCkpOwogIGJhclJlY3RTaGFwZVtjYXRlZ29yeURpbS53aF0gPSBsYXlvdXRbY2F0ZWdvcnlEaW0ud2hdOwogIHZhciBjbGlwU2hhcGUgPSBvdXRwdXQuY2xpcFNoYXBlID0ge307IC8vIENvbnNpZGVyIHRoYXQgc3ltYm9sIG1heSBiZSBvdmVyZmxvdyBsYXlvdXQgcmVjdC4KCiAgY2xpcFNoYXBlW2NhdGVnb3J5RGltLnh5XSA9IC1sYXlvdXRbY2F0ZWdvcnlEaW0ueHldOwogIGNsaXBTaGFwZVtjYXRlZ29yeURpbS53aF0gPSBvcHQuZWNTaXplW2NhdGVnb3J5RGltLndoXTsKICBjbGlwU2hhcGVbdmFsdWVEaW0ueHldID0gMDsKICBjbGlwU2hhcGVbdmFsdWVEaW0ud2hdID0gbGF5b3V0W3ZhbHVlRGltLndoXTsKfQoKZnVuY3Rpb24gY3JlYXRlUGF0aChzeW1ib2xNZXRhKSB7CiAgdmFyIHN5bWJvbFBhdHRlcm5TaXplID0gc3ltYm9sTWV0YS5zeW1ib2xQYXR0ZXJuU2l6ZTsKICB2YXIgcGF0aCA9IGNyZWF0ZVN5bWJvbCggLy8gQ29uc2lkZXIgdGV4dHVyZSBpbWcsIG1ha2UgYSBiaWcgc2l6ZS4KICBzeW1ib2xNZXRhLnN5bWJvbFR5cGUsIC1zeW1ib2xQYXR0ZXJuU2l6ZSAvIDIsIC1zeW1ib2xQYXR0ZXJuU2l6ZSAvIDIsIHN5bWJvbFBhdHRlcm5TaXplLCBzeW1ib2xQYXR0ZXJuU2l6ZSwgc3ltYm9sTWV0YS5jb2xvcik7CiAgcGF0aC5hdHRyKHsKICAgIGN1bGxpbmc6IHRydWUKICB9KTsKICBwYXRoLnR5cGUgIT09ICdpbWFnZScgJiYgcGF0aC5zZXRTdHlsZSh7CiAgICBzdHJva2VOb1NjYWxlOiB0cnVlCiAgfSk7CiAgcmV0dXJuIHBhdGg7Cn0KCmZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlUmVwZWF0U3ltYm9scyhiYXIsIG9wdCwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpIHsKICB2YXIgYnVuZGxlID0gYmFyLl9fcGljdG9yaWFsQnVuZGxlOwogIHZhciBzeW1ib2xTaXplID0gc3ltYm9sTWV0YS5zeW1ib2xTaXplOwogIHZhciB2YWx1ZUxpbmVXaWR0aCA9IHN5bWJvbE1ldGEudmFsdWVMaW5lV2lkdGg7CiAgdmFyIHBhdGhQb3NpdGlvbiA9IHN5bWJvbE1ldGEucGF0aFBvc2l0aW9uOwogIHZhciB2YWx1ZURpbSA9IG9wdC52YWx1ZURpbTsKICB2YXIgcmVwZWF0VGltZXMgPSBzeW1ib2xNZXRhLnJlcGVhdFRpbWVzIHx8IDA7CiAgdmFyIGluZGV4ID0gMDsKICB2YXIgdW5pdCA9IHN5bWJvbFNpemVbb3B0LnZhbHVlRGltLmluZGV4XSArIHZhbHVlTGluZVdpZHRoICsgc3ltYm9sTWV0YS5zeW1ib2xNYXJnaW4gKiAyOwogIGVhY2hQYXRoKGJhciwgZnVuY3Rpb24gKHBhdGgpIHsKICAgIHBhdGguX19waWN0b3JpYWxBbmltYXRpb25JbmRleCA9IGluZGV4OwogICAgcGF0aC5fX3BpY3RvcmlhbFJlcGVhdFRpbWVzID0gcmVwZWF0VGltZXM7CgogICAgaWYgKGluZGV4IDwgcmVwZWF0VGltZXMpIHsKICAgICAgdXBkYXRlQXR0cihwYXRoLCBudWxsLCBtYWtlVGFyZ2V0KGluZGV4KSwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpOwogICAgfSBlbHNlIHsKICAgICAgdXBkYXRlQXR0cihwYXRoLCBudWxsLCB7CiAgICAgICAgc2NhbGU6IFswLCAwXQogICAgICB9LCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSwgZnVuY3Rpb24gKCkgewogICAgICAgIGJ1bmRsZS5yZW1vdmUocGF0aCk7CiAgICAgIH0pOwogICAgfQoKICAgIHVwZGF0ZUhvdmVyQW5pbWF0aW9uKHBhdGgsIHN5bWJvbE1ldGEpOwogICAgaW5kZXgrKzsKICB9KTsKCiAgZm9yICg7IGluZGV4IDwgcmVwZWF0VGltZXM7IGluZGV4KyspIHsKICAgIHZhciBwYXRoID0gY3JlYXRlUGF0aChzeW1ib2xNZXRhKTsKICAgIHBhdGguX19waWN0b3JpYWxBbmltYXRpb25JbmRleCA9IGluZGV4OwogICAgcGF0aC5fX3BpY3RvcmlhbFJlcGVhdFRpbWVzID0gcmVwZWF0VGltZXM7CiAgICBidW5kbGUuYWRkKHBhdGgpOwogICAgdmFyIHRhcmdldCA9IG1ha2VUYXJnZXQoaW5kZXgpOwogICAgdXBkYXRlQXR0cihwYXRoLCB7CiAgICAgIHBvc2l0aW9uOiB0YXJnZXQucG9zaXRpb24sCiAgICAgIHNjYWxlOiBbMCwgMF0KICAgIH0sIHsKICAgICAgc2NhbGU6IHRhcmdldC5zY2FsZSwKICAgICAgcm90YXRpb246IHRhcmdldC5yb3RhdGlvbgogICAgfSwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpOyAvLyBGSVhNRQogICAgLy8gSWYgYWxsIGVtcGhhc2lzL25vcm1hbCB0aHJvdWdoIGFjdGlvbi4KCiAgICBwYXRoLm9uKCdtb3VzZW92ZXInLCBvbk1vdXNlT3Zlcikub24oJ21vdXNlb3V0Jywgb25Nb3VzZU91dCk7CiAgICB1cGRhdGVIb3ZlckFuaW1hdGlvbihwYXRoLCBzeW1ib2xNZXRhKTsKICB9CgogIGZ1bmN0aW9uIG1ha2VUYXJnZXQoaW5kZXgpIHsKICAgIHZhciBwb3NpdGlvbiA9IHBhdGhQb3NpdGlvbi5zbGljZSgpOyAvLyAoc3RhcnQgJiYgcHhTaWduID4gMCkgfHwgKGVuZCAmJiBweFNpZ24gPCAwKTogaSA9IHJlcGVhdFRpbWVzIC0gaW5kZXgKICAgIC8vIE90aGVyd2lzZTogaSA9IGluZGV4OwoKICAgIHZhciBweFNpZ24gPSBzeW1ib2xNZXRhLnB4U2lnbjsKICAgIHZhciBpID0gaW5kZXg7CgogICAgaWYgKHN5bWJvbE1ldGEuc3ltYm9sUmVwZWF0RGlyZWN0aW9uID09PSAnc3RhcnQnID8gcHhTaWduID4gMCA6IHB4U2lnbiA8IDApIHsKICAgICAgaSA9IHJlcGVhdFRpbWVzIC0gMSAtIGluZGV4OwogICAgfQoKICAgIHBvc2l0aW9uW3ZhbHVlRGltLmluZGV4XSA9IHVuaXQgKiAoaSAtIHJlcGVhdFRpbWVzIC8gMiArIDAuNSkgKyBwYXRoUG9zaXRpb25bdmFsdWVEaW0uaW5kZXhdOwogICAgcmV0dXJuIHsKICAgICAgcG9zaXRpb246IHBvc2l0aW9uLAogICAgICBzY2FsZTogc3ltYm9sTWV0YS5zeW1ib2xTY2FsZS5zbGljZSgpLAogICAgICByb3RhdGlvbjogc3ltYm9sTWV0YS5yb3RhdGlvbgogICAgfTsKICB9CgogIGZ1bmN0aW9uIG9uTW91c2VPdmVyKCkgewogICAgZWFjaFBhdGgoYmFyLCBmdW5jdGlvbiAocGF0aCkgewogICAgICBwYXRoLnRyaWdnZXIoJ2VtcGhhc2lzJyk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIG9uTW91c2VPdXQoKSB7CiAgICBlYWNoUGF0aChiYXIsIGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgIHBhdGgudHJpZ2dlcignbm9ybWFsJyk7CiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlU2luZ2xlU3ltYm9sKGJhciwgb3B0LCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSkgewogIHZhciBidW5kbGUgPSBiYXIuX19waWN0b3JpYWxCdW5kbGU7CiAgdmFyIG1haW5QYXRoID0gYmFyLl9fcGljdG9yaWFsTWFpblBhdGg7CgogIGlmICghbWFpblBhdGgpIHsKICAgIG1haW5QYXRoID0gYmFyLl9fcGljdG9yaWFsTWFpblBhdGggPSBjcmVhdGVQYXRoKHN5bWJvbE1ldGEpOwogICAgYnVuZGxlLmFkZChtYWluUGF0aCk7CiAgICB1cGRhdGVBdHRyKG1haW5QYXRoLCB7CiAgICAgIHBvc2l0aW9uOiBzeW1ib2xNZXRhLnBhdGhQb3NpdGlvbi5zbGljZSgpLAogICAgICBzY2FsZTogWzAsIDBdLAogICAgICByb3RhdGlvbjogc3ltYm9sTWV0YS5yb3RhdGlvbgogICAgfSwgewogICAgICBzY2FsZTogc3ltYm9sTWV0YS5zeW1ib2xTY2FsZS5zbGljZSgpCiAgICB9LCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSk7CiAgICBtYWluUGF0aC5vbignbW91c2VvdmVyJywgb25Nb3VzZU92ZXIpLm9uKCdtb3VzZW91dCcsIG9uTW91c2VPdXQpOwogIH0gZWxzZSB7CiAgICB1cGRhdGVBdHRyKG1haW5QYXRoLCBudWxsLCB7CiAgICAgIHBvc2l0aW9uOiBzeW1ib2xNZXRhLnBhdGhQb3NpdGlvbi5zbGljZSgpLAogICAgICBzY2FsZTogc3ltYm9sTWV0YS5zeW1ib2xTY2FsZS5zbGljZSgpLAogICAgICByb3RhdGlvbjogc3ltYm9sTWV0YS5yb3RhdGlvbgogICAgfSwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpOwogIH0KCiAgdXBkYXRlSG92ZXJBbmltYXRpb24obWFpblBhdGgsIHN5bWJvbE1ldGEpOwoKICBmdW5jdGlvbiBvbk1vdXNlT3ZlcigpIHsKICAgIHRoaXMudHJpZ2dlcignZW1waGFzaXMnKTsKICB9CgogIGZ1bmN0aW9uIG9uTW91c2VPdXQoKSB7CiAgICB0aGlzLnRyaWdnZXIoJ25vcm1hbCcpOwogIH0KfSAvLyBiYXIgcmVjdCBpcyB1c2VkIGZvciBsYWJlbC4KCgpmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUJhclJlY3QoYmFyLCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSkgewogIHZhciByZWN0U2hhcGUgPSB6clV0aWwuZXh0ZW5kKHt9LCBzeW1ib2xNZXRhLmJhclJlY3RTaGFwZSk7CiAgdmFyIGJhclJlY3QgPSBiYXIuX19waWN0b3JpYWxCYXJSZWN0OwoKICBpZiAoIWJhclJlY3QpIHsKICAgIGJhclJlY3QgPSBiYXIuX19waWN0b3JpYWxCYXJSZWN0ID0gbmV3IGdyYXBoaWMuUmVjdCh7CiAgICAgIHoyOiAyLAogICAgICBzaGFwZTogcmVjdFNoYXBlLAogICAgICBzaWxlbnQ6IHRydWUsCiAgICAgIHN0eWxlOiB7CiAgICAgICAgc3Ryb2tlOiAndHJhbnNwYXJlbnQnLAogICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsCiAgICAgICAgbGluZVdpZHRoOiAwCiAgICAgIH0KICAgIH0pOwogICAgYmFyLmFkZChiYXJSZWN0KTsKICB9IGVsc2UgewogICAgdXBkYXRlQXR0cihiYXJSZWN0LCBudWxsLCB7CiAgICAgIHNoYXBlOiByZWN0U2hhcGUKICAgIH0sIHN5bWJvbE1ldGEsIGlzVXBkYXRlKTsKICB9Cn0KCmZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlQ2xpcChiYXIsIG9wdCwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpIHsKICAvLyBJZiBub3QgY2xpcCwgc3ltYm9sIHdpbGwgYmUgcmVtb3ZlIGFuZCByZWJ1aWx0LgogIGlmIChzeW1ib2xNZXRhLnN5bWJvbENsaXApIHsKICAgIHZhciBjbGlwUGF0aCA9IGJhci5fX3BpY3RvcmlhbENsaXBQYXRoOwogICAgdmFyIGNsaXBTaGFwZSA9IHpyVXRpbC5leHRlbmQoe30sIHN5bWJvbE1ldGEuY2xpcFNoYXBlKTsKICAgIHZhciB2YWx1ZURpbSA9IG9wdC52YWx1ZURpbTsKICAgIHZhciBhbmltYXRpb25Nb2RlbCA9IHN5bWJvbE1ldGEuYW5pbWF0aW9uTW9kZWw7CiAgICB2YXIgZGF0YUluZGV4ID0gc3ltYm9sTWV0YS5kYXRhSW5kZXg7CgogICAgaWYgKGNsaXBQYXRoKSB7CiAgICAgIGdyYXBoaWMudXBkYXRlUHJvcHMoY2xpcFBhdGgsIHsKICAgICAgICBzaGFwZTogY2xpcFNoYXBlCiAgICAgIH0sIGFuaW1hdGlvbk1vZGVsLCBkYXRhSW5kZXgpOwogICAgfSBlbHNlIHsKICAgICAgY2xpcFNoYXBlW3ZhbHVlRGltLndoXSA9IDA7CiAgICAgIGNsaXBQYXRoID0gbmV3IGdyYXBoaWMuUmVjdCh7CiAgICAgICAgc2hhcGU6IGNsaXBTaGFwZQogICAgICB9KTsKCiAgICAgIGJhci5fX3BpY3RvcmlhbEJ1bmRsZS5zZXRDbGlwUGF0aChjbGlwUGF0aCk7CgogICAgICBiYXIuX19waWN0b3JpYWxDbGlwUGF0aCA9IGNsaXBQYXRoOwogICAgICB2YXIgdGFyZ2V0ID0ge307CiAgICAgIHRhcmdldFt2YWx1ZURpbS53aF0gPSBzeW1ib2xNZXRhLmNsaXBTaGFwZVt2YWx1ZURpbS53aF07CiAgICAgIGdyYXBoaWNbaXNVcGRhdGUgPyAndXBkYXRlUHJvcHMnIDogJ2luaXRQcm9wcyddKGNsaXBQYXRoLCB7CiAgICAgICAgc2hhcGU6IHRhcmdldAogICAgICB9LCBhbmltYXRpb25Nb2RlbCwgZGF0YUluZGV4KTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGdldEl0ZW1Nb2RlbChkYXRhLCBkYXRhSW5kZXgpIHsKICB2YXIgaXRlbU1vZGVsID0gZGF0YS5nZXRJdGVtTW9kZWwoZGF0YUluZGV4KTsKICBpdGVtTW9kZWwuZ2V0QW5pbWF0aW9uRGVsYXlQYXJhbXMgPSBnZXRBbmltYXRpb25EZWxheVBhcmFtczsKICBpdGVtTW9kZWwuaXNBbmltYXRpb25FbmFibGVkID0gaXNBbmltYXRpb25FbmFibGVkOwogIHJldHVybiBpdGVtTW9kZWw7Cn0KCmZ1bmN0aW9uIGdldEFuaW1hdGlvbkRlbGF5UGFyYW1zKHBhdGgpIHsKICAvLyBUaGUgb3JkZXIgaXMgdGhlIHNhbWUgYXMgdGhlIHotb3JkZXIsIHNlZSBgc3ltYm9sUmVwZWF0RGlyZXRpb25gLgogIHJldHVybiB7CiAgICBpbmRleDogcGF0aC5fX3BpY3RvcmlhbEFuaW1hdGlvbkluZGV4LAogICAgY291bnQ6IHBhdGguX19waWN0b3JpYWxSZXBlYXRUaW1lcwogIH07Cn0KCmZ1bmN0aW9uIGlzQW5pbWF0aW9uRW5hYmxlZCgpIHsKICAvLyBgYW5pbWF0aW9uYCBwcm9wIGNhbiBiZSBzZXQgb24gaXRlbU1vZGVsIGluIHBpY3RvcmlhbCBiYXIgY2hhcnQuCiAgcmV0dXJuIHRoaXMucGFyZW50TW9kZWwuaXNBbmltYXRpb25FbmFibGVkKCkgJiYgISF0aGlzLmdldFNoYWxsb3coJ2FuaW1hdGlvbicpOwp9CgpmdW5jdGlvbiB1cGRhdGVIb3ZlckFuaW1hdGlvbihwYXRoLCBzeW1ib2xNZXRhKSB7CiAgcGF0aC5vZmYoJ2VtcGhhc2lzJykub2ZmKCdub3JtYWwnKTsKICB2YXIgc2NhbGUgPSBzeW1ib2xNZXRhLnN5bWJvbFNjYWxlLnNsaWNlKCk7CiAgc3ltYm9sTWV0YS5ob3ZlckFuaW1hdGlvbiAmJiBwYXRoLm9uKCdlbXBoYXNpcycsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYW5pbWF0ZVRvKHsKICAgICAgc2NhbGU6IFtzY2FsZVswXSAqIDEuMSwgc2NhbGVbMV0gKiAxLjFdCiAgICB9LCA0MDAsICdlbGFzdGljT3V0Jyk7CiAgfSkub24oJ25vcm1hbCcsIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYW5pbWF0ZVRvKHsKICAgICAgc2NhbGU6IHNjYWxlLnNsaWNlKCkKICAgIH0sIDQwMCwgJ2VsYXN0aWNPdXQnKTsKICB9KTsKfQoKZnVuY3Rpb24gY3JlYXRlQmFyKGRhdGEsIG9wdCwgc3ltYm9sTWV0YSwgaXNVcGRhdGUpIHsKICAvLyBiYXIgaXMgdGhlIG1haW4gZWxlbWVudCBmb3IgZWFjaCBkYXRhLgogIHZhciBiYXIgPSBuZXcgZ3JhcGhpYy5Hcm91cCgpOyAvLyBidW5kbGUgaXMgdXNlZCBmb3IgbG9jYXRpb24gYW5kIGNsaXAuCgogIHZhciBidW5kbGUgPSBuZXcgZ3JhcGhpYy5Hcm91cCgpOwogIGJhci5hZGQoYnVuZGxlKTsKICBiYXIuX19waWN0b3JpYWxCdW5kbGUgPSBidW5kbGU7CiAgYnVuZGxlLmF0dHIoJ3Bvc2l0aW9uJywgc3ltYm9sTWV0YS5idW5kbGVQb3NpdGlvbi5zbGljZSgpKTsKCiAgaWYgKHN5bWJvbE1ldGEuc3ltYm9sUmVwZWF0KSB7CiAgICBjcmVhdGVPclVwZGF0ZVJlcGVhdFN5bWJvbHMoYmFyLCBvcHQsIHN5bWJvbE1ldGEpOwogIH0gZWxzZSB7CiAgICBjcmVhdGVPclVwZGF0ZVNpbmdsZVN5bWJvbChiYXIsIG9wdCwgc3ltYm9sTWV0YSk7CiAgfQoKICBjcmVhdGVPclVwZGF0ZUJhclJlY3QoYmFyLCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSk7CiAgY3JlYXRlT3JVcGRhdGVDbGlwKGJhciwgb3B0LCBzeW1ib2xNZXRhLCBpc1VwZGF0ZSk7CiAgYmFyLl9fcGljdG9yaWFsU2hhcGVTdHIgPSBnZXRTaGFwZVN0cihkYXRhLCBzeW1ib2xNZXRhKTsKICBiYXIuX19waWN0b3JpYWxTeW1ib2xNZXRhID0gc3ltYm9sTWV0YTsKICByZXR1cm4gYmFyOwp9CgpmdW5jdGlvbiB1cGRhdGVCYXIoYmFyLCBvcHQsIHN5bWJvbE1ldGEpIHsKICB2YXIgYW5pbWF0aW9uTW9kZWwgPSBzeW1ib2xNZXRhLmFuaW1hdGlvbk1vZGVsOwogIHZhciBkYXRhSW5kZXggPSBzeW1ib2xNZXRhLmRhdGFJbmRleDsKICB2YXIgYnVuZGxlID0gYmFyLl9fcGljdG9yaWFsQnVuZGxlOwogIGdyYXBoaWMudXBkYXRlUHJvcHMoYnVuZGxlLCB7CiAgICBwb3NpdGlvbjogc3ltYm9sTWV0YS5idW5kbGVQb3NpdGlvbi5zbGljZSgpCiAgfSwgYW5pbWF0aW9uTW9kZWwsIGRhdGFJbmRleCk7CgogIGlmIChzeW1ib2xNZXRhLnN5bWJvbFJlcGVhdCkgewogICAgY3JlYXRlT3JVcGRhdGVSZXBlYXRTeW1ib2xzKGJhciwgb3B0LCBzeW1ib2xNZXRhLCB0cnVlKTsKICB9IGVsc2UgewogICAgY3JlYXRlT3JVcGRhdGVTaW5nbGVTeW1ib2woYmFyLCBvcHQsIHN5bWJvbE1ldGEsIHRydWUpOwogIH0KCiAgY3JlYXRlT3JVcGRhdGVCYXJSZWN0KGJhciwgc3ltYm9sTWV0YSwgdHJ1ZSk7CiAgY3JlYXRlT3JVcGRhdGVDbGlwKGJhciwgb3B0LCBzeW1ib2xNZXRhLCB0cnVlKTsKfQoKZnVuY3Rpb24gcmVtb3ZlQmFyKGRhdGEsIGRhdGFJbmRleCwgYW5pbWF0aW9uTW9kZWwsIGJhcikgewogIC8vIE5vdCBzaG93IHRleHQgd2hlbiBhbmltYXRpbmcKICB2YXIgbGFiZWxSZWN0ID0gYmFyLl9fcGljdG9yaWFsQmFyUmVjdDsKICBsYWJlbFJlY3QgJiYgKGxhYmVsUmVjdC5zdHlsZS50ZXh0ID0gbnVsbCk7CiAgdmFyIHBhdGhlcyA9IFtdOwogIGVhY2hQYXRoKGJhciwgZnVuY3Rpb24gKHBhdGgpIHsKICAgIHBhdGhlcy5wdXNoKHBhdGgpOwogIH0pOwogIGJhci5fX3BpY3RvcmlhbE1haW5QYXRoICYmIHBhdGhlcy5wdXNoKGJhci5fX3BpY3RvcmlhbE1haW5QYXRoKTsgLy8gSSBkbyBub3QgZmluZCBwcm9wZXIgcmVtb3ZlIGFuaW1hdGlvbiBmb3IgY2xpcCB5ZXQuCgogIGJhci5fX3BpY3RvcmlhbENsaXBQYXRoICYmIChhbmltYXRpb25Nb2RlbCA9IG51bGwpOwogIHpyVXRpbC5lYWNoKHBhdGhlcywgZnVuY3Rpb24gKHBhdGgpIHsKICAgIGdyYXBoaWMudXBkYXRlUHJvcHMocGF0aCwgewogICAgICBzY2FsZTogWzAsIDBdCiAgICB9LCBhbmltYXRpb25Nb2RlbCwgZGF0YUluZGV4LCBmdW5jdGlvbiAoKSB7CiAgICAgIGJhci5wYXJlbnQgJiYgYmFyLnBhcmVudC5yZW1vdmUoYmFyKTsKICAgIH0pOwogIH0pOwogIGRhdGEuc2V0SXRlbUdyYXBoaWNFbChkYXRhSW5kZXgsIG51bGwpOwp9CgpmdW5jdGlvbiBnZXRTaGFwZVN0cihkYXRhLCBzeW1ib2xNZXRhKSB7CiAgcmV0dXJuIFtkYXRhLmdldEl0ZW1WaXN1YWwoc3ltYm9sTWV0YS5kYXRhSW5kZXgsICdzeW1ib2wnKSB8fCAnbm9uZScsICEhc3ltYm9sTWV0YS5zeW1ib2xSZXBlYXQsICEhc3ltYm9sTWV0YS5zeW1ib2xDbGlwXS5qb2luKCc6Jyk7Cn0KCmZ1bmN0aW9uIGVhY2hQYXRoKGJhciwgY2IsIGNvbnRleHQpIHsKICAvLyBEbyBub3QgdXNlIEdyb3VwI2VhY2hDaGlsZCwgYmVjYXVzZSBpdCBkbyBub3Qgc3VwcG9ydCByZW1vdmUuCiAgenJVdGlsLmVhY2goYmFyLl9fcGljdG9yaWFsQnVuZGxlLmNoaWxkcmVuKCksIGZ1bmN0aW9uIChlbCkgewogICAgZWwgIT09IGJhci5fX3BpY3RvcmlhbEJhclJlY3QgJiYgY2IuY2FsbChjb250ZXh0LCBlbCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUF0dHIoZWwsIGltbWVkaWF0ZUF0dHJzLCBhbmltYXRpb25BdHRycywgc3ltYm9sTWV0YSwgaXNVcGRhdGUsIGNiKSB7CiAgaW1tZWRpYXRlQXR0cnMgJiYgZWwuYXR0cihpbW1lZGlhdGVBdHRycyk7IC8vIHdoZW4gc3ltYm9sQ2lwIHVzZWQsIG9ubHkgY2xpcCBwYXRoIGhhcyBpbml0IGFuaW1hdGlvbiwgb3RoZXJ3aXNlIGl0IHdvdWxkIGJlIHdlaXJkIGVmZmVjdC4KCiAgaWYgKHN5bWJvbE1ldGEuc3ltYm9sQ2xpcCAmJiAhaXNVcGRhdGUpIHsKICAgIGFuaW1hdGlvbkF0dHJzICYmIGVsLmF0dHIoYW5pbWF0aW9uQXR0cnMpOwogIH0gZWxzZSB7CiAgICBhbmltYXRpb25BdHRycyAmJiBncmFwaGljW2lzVXBkYXRlID8gJ3VwZGF0ZVByb3BzJyA6ICdpbml0UHJvcHMnXShlbCwgYW5pbWF0aW9uQXR0cnMsIHN5bWJvbE1ldGEuYW5pbWF0aW9uTW9kZWwsIHN5bWJvbE1ldGEuZGF0YUluZGV4LCBjYik7CiAgfQp9CgpmdW5jdGlvbiB1cGRhdGVDb21tb24oYmFyLCBvcHQsIHN5bWJvbE1ldGEpIHsKICB2YXIgY29sb3IgPSBzeW1ib2xNZXRhLmNvbG9yOwogIHZhciBkYXRhSW5kZXggPSBzeW1ib2xNZXRhLmRhdGFJbmRleDsKICB2YXIgaXRlbU1vZGVsID0gc3ltYm9sTWV0YS5pdGVtTW9kZWw7IC8vIENvbG9yIG11c3QgYmUgZXhjbHVkZWQuCiAgLy8gQmVjYXVzZSBzeW1ib2wgcHJvdmlkZSBzZXRDb2xvciBpbmRpdmlkdWFsbHkgdG8gc2V0IGZpbGwgYW5kIHN0cm9rZQoKICB2YXIgbm9ybWFsU3R5bGUgPSBpdGVtTW9kZWwuZ2V0TW9kZWwoJ2l0ZW1TdHlsZScpLmdldEl0ZW1TdHlsZShbJ2NvbG9yJ10pOwogIHZhciBob3ZlclN0eWxlID0gaXRlbU1vZGVsLmdldE1vZGVsKCdlbXBoYXNpcy5pdGVtU3R5bGUnKS5nZXRJdGVtU3R5bGUoKTsKICB2YXIgY3Vyc29yU3R5bGUgPSBpdGVtTW9kZWwuZ2V0U2hhbGxvdygnY3Vyc29yJyk7CiAgZWFjaFBhdGgoYmFyLCBmdW5jdGlvbiAocGF0aCkgewogICAgLy8gUEVORElORyBzZXRDb2xvciBzaG91bGQgYmUgYmVmb3JlIHNldFN0eWxlISEhCiAgICBwYXRoLnNldENvbG9yKGNvbG9yKTsKICAgIHBhdGguc2V0U3R5bGUoenJVdGlsLmRlZmF1bHRzKHsKICAgICAgZmlsbDogY29sb3IsCiAgICAgIG9wYWNpdHk6IHN5bWJvbE1ldGEub3BhY2l0eQogICAgfSwgbm9ybWFsU3R5bGUpKTsKICAgIGdyYXBoaWMuc2V0SG92ZXJTdHlsZShwYXRoLCBob3ZlclN0eWxlKTsKICAgIGN1cnNvclN0eWxlICYmIChwYXRoLmN1cnNvciA9IGN1cnNvclN0eWxlKTsKICAgIHBhdGguejIgPSBzeW1ib2xNZXRhLnoyOwogIH0pOwogIHZhciBiYXJSZWN0SG92ZXJTdHlsZSA9IHt9OwogIHZhciBiYXJQb3NpdGlvbk91dHNpZGUgPSBvcHQudmFsdWVEaW0ucG9zRGVzY1srKHN5bWJvbE1ldGEuYm91bmRpbmdMZW5ndGggPiAwKV07CiAgdmFyIGJhclJlY3QgPSBiYXIuX19waWN0b3JpYWxCYXJSZWN0OwogIHNldExhYmVsKGJhclJlY3Quc3R5bGUsIGJhclJlY3RIb3ZlclN0eWxlLCBpdGVtTW9kZWwsIGNvbG9yLCBvcHQuc2VyaWVzTW9kZWwsIGRhdGFJbmRleCwgYmFyUG9zaXRpb25PdXRzaWRlKTsKICBncmFwaGljLnNldEhvdmVyU3R5bGUoYmFyUmVjdCwgYmFyUmVjdEhvdmVyU3R5bGUpOwp9CgpmdW5jdGlvbiB0b0ludFRpbWVzKHRpbWVzKSB7CiAgdmFyIHJvdW5kZWRUaW1lcyA9IE1hdGgucm91bmQodGltZXMpOyAvLyBFc2NhcHNlIGFjY3VyYXRlIGVycm9yCgogIHJldHVybiBNYXRoLmFicyh0aW1lcyAtIHJvdW5kZWRUaW1lcykgPCAxZS00ID8gcm91bmRlZFRpbWVzIDogTWF0aC5jZWlsKHRpbWVzKTsKfQoKdmFyIF9kZWZhdWx0ID0gQmFyVmlldzsKbW9kdWxlLmV4cG9ydHMgPSBfZGVmYXVsdDs="},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/echarts/lib/chart/bar/PictorialBarView.js"],"names":["echarts","require","zrUtil","graphic","_symbol","createSymbol","_number","parsePercent","isNumeric","_helper","setLabel","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","xy","wh","index","posDesc","pathForLineWidth","Circle","BarView","extendChartView","type","render","seriesModel","ecModel","api","group","data","getData","oldData","_data","cartesian","coordinateSystem","baseAxis","getBaseAxis","isHorizontal","coordSysRect","grid","getRect","opt","ecSize","width","getWidth","height","getHeight","coordSys","coordSysExtent","x","y","valueDim","categoryDim","diff","add","dataIndex","hasValue","itemModel","getItemModel","symbolMeta","getSymbolMeta","bar","createBar","setItemGraphicEl","updateCommon","update","newIndex","oldIndex","getItemGraphicEl","remove","pictorialShapeStr","getShapeStr","__pictorialShapeStr","updateBar","__pictorialSymbolMeta","removeBar","animationModel","execute","dispose","noop","get","eachItemGraphicEl","removeAll","layout","getItemLayout","symbolRepeat","symbolClip","symbolPosition","symbolRotate","rotation","Math","PI","symbolPatternSize","isAnimationEnabled","symbolType","getItemVisual","color","symbolRepeatDirection","hoverAnimation","z2","getShallow","prepareBarLength","prepareSymbolSize","boundingLength","pxSign","prepareLineWidth","symbolScale","symbolSize","symbolOffset","isArray","prepareLayoutInfo","valueLineWidth","repeatCutLength","output","symbolBoundingData","valueAxis","getOtherAxis","zeroPx","toGlobalCoord","dataToCoord","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","reverse","axis","value","scale","parse","categorySize","abs","slice","attr","updateTransform","getLineScale","unitLength","max","pathLen","absBoundingLength","symbolMargin","retrieve","hasEndGap","lastIndexOf","length","uLenWithMargin","endFix","repeatSpecified","repeatTimes","toIntTimes","mDiff","sizeFix","pathPosition","bundlePosition","barRectShape","extend","clipShape","createPath","path","culling","setStyle","strokeNoScale","createOrUpdateRepeatSymbols","isUpdate","bundle","__pictorialBundle","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","updateHoverAnimation","target","position","on","onMouseOver","onMouseOut","i","trigger","createOrUpdateSingleSymbol","mainPath","__pictorialMainPath","createOrUpdateBarRect","rectShape","barRect","__pictorialBarRect","Rect","shape","silent","style","stroke","fill","lineWidth","createOrUpdateClip","clipPath","__pictorialClipPath","updateProps","setClipPath","getAnimationDelayParams","count","parentModel","off","animateTo","Group","labelRect","text","pathes","push","each","parent","join","cb","context","children","el","call","immediateAttrs","animationAttrs","normalStyle","getModel","getItemStyle","hoverStyle","cursorStyle","setColor","defaults","opacity","setHoverStyle","cursor","barRectHoverStyle","barPositionOutside","times","roundedTimes","round","ceil","_default","module","exports"],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,OAAO,GAAGC,OAAO,CAAC,eAAD,CAArB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,uBAAD,CAApB;;AAEA,IAAIE,OAAO,GAAGF,OAAO,CAAC,oBAAD,CAArB;;AAEA,IAAIG,OAAO,GAAGH,OAAO,CAAC,mBAAD,CAArB;;AAEA,IAAII,YAAY,GAAGD,OAAO,CAACC,YAA3B;;AAEA,IAAIC,OAAO,GAAGL,OAAO,CAAC,mBAAD,CAArB;;AAEA,IAAIM,YAAY,GAAGD,OAAO,CAACC,YAA3B;AACA,IAAIC,SAAS,GAAGF,OAAO,CAACE,SAAxB;;AAEA,IAAIC,OAAO,GAAGR,OAAO,CAAC,UAAD,CAArB;;AAEA,IAAIS,QAAQ,GAAGD,OAAO,CAACC,QAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,sBAAsB,GAAG,CAAC,WAAD,EAAc,aAAd,CAA7B,C,CAA2D;;AAE3D,IAAIC,YAAY,GAAG,CAAC;AAClBC,EAAAA,EAAE,EAAE,GADc;AAElBC,EAAAA,EAAE,EAAE,OAFc;AAGlBC,EAAAA,KAAK,EAAE,CAHW;AAIlBC,EAAAA,OAAO,EAAE,CAAC,MAAD,EAAS,OAAT;AAJS,CAAD,EAKhB;AACDH,EAAAA,EAAE,EAAE,GADH;AAEDC,EAAAA,EAAE,EAAE,QAFH;AAGDC,EAAAA,KAAK,EAAE,CAHN;AAIDC,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,QAAR;AAJR,CALgB,CAAnB;AAWA,IAAIC,gBAAgB,GAAG,IAAId,OAAO,CAACe,MAAZ,EAAvB;AACA,IAAIC,OAAO,GAAGnB,OAAO,CAACoB,eAAR,CAAwB;AACpCC,EAAAA,IAAI,EAAE,cAD8B;AAEpCC,EAAAA,MAAM,EAAE,gBAAUC,WAAV,EAAuBC,OAAvB,EAAgCC,GAAhC,EAAqC;AAC3C,QAAIC,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIC,IAAI,GAAGJ,WAAW,CAACK,OAAZ,EAAX;AACA,QAAIC,OAAO,GAAG,KAAKC,KAAnB;AACA,QAAIC,SAAS,GAAGR,WAAW,CAACS,gBAA5B;AACA,QAAIC,QAAQ,GAAGF,SAAS,CAACG,WAAV,EAAf;AACA,QAAIC,YAAY,GAAG,CAAC,CAACF,QAAQ,CAACE,YAAT,EAArB;AACA,QAAIC,YAAY,GAAGL,SAAS,CAACM,IAAV,CAAeC,OAAf,EAAnB;AACA,QAAIC,GAAG,GAAG;AACRC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAEhB,GAAG,CAACiB,QAAJ,EADD;AAENC,QAAAA,MAAM,EAAElB,GAAG,CAACmB,SAAJ;AAFF,OADA;AAKRrB,MAAAA,WAAW,EAAEA,WALL;AAMRsB,MAAAA,QAAQ,EAAEd,SANF;AAORe,MAAAA,cAAc,EAAE,CAAC,CAACV,YAAY,CAACW,CAAd,EAAiBX,YAAY,CAACW,CAAb,GAAiBX,YAAY,CAACK,KAA/C,CAAD,EAAwD,CAACL,YAAY,CAACY,CAAd,EAAiBZ,YAAY,CAACY,CAAb,GAAiBZ,YAAY,CAACO,MAA/C,CAAxD,CAPR;AAQRR,MAAAA,YAAY,EAAEA,YARN;AASRc,MAAAA,QAAQ,EAAErC,YAAY,CAAC,CAACuB,YAAF,CATd;AAURe,MAAAA,WAAW,EAAEtC,YAAY,CAAC,IAAIuB,YAAL;AAVjB,KAAV;AAYAR,IAAAA,IAAI,CAACwB,IAAL,CAAUtB,OAAV,EAAmBuB,GAAnB,CAAuB,UAAUC,SAAV,EAAqB;AAC1C,UAAI,CAAC1B,IAAI,CAAC2B,QAAL,CAAcD,SAAd,CAAL,EAA+B;AAC7B;AACD;;AAED,UAAIE,SAAS,GAAGC,YAAY,CAAC7B,IAAD,EAAO0B,SAAP,CAA5B;AACA,UAAII,UAAU,GAAGC,aAAa,CAAC/B,IAAD,EAAO0B,SAAP,EAAkBE,SAAlB,EAA6BhB,GAA7B,CAA9B;AACA,UAAIoB,GAAG,GAAGC,SAAS,CAACjC,IAAD,EAAOY,GAAP,EAAYkB,UAAZ,CAAnB;AACA9B,MAAAA,IAAI,CAACkC,gBAAL,CAAsBR,SAAtB,EAAiCM,GAAjC;AACAjC,MAAAA,KAAK,CAAC0B,GAAN,CAAUO,GAAV;AACAG,MAAAA,YAAY,CAACH,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,CAAZ;AACD,KAXD,EAWGM,MAXH,CAWU,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACtC,UAAIN,GAAG,GAAG9B,OAAO,CAACqC,gBAAR,CAAyBD,QAAzB,CAAV;;AAEA,UAAI,CAACtC,IAAI,CAAC2B,QAAL,CAAcU,QAAd,CAAL,EAA8B;AAC5BtC,QAAAA,KAAK,CAACyC,MAAN,CAAaR,GAAb;AACA;AACD;;AAED,UAAIJ,SAAS,GAAGC,YAAY,CAAC7B,IAAD,EAAOqC,QAAP,CAA5B;AACA,UAAIP,UAAU,GAAGC,aAAa,CAAC/B,IAAD,EAAOqC,QAAP,EAAiBT,SAAjB,EAA4BhB,GAA5B,CAA9B;AACA,UAAI6B,iBAAiB,GAAGC,WAAW,CAAC1C,IAAD,EAAO8B,UAAP,CAAnC;;AAEA,UAAIE,GAAG,IAAIS,iBAAiB,KAAKT,GAAG,CAACW,mBAArC,EAA0D;AACxD5C,QAAAA,KAAK,CAACyC,MAAN,CAAaR,GAAb;AACAhC,QAAAA,IAAI,CAACkC,gBAAL,CAAsBG,QAAtB,EAAgC,IAAhC;AACAL,QAAAA,GAAG,GAAG,IAAN;AACD;;AAED,UAAIA,GAAJ,EAAS;AACPY,QAAAA,SAAS,CAACZ,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,CAAT;AACD,OAFD,MAEO;AACLE,QAAAA,GAAG,GAAGC,SAAS,CAACjC,IAAD,EAAOY,GAAP,EAAYkB,UAAZ,EAAwB,IAAxB,CAAf;AACD;;AAED9B,MAAAA,IAAI,CAACkC,gBAAL,CAAsBG,QAAtB,EAAgCL,GAAhC;AACAA,MAAAA,GAAG,CAACa,qBAAJ,GAA4Bf,UAA5B,CAzBsC,CAyBE;;AAExC/B,MAAAA,KAAK,CAAC0B,GAAN,CAAUO,GAAV;AACAG,MAAAA,YAAY,CAACH,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,CAAZ;AACD,KAxCD,EAwCGU,MAxCH,CAwCU,UAAUd,SAAV,EAAqB;AAC7B,UAAIM,GAAG,GAAG9B,OAAO,CAACqC,gBAAR,CAAyBb,SAAzB,CAAV;AACAM,MAAAA,GAAG,IAAIc,SAAS,CAAC5C,OAAD,EAAUwB,SAAV,EAAqBM,GAAG,CAACa,qBAAJ,CAA0BE,cAA/C,EAA+Df,GAA/D,CAAhB;AACD,KA3CD,EA2CGgB,OA3CH;AA4CA,SAAK7C,KAAL,GAAaH,IAAb;AACA,WAAO,KAAKD,KAAZ;AACD,GApEmC;AAqEpCkD,EAAAA,OAAO,EAAE1E,MAAM,CAAC2E,IArEoB;AAsEpCV,EAAAA,MAAM,EAAE,gBAAU3C,OAAV,EAAmBC,GAAnB,EAAwB;AAC9B,QAAIC,KAAK,GAAG,KAAKA,KAAjB;AACA,QAAIC,IAAI,GAAG,KAAKG,KAAhB;;AAEA,QAAIN,OAAO,CAACsD,GAAR,CAAY,WAAZ,CAAJ,EAA8B;AAC5B,UAAInD,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACoD,iBAAL,CAAuB,UAAUpB,GAAV,EAAe;AACpCc,UAAAA,SAAS,CAAC9C,IAAD,EAAOgC,GAAG,CAACN,SAAX,EAAsB7B,OAAtB,EAA+BmC,GAA/B,CAAT;AACD,SAFD;AAGD;AACF,KAND,MAMO;AACLjC,MAAAA,KAAK,CAACsD,SAAN;AACD;AACF;AAnFmC,CAAxB,CAAd,C,CAoFI;;AAEJ,SAAStB,aAAT,CAAuB/B,IAAvB,EAA6B0B,SAA7B,EAAwCE,SAAxC,EAAmDhB,GAAnD,EAAwD;AACtD,MAAI0C,MAAM,GAAGtD,IAAI,CAACuD,aAAL,CAAmB7B,SAAnB,CAAb;AACA,MAAI8B,YAAY,GAAG5B,SAAS,CAACuB,GAAV,CAAc,cAAd,CAAnB;AACA,MAAIM,UAAU,GAAG7B,SAAS,CAACuB,GAAV,CAAc,YAAd,CAAjB;AACA,MAAIO,cAAc,GAAG9B,SAAS,CAACuB,GAAV,CAAc,gBAAd,KAAmC,OAAxD;AACA,MAAIQ,YAAY,GAAG/B,SAAS,CAACuB,GAAV,CAAc,cAAd,CAAnB;AACA,MAAIS,QAAQ,GAAG,CAACD,YAAY,IAAI,CAAjB,IAAsBE,IAAI,CAACC,EAA3B,GAAgC,GAAhC,IAAuC,CAAtD;AACA,MAAIC,iBAAiB,GAAGnC,SAAS,CAACuB,GAAV,CAAc,mBAAd,KAAsC,CAA9D;AACA,MAAIa,kBAAkB,GAAGpC,SAAS,CAACoC,kBAAV,EAAzB;AACA,MAAIlC,UAAU,GAAG;AACfJ,IAAAA,SAAS,EAAEA,SADI;AAEf4B,IAAAA,MAAM,EAAEA,MAFO;AAGf1B,IAAAA,SAAS,EAAEA,SAHI;AAIfqC,IAAAA,UAAU,EAAEjE,IAAI,CAACkE,aAAL,CAAmBxC,SAAnB,EAA8B,QAA9B,KAA2C,QAJxC;AAKfyC,IAAAA,KAAK,EAAEnE,IAAI,CAACkE,aAAL,CAAmBxC,SAAnB,EAA8B,OAA9B,CALQ;AAMf+B,IAAAA,UAAU,EAAEA,UANG;AAOfD,IAAAA,YAAY,EAAEA,YAPC;AAQfY,IAAAA,qBAAqB,EAAExC,SAAS,CAACuB,GAAV,CAAc,uBAAd,CARR;AASfY,IAAAA,iBAAiB,EAAEA,iBATJ;AAUfH,IAAAA,QAAQ,EAAEA,QAVK;AAWfb,IAAAA,cAAc,EAAEiB,kBAAkB,GAAGpC,SAAH,GAAe,IAXlC;AAYfyC,IAAAA,cAAc,EAAEL,kBAAkB,IAAIpC,SAAS,CAACuB,GAAV,CAAc,gBAAd,CAZvB;AAafmB,IAAAA,EAAE,EAAE1C,SAAS,CAAC2C,UAAV,CAAqB,GAArB,EAA0B,IAA1B,KAAmC;AAbxB,GAAjB;AAeAC,EAAAA,gBAAgB,CAAC5C,SAAD,EAAY4B,YAAZ,EAA0BF,MAA1B,EAAkC1C,GAAlC,EAAuCkB,UAAvC,CAAhB;AACA2C,EAAAA,iBAAiB,CAACzE,IAAD,EAAO0B,SAAP,EAAkB4B,MAAlB,EAA0BE,YAA1B,EAAwCC,UAAxC,EAAoD3B,UAAU,CAAC4C,cAA/D,EAA+E5C,UAAU,CAAC6C,MAA1F,EAAkGZ,iBAAlG,EAAqHnD,GAArH,EAA0HkB,UAA1H,CAAjB;AACA8C,EAAAA,gBAAgB,CAAChD,SAAD,EAAYE,UAAU,CAAC+C,WAAvB,EAAoCjB,QAApC,EAA8ChD,GAA9C,EAAmDkB,UAAnD,CAAhB;AACA,MAAIgD,UAAU,GAAGhD,UAAU,CAACgD,UAA5B;AACA,MAAIC,YAAY,GAAGnD,SAAS,CAACuB,GAAV,CAAc,cAAd,CAAnB;;AAEA,MAAI5E,MAAM,CAACyG,OAAP,CAAeD,YAAf,CAAJ,EAAkC;AAChCA,IAAAA,YAAY,GAAG,CAACnG,YAAY,CAACmG,YAAY,CAAC,CAAD,CAAb,EAAkBD,UAAU,CAAC,CAAD,CAA5B,CAAb,EAA+ClG,YAAY,CAACmG,YAAY,CAAC,CAAD,CAAb,EAAkBD,UAAU,CAAC,CAAD,CAA5B,CAA3D,CAAf;AACD;;AAEDG,EAAAA,iBAAiB,CAACrD,SAAD,EAAYkD,UAAZ,EAAwBxB,MAAxB,EAAgCE,YAAhC,EAA8CC,UAA9C,EAA0DsB,YAA1D,EAAwErB,cAAxE,EAAwF5B,UAAU,CAACoD,cAAnG,EAAmHpD,UAAU,CAAC4C,cAA9H,EAA8I5C,UAAU,CAACqD,eAAzJ,EAA0KvE,GAA1K,EAA+KkB,UAA/K,CAAjB;AACA,SAAOA,UAAP;AACD,C,CAAC;;;AAGF,SAAS0C,gBAAT,CAA0B5C,SAA1B,EAAqC4B,YAArC,EAAmDF,MAAnD,EAA2D1C,GAA3D,EAAgEwE,MAAhE,EAAwE;AACtE,MAAI9D,QAAQ,GAAGV,GAAG,CAACU,QAAnB;AACA,MAAI+D,kBAAkB,GAAGzD,SAAS,CAACuB,GAAV,CAAc,oBAAd,CAAzB;AACA,MAAImC,SAAS,GAAG1E,GAAG,CAACM,QAAJ,CAAaqE,YAAb,CAA0B3E,GAAG,CAACM,QAAJ,CAAaX,WAAb,EAA1B,CAAhB;AACA,MAAIiF,MAAM,GAAGF,SAAS,CAACG,aAAV,CAAwBH,SAAS,CAACI,WAAV,CAAsB,CAAtB,CAAxB,CAAb;AACA,MAAIC,SAAS,GAAG,IAAI,EAAErC,MAAM,CAAChC,QAAQ,CAACnC,EAAV,CAAN,IAAuB,CAAzB,CAApB;AACA,MAAIuF,cAAJ;;AAEA,MAAInG,MAAM,CAACyG,OAAP,CAAeK,kBAAf,CAAJ,EAAwC;AACtC,QAAIO,oBAAoB,GAAG,CAACC,oBAAoB,CAACP,SAAD,EAAYD,kBAAkB,CAAC,CAAD,CAA9B,CAApB,GAAyDG,MAA1D,EAAkEK,oBAAoB,CAACP,SAAD,EAAYD,kBAAkB,CAAC,CAAD,CAA9B,CAApB,GAAyDG,MAA3H,CAA3B;AACAI,IAAAA,oBAAoB,CAAC,CAAD,CAApB,GAA0BA,oBAAoB,CAAC,CAAD,CAA9C,IAAqDA,oBAAoB,CAACE,OAArB,EAArD;AACApB,IAAAA,cAAc,GAAGkB,oBAAoB,CAACD,SAAD,CAArC;AACD,GAJD,MAIO,IAAIN,kBAAkB,IAAI,IAA1B,EAAgC;AACrCX,IAAAA,cAAc,GAAGmB,oBAAoB,CAACP,SAAD,EAAYD,kBAAZ,CAApB,GAAsDG,MAAvE;AACD,GAFM,MAEA,IAAIhC,YAAJ,EAAkB;AACvBkB,IAAAA,cAAc,GAAG9D,GAAG,CAACO,cAAJ,CAAmBG,QAAQ,CAAClC,KAA5B,EAAmCuG,SAAnC,IAAgDH,MAAjE;AACD,GAFM,MAEA;AACLd,IAAAA,cAAc,GAAGpB,MAAM,CAAChC,QAAQ,CAACnC,EAAV,CAAvB;AACD;;AAEDiG,EAAAA,MAAM,CAACV,cAAP,GAAwBA,cAAxB;;AAEA,MAAIlB,YAAJ,EAAkB;AAChB4B,IAAAA,MAAM,CAACD,eAAP,GAAyB7B,MAAM,CAAChC,QAAQ,CAACnC,EAAV,CAA/B;AACD;;AAEDiG,EAAAA,MAAM,CAACT,MAAP,GAAgBD,cAAc,GAAG,CAAjB,GAAqB,CAArB,GAAyBA,cAAc,GAAG,CAAjB,GAAqB,CAAC,CAAtB,GAA0B,CAAnE;AACD;;AAED,SAASmB,oBAAT,CAA8BE,IAA9B,EAAoCC,KAApC,EAA2C;AACzC,SAAOD,IAAI,CAACN,aAAL,CAAmBM,IAAI,CAACL,WAAL,CAAiBK,IAAI,CAACE,KAAL,CAAWC,KAAX,CAAiBF,KAAjB,CAAjB,CAAnB,CAAP;AACD,C,CAAC;;;AAGF,SAASvB,iBAAT,CAA2BzE,IAA3B,EAAiC0B,SAAjC,EAA4C4B,MAA5C,EAAoDE,YAApD,EAAkEC,UAAlE,EAA8EiB,cAA9E,EAA8FC,MAA9F,EAAsGZ,iBAAtG,EAAyHnD,GAAzH,EAA8HwE,MAA9H,EAAsI;AACpI,MAAI9D,QAAQ,GAAGV,GAAG,CAACU,QAAnB;AACA,MAAIC,WAAW,GAAGX,GAAG,CAACW,WAAtB;AACA,MAAI4E,YAAY,GAAGtC,IAAI,CAACuC,GAAL,CAAS9C,MAAM,CAAC/B,WAAW,CAACpC,EAAb,CAAf,CAAnB;AACA,MAAI2F,UAAU,GAAG9E,IAAI,CAACkE,aAAL,CAAmBxC,SAAnB,EAA8B,YAA9B,CAAjB;;AAEA,MAAInD,MAAM,CAACyG,OAAP,CAAeF,UAAf,CAAJ,EAAgC;AAC9BA,IAAAA,UAAU,GAAGA,UAAU,CAACuB,KAAX,EAAb;AACD,GAFD,MAEO;AACL,QAAIvB,UAAU,IAAI,IAAlB,EAAwB;AACtBA,MAAAA,UAAU,GAAG,MAAb;AACD;;AAEDA,IAAAA,UAAU,GAAG,CAACA,UAAD,EAAaA,UAAb,CAAb;AACD,GAdmI,CAclI;AACF;AACA;AACA;;;AAGAA,EAAAA,UAAU,CAACvD,WAAW,CAACnC,KAAb,CAAV,GAAgCR,YAAY,CAACkG,UAAU,CAACvD,WAAW,CAACnC,KAAb,CAAX,EAAgC+G,YAAhC,CAA5C;AACArB,EAAAA,UAAU,CAACxD,QAAQ,CAAClC,KAAV,CAAV,GAA6BR,YAAY,CAACkG,UAAU,CAACxD,QAAQ,CAAClC,KAAV,CAAX,EAA6BoE,YAAY,GAAG2C,YAAH,GAAkBtC,IAAI,CAACuC,GAAL,CAAS1B,cAAT,CAA3D,CAAzC;AACAU,EAAAA,MAAM,CAACN,UAAP,GAAoBA,UAApB,CAtBoI,CAsBpG;;AAEhC,MAAID,WAAW,GAAGO,MAAM,CAACP,WAAP,GAAqB,CAACC,UAAU,CAAC,CAAD,CAAV,GAAgBf,iBAAjB,EAAoCe,UAAU,CAAC,CAAD,CAAV,GAAgBf,iBAApD,CAAvC,CAxBoI,CAwBrB;;AAE/Gc,EAAAA,WAAW,CAACvD,QAAQ,CAAClC,KAAV,CAAX,IAA+B,CAACwB,GAAG,CAACJ,YAAJ,GAAmB,CAAC,CAApB,GAAwB,CAAzB,IAA8BmE,MAA7D;AACD;;AAED,SAASC,gBAAT,CAA0BhD,SAA1B,EAAqCiD,WAArC,EAAkDjB,QAAlD,EAA4DhD,GAA5D,EAAiEwE,MAAjE,EAAyE;AACvE;AACA;AACA;AACA,MAAIF,cAAc,GAAGtD,SAAS,CAACuB,GAAV,CAAcnE,sBAAd,KAAyC,CAA9D;;AAEA,MAAIkG,cAAJ,EAAoB;AAClB5F,IAAAA,gBAAgB,CAACgH,IAAjB,CAAsB;AACpBL,MAAAA,KAAK,EAAEpB,WAAW,CAACwB,KAAZ,EADa;AAEpBzC,MAAAA,QAAQ,EAAEA;AAFU,KAAtB;AAIAtE,IAAAA,gBAAgB,CAACiH,eAAjB;AACArB,IAAAA,cAAc,IAAI5F,gBAAgB,CAACkH,YAAjB,EAAlB;AACAtB,IAAAA,cAAc,IAAIL,WAAW,CAACjE,GAAG,CAACU,QAAJ,CAAalC,KAAd,CAA7B;AACD;;AAEDgG,EAAAA,MAAM,CAACF,cAAP,GAAwBA,cAAxB;AACD;;AAED,SAASD,iBAAT,CAA2BrD,SAA3B,EAAsCkD,UAAtC,EAAkDxB,MAAlD,EAA0DE,YAA1D,EAAwEC,UAAxE,EAAoFsB,YAApF,EAAkGrB,cAAlG,EAAkHwB,cAAlH,EAAkIR,cAAlI,EAAkJS,eAAlJ,EAAmKvE,GAAnK,EAAwKwE,MAAxK,EAAgL;AAC9K,MAAI7D,WAAW,GAAGX,GAAG,CAACW,WAAtB;AACA,MAAID,QAAQ,GAAGV,GAAG,CAACU,QAAnB;AACA,MAAIqD,MAAM,GAAGS,MAAM,CAACT,MAApB;AACA,MAAI8B,UAAU,GAAG5C,IAAI,CAAC6C,GAAL,CAAS5B,UAAU,CAACxD,QAAQ,CAAClC,KAAV,CAAV,GAA6B8F,cAAtC,EAAsD,CAAtD,CAAjB;AACA,MAAIyB,OAAO,GAAGF,UAAd,CAL8K,CAKpJ;AAC1B;AACA;;AAEA,MAAIjD,YAAJ,EAAkB;AAChB,QAAIoD,iBAAiB,GAAG/C,IAAI,CAACuC,GAAL,CAAS1B,cAAT,CAAxB;AACA,QAAImC,YAAY,GAAGtI,MAAM,CAACuI,QAAP,CAAgBlF,SAAS,CAACuB,GAAV,CAAc,cAAd,CAAhB,EAA+C,KAA/C,IAAwD,EAA3E;AACA,QAAI4D,SAAS,GAAG,KAAhB;;AAEA,QAAIF,YAAY,CAACG,WAAb,CAAyB,GAAzB,MAAkCH,YAAY,CAACI,MAAb,GAAsB,CAA5D,EAA+D;AAC7DF,MAAAA,SAAS,GAAG,IAAZ;AACAF,MAAAA,YAAY,GAAGA,YAAY,CAACR,KAAb,CAAmB,CAAnB,EAAsBQ,YAAY,CAACI,MAAb,GAAsB,CAA5C,CAAf;AACD;;AAEDJ,IAAAA,YAAY,GAAGjI,YAAY,CAACiI,YAAD,EAAe/B,UAAU,CAACxD,QAAQ,CAAClC,KAAV,CAAzB,CAA3B;AACA,QAAI8H,cAAc,GAAGrD,IAAI,CAAC6C,GAAL,CAASD,UAAU,GAAGI,YAAY,GAAG,CAArC,EAAwC,CAAxC,CAArB,CAXgB,CAWiD;AACjE;;AAEA,QAAIM,MAAM,GAAGJ,SAAS,GAAG,CAAH,GAAOF,YAAY,GAAG,CAA5C,CAdgB,CAc+B;AAC/C;;AAEA,QAAIO,eAAe,GAAGvI,SAAS,CAAC2E,YAAD,CAA/B;AACA,QAAI6D,WAAW,GAAGD,eAAe,GAAG5D,YAAH,GAAkB8D,UAAU,CAAC,CAACV,iBAAiB,GAAGO,MAArB,IAA+BD,cAAhC,CAA7D,CAlBgB,CAkB8F;AAC9G;;AAEA,QAAIK,KAAK,GAAGX,iBAAiB,GAAGS,WAAW,GAAGZ,UAA9C;AACAI,IAAAA,YAAY,GAAGU,KAAK,GAAG,CAAR,IAAaR,SAAS,GAAGM,WAAH,GAAiBA,WAAW,GAAG,CAArD,CAAf;AACAH,IAAAA,cAAc,GAAGT,UAAU,GAAGI,YAAY,GAAG,CAA7C;AACAM,IAAAA,MAAM,GAAGJ,SAAS,GAAG,CAAH,GAAOF,YAAY,GAAG,CAAxC,CAxBgB,CAwB2B;;AAE3C,QAAI,CAACO,eAAD,IAAoB5D,YAAY,KAAK,OAAzC,EAAkD;AAChD6D,MAAAA,WAAW,GAAGlC,eAAe,GAAGmC,UAAU,CAAC,CAACzD,IAAI,CAACuC,GAAL,CAASjB,eAAT,IAA4BgC,MAA7B,IAAuCD,cAAxC,CAAb,GAAuE,CAApG;AACD;;AAEDP,IAAAA,OAAO,GAAGU,WAAW,GAAGH,cAAd,GAA+BC,MAAzC;AACA/B,IAAAA,MAAM,CAACiC,WAAP,GAAqBA,WAArB;AACAjC,IAAAA,MAAM,CAACyB,YAAP,GAAsBA,YAAtB;AACD;;AAED,MAAIW,OAAO,GAAG7C,MAAM,IAAIgC,OAAO,GAAG,CAAd,CAApB;AACA,MAAIc,YAAY,GAAGrC,MAAM,CAACqC,YAAP,GAAsB,EAAzC;AACAA,EAAAA,YAAY,CAAClG,WAAW,CAACnC,KAAb,CAAZ,GAAkCkE,MAAM,CAAC/B,WAAW,CAACpC,EAAb,CAAN,GAAyB,CAA3D;AACAsI,EAAAA,YAAY,CAACnG,QAAQ,CAAClC,KAAV,CAAZ,GAA+BsE,cAAc,KAAK,OAAnB,GAA6B8D,OAA7B,GAAuC9D,cAAc,KAAK,KAAnB,GAA2BgB,cAAc,GAAG8C,OAA5C,GAAsD9C,cAAc,GAAG,CAA7I,CA/C8K,CA+C9B;;AAEhJ,MAAIK,YAAJ,EAAkB;AAChB0C,IAAAA,YAAY,CAAC,CAAD,CAAZ,IAAmB1C,YAAY,CAAC,CAAD,CAA/B;AACA0C,IAAAA,YAAY,CAAC,CAAD,CAAZ,IAAmB1C,YAAY,CAAC,CAAD,CAA/B;AACD;;AAED,MAAI2C,cAAc,GAAGtC,MAAM,CAACsC,cAAP,GAAwB,EAA7C;AACAA,EAAAA,cAAc,CAACnG,WAAW,CAACnC,KAAb,CAAd,GAAoCkE,MAAM,CAAC/B,WAAW,CAACrC,EAAb,CAA1C;AACAwI,EAAAA,cAAc,CAACpG,QAAQ,CAAClC,KAAV,CAAd,GAAiCkE,MAAM,CAAChC,QAAQ,CAACpC,EAAV,CAAvC;AACA,MAAIyI,YAAY,GAAGvC,MAAM,CAACuC,YAAP,GAAsBpJ,MAAM,CAACqJ,MAAP,CAAc,EAAd,EAAkBtE,MAAlB,CAAzC;AACAqE,EAAAA,YAAY,CAACrG,QAAQ,CAACnC,EAAV,CAAZ,GAA4BwF,MAAM,GAAGd,IAAI,CAAC6C,GAAL,CAAS7C,IAAI,CAACuC,GAAL,CAAS9C,MAAM,CAAChC,QAAQ,CAACnC,EAAV,CAAf,CAAT,EAAwC0E,IAAI,CAACuC,GAAL,CAASqB,YAAY,CAACnG,QAAQ,CAAClC,KAAV,CAAZ,GAA+BoI,OAAxC,CAAxC,CAArC;AACAG,EAAAA,YAAY,CAACpG,WAAW,CAACpC,EAAb,CAAZ,GAA+BmE,MAAM,CAAC/B,WAAW,CAACpC,EAAb,CAArC;AACA,MAAI0I,SAAS,GAAGzC,MAAM,CAACyC,SAAP,GAAmB,EAAnC,CA5D8K,CA4DvI;;AAEvCA,EAAAA,SAAS,CAACtG,WAAW,CAACrC,EAAb,CAAT,GAA4B,CAACoE,MAAM,CAAC/B,WAAW,CAACrC,EAAb,CAAnC;AACA2I,EAAAA,SAAS,CAACtG,WAAW,CAACpC,EAAb,CAAT,GAA4ByB,GAAG,CAACC,MAAJ,CAAWU,WAAW,CAACpC,EAAvB,CAA5B;AACA0I,EAAAA,SAAS,CAACvG,QAAQ,CAACpC,EAAV,CAAT,GAAyB,CAAzB;AACA2I,EAAAA,SAAS,CAACvG,QAAQ,CAACnC,EAAV,CAAT,GAAyBmE,MAAM,CAAChC,QAAQ,CAACnC,EAAV,CAA/B;AACD;;AAED,SAAS2I,UAAT,CAAoBhG,UAApB,EAAgC;AAC9B,MAAIiC,iBAAiB,GAAGjC,UAAU,CAACiC,iBAAnC;AACA,MAAIgE,IAAI,GAAGrJ,YAAY,EAAE;AACzBoD,EAAAA,UAAU,CAACmC,UADY,EACA,CAACF,iBAAD,GAAqB,CADrB,EACwB,CAACA,iBAAD,GAAqB,CAD7C,EACgDA,iBADhD,EACmEA,iBADnE,EACsFjC,UAAU,CAACqC,KADjG,CAAvB;AAEA4D,EAAAA,IAAI,CAACzB,IAAL,CAAU;AACR0B,IAAAA,OAAO,EAAE;AADD,GAAV;AAGAD,EAAAA,IAAI,CAACrI,IAAL,KAAc,OAAd,IAAyBqI,IAAI,CAACE,QAAL,CAAc;AACrCC,IAAAA,aAAa,EAAE;AADsB,GAAd,CAAzB;AAGA,SAAOH,IAAP;AACD;;AAED,SAASI,2BAAT,CAAqCnG,GAArC,EAA0CpB,GAA1C,EAA+CkB,UAA/C,EAA2DsG,QAA3D,EAAqE;AACnE,MAAIC,MAAM,GAAGrG,GAAG,CAACsG,iBAAjB;AACA,MAAIxD,UAAU,GAAGhD,UAAU,CAACgD,UAA5B;AACA,MAAII,cAAc,GAAGpD,UAAU,CAACoD,cAAhC;AACA,MAAIuC,YAAY,GAAG3F,UAAU,CAAC2F,YAA9B;AACA,MAAInG,QAAQ,GAAGV,GAAG,CAACU,QAAnB;AACA,MAAI+F,WAAW,GAAGvF,UAAU,CAACuF,WAAX,IAA0B,CAA5C;AACA,MAAIjI,KAAK,GAAG,CAAZ;AACA,MAAImJ,IAAI,GAAGzD,UAAU,CAAClE,GAAG,CAACU,QAAJ,CAAalC,KAAd,CAAV,GAAiC8F,cAAjC,GAAkDpD,UAAU,CAAC+E,YAAX,GAA0B,CAAvF;AACA2B,EAAAA,QAAQ,CAACxG,GAAD,EAAM,UAAU+F,IAAV,EAAgB;AAC5BA,IAAAA,IAAI,CAACU,yBAAL,GAAiCrJ,KAAjC;AACA2I,IAAAA,IAAI,CAACW,sBAAL,GAA8BrB,WAA9B;;AAEA,QAAIjI,KAAK,GAAGiI,WAAZ,EAAyB;AACvBsB,MAAAA,UAAU,CAACZ,IAAD,EAAO,IAAP,EAAaa,UAAU,CAACxJ,KAAD,CAAvB,EAAgC0C,UAAhC,EAA4CsG,QAA5C,CAAV;AACD,KAFD,MAEO;AACLO,MAAAA,UAAU,CAACZ,IAAD,EAAO,IAAP,EAAa;AACrB9B,QAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ;AADc,OAAb,EAEPnE,UAFO,EAEKsG,QAFL,EAEe,YAAY;AACnCC,QAAAA,MAAM,CAAC7F,MAAP,CAAcuF,IAAd;AACD,OAJS,CAAV;AAKD;;AAEDc,IAAAA,oBAAoB,CAACd,IAAD,EAAOjG,UAAP,CAApB;AACA1C,IAAAA,KAAK;AACN,GAhBO,CAAR;;AAkBA,SAAOA,KAAK,GAAGiI,WAAf,EAA4BjI,KAAK,EAAjC,EAAqC;AACnC,QAAI2I,IAAI,GAAGD,UAAU,CAAChG,UAAD,CAArB;AACAiG,IAAAA,IAAI,CAACU,yBAAL,GAAiCrJ,KAAjC;AACA2I,IAAAA,IAAI,CAACW,sBAAL,GAA8BrB,WAA9B;AACAgB,IAAAA,MAAM,CAAC5G,GAAP,CAAWsG,IAAX;AACA,QAAIe,MAAM,GAAGF,UAAU,CAACxJ,KAAD,CAAvB;AACAuJ,IAAAA,UAAU,CAACZ,IAAD,EAAO;AACfgB,MAAAA,QAAQ,EAAED,MAAM,CAACC,QADF;AAEf9C,MAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ;AAFQ,KAAP,EAGP;AACDA,MAAAA,KAAK,EAAE6C,MAAM,CAAC7C,KADb;AAEDrC,MAAAA,QAAQ,EAAEkF,MAAM,CAAClF;AAFhB,KAHO,EAMP9B,UANO,EAMKsG,QANL,CAAV,CANmC,CAYT;AAC1B;;AAEAL,IAAAA,IAAI,CAACiB,EAAL,CAAQ,WAAR,EAAqBC,WAArB,EAAkCD,EAAlC,CAAqC,UAArC,EAAiDE,UAAjD;AACAL,IAAAA,oBAAoB,CAACd,IAAD,EAAOjG,UAAP,CAApB;AACD;;AAED,WAAS8G,UAAT,CAAoBxJ,KAApB,EAA2B;AACzB,QAAI2J,QAAQ,GAAGtB,YAAY,CAACpB,KAAb,EAAf,CADyB,CACY;AACrC;;AAEA,QAAI1B,MAAM,GAAG7C,UAAU,CAAC6C,MAAxB;AACA,QAAIwE,CAAC,GAAG/J,KAAR;;AAEA,QAAI0C,UAAU,CAACsC,qBAAX,KAAqC,OAArC,GAA+CO,MAAM,GAAG,CAAxD,GAA4DA,MAAM,GAAG,CAAzE,EAA4E;AAC1EwE,MAAAA,CAAC,GAAG9B,WAAW,GAAG,CAAd,GAAkBjI,KAAtB;AACD;;AAED2J,IAAAA,QAAQ,CAACzH,QAAQ,CAAClC,KAAV,CAAR,GAA2BmJ,IAAI,IAAIY,CAAC,GAAG9B,WAAW,GAAG,CAAlB,GAAsB,GAA1B,CAAJ,GAAqCI,YAAY,CAACnG,QAAQ,CAAClC,KAAV,CAA5E;AACA,WAAO;AACL2J,MAAAA,QAAQ,EAAEA,QADL;AAEL9C,MAAAA,KAAK,EAAEnE,UAAU,CAAC+C,WAAX,CAAuBwB,KAAvB,EAFF;AAGLzC,MAAAA,QAAQ,EAAE9B,UAAU,CAAC8B;AAHhB,KAAP;AAKD;;AAED,WAASqF,WAAT,GAAuB;AACrBT,IAAAA,QAAQ,CAACxG,GAAD,EAAM,UAAU+F,IAAV,EAAgB;AAC5BA,MAAAA,IAAI,CAACqB,OAAL,CAAa,UAAb;AACD,KAFO,CAAR;AAGD;;AAED,WAASF,UAAT,GAAsB;AACpBV,IAAAA,QAAQ,CAACxG,GAAD,EAAM,UAAU+F,IAAV,EAAgB;AAC5BA,MAAAA,IAAI,CAACqB,OAAL,CAAa,QAAb;AACD,KAFO,CAAR;AAGD;AACF;;AAED,SAASC,0BAAT,CAAoCrH,GAApC,EAAyCpB,GAAzC,EAA8CkB,UAA9C,EAA0DsG,QAA1D,EAAoE;AAClE,MAAIC,MAAM,GAAGrG,GAAG,CAACsG,iBAAjB;AACA,MAAIgB,QAAQ,GAAGtH,GAAG,CAACuH,mBAAnB;;AAEA,MAAI,CAACD,QAAL,EAAe;AACbA,IAAAA,QAAQ,GAAGtH,GAAG,CAACuH,mBAAJ,GAA0BzB,UAAU,CAAChG,UAAD,CAA/C;AACAuG,IAAAA,MAAM,CAAC5G,GAAP,CAAW6H,QAAX;AACAX,IAAAA,UAAU,CAACW,QAAD,EAAW;AACnBP,MAAAA,QAAQ,EAAEjH,UAAU,CAAC2F,YAAX,CAAwBpB,KAAxB,EADS;AAEnBJ,MAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFY;AAGnBrC,MAAAA,QAAQ,EAAE9B,UAAU,CAAC8B;AAHF,KAAX,EAIP;AACDqC,MAAAA,KAAK,EAAEnE,UAAU,CAAC+C,WAAX,CAAuBwB,KAAvB;AADN,KAJO,EAMPvE,UANO,EAMKsG,QANL,CAAV;AAOAkB,IAAAA,QAAQ,CAACN,EAAT,CAAY,WAAZ,EAAyBC,WAAzB,EAAsCD,EAAtC,CAAyC,UAAzC,EAAqDE,UAArD;AACD,GAXD,MAWO;AACLP,IAAAA,UAAU,CAACW,QAAD,EAAW,IAAX,EAAiB;AACzBP,MAAAA,QAAQ,EAAEjH,UAAU,CAAC2F,YAAX,CAAwBpB,KAAxB,EADe;AAEzBJ,MAAAA,KAAK,EAAEnE,UAAU,CAAC+C,WAAX,CAAuBwB,KAAvB,EAFkB;AAGzBzC,MAAAA,QAAQ,EAAE9B,UAAU,CAAC8B;AAHI,KAAjB,EAIP9B,UAJO,EAIKsG,QAJL,CAAV;AAKD;;AAEDS,EAAAA,oBAAoB,CAACS,QAAD,EAAWxH,UAAX,CAApB;;AAEA,WAASmH,WAAT,GAAuB;AACrB,SAAKG,OAAL,CAAa,UAAb;AACD;;AAED,WAASF,UAAT,GAAsB;AACpB,SAAKE,OAAL,CAAa,QAAb;AACD;AACF,C,CAAC;;;AAGF,SAASI,qBAAT,CAA+BxH,GAA/B,EAAoCF,UAApC,EAAgDsG,QAAhD,EAA0D;AACxD,MAAIqB,SAAS,GAAGlL,MAAM,CAACqJ,MAAP,CAAc,EAAd,EAAkB9F,UAAU,CAAC6F,YAA7B,CAAhB;AACA,MAAI+B,OAAO,GAAG1H,GAAG,CAAC2H,kBAAlB;;AAEA,MAAI,CAACD,OAAL,EAAc;AACZA,IAAAA,OAAO,GAAG1H,GAAG,CAAC2H,kBAAJ,GAAyB,IAAInL,OAAO,CAACoL,IAAZ,CAAiB;AAClDtF,MAAAA,EAAE,EAAE,CAD8C;AAElDuF,MAAAA,KAAK,EAAEJ,SAF2C;AAGlDK,MAAAA,MAAM,EAAE,IAH0C;AAIlDC,MAAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE,aADH;AAELC,QAAAA,IAAI,EAAE,aAFD;AAGLC,QAAAA,SAAS,EAAE;AAHN;AAJ2C,KAAjB,CAAnC;AAUAlI,IAAAA,GAAG,CAACP,GAAJ,CAAQiI,OAAR;AACD,GAZD,MAYO;AACLf,IAAAA,UAAU,CAACe,OAAD,EAAU,IAAV,EAAgB;AACxBG,MAAAA,KAAK,EAAEJ;AADiB,KAAhB,EAEP3H,UAFO,EAEKsG,QAFL,CAAV;AAGD;AACF;;AAED,SAAS+B,kBAAT,CAA4BnI,GAA5B,EAAiCpB,GAAjC,EAAsCkB,UAAtC,EAAkDsG,QAAlD,EAA4D;AAC1D;AACA,MAAItG,UAAU,CAAC2B,UAAf,EAA2B;AACzB,QAAI2G,QAAQ,GAAGpI,GAAG,CAACqI,mBAAnB;AACA,QAAIxC,SAAS,GAAGtJ,MAAM,CAACqJ,MAAP,CAAc,EAAd,EAAkB9F,UAAU,CAAC+F,SAA7B,CAAhB;AACA,QAAIvG,QAAQ,GAAGV,GAAG,CAACU,QAAnB;AACA,QAAIyB,cAAc,GAAGjB,UAAU,CAACiB,cAAhC;AACA,QAAIrB,SAAS,GAAGI,UAAU,CAACJ,SAA3B;;AAEA,QAAI0I,QAAJ,EAAc;AACZ5L,MAAAA,OAAO,CAAC8L,WAAR,CAAoBF,QAApB,EAA8B;AAC5BP,QAAAA,KAAK,EAAEhC;AADqB,OAA9B,EAEG9E,cAFH,EAEmBrB,SAFnB;AAGD,KAJD,MAIO;AACLmG,MAAAA,SAAS,CAACvG,QAAQ,CAACnC,EAAV,CAAT,GAAyB,CAAzB;AACAiL,MAAAA,QAAQ,GAAG,IAAI5L,OAAO,CAACoL,IAAZ,CAAiB;AAC1BC,QAAAA,KAAK,EAAEhC;AADmB,OAAjB,CAAX;;AAIA7F,MAAAA,GAAG,CAACsG,iBAAJ,CAAsBiC,WAAtB,CAAkCH,QAAlC;;AAEApI,MAAAA,GAAG,CAACqI,mBAAJ,GAA0BD,QAA1B;AACA,UAAItB,MAAM,GAAG,EAAb;AACAA,MAAAA,MAAM,CAACxH,QAAQ,CAACnC,EAAV,CAAN,GAAsB2C,UAAU,CAAC+F,SAAX,CAAqBvG,QAAQ,CAACnC,EAA9B,CAAtB;AACAX,MAAAA,OAAO,CAAC4J,QAAQ,GAAG,aAAH,GAAmB,WAA5B,CAAP,CAAgDgC,QAAhD,EAA0D;AACxDP,QAAAA,KAAK,EAAEf;AADiD,OAA1D,EAEG/F,cAFH,EAEmBrB,SAFnB;AAGD;AACF;AACF;;AAED,SAASG,YAAT,CAAsB7B,IAAtB,EAA4B0B,SAA5B,EAAuC;AACrC,MAAIE,SAAS,GAAG5B,IAAI,CAAC6B,YAAL,CAAkBH,SAAlB,CAAhB;AACAE,EAAAA,SAAS,CAAC4I,uBAAV,GAAoCA,uBAApC;AACA5I,EAAAA,SAAS,CAACoC,kBAAV,GAA+BA,kBAA/B;AACA,SAAOpC,SAAP;AACD;;AAED,SAAS4I,uBAAT,CAAiCzC,IAAjC,EAAuC;AACrC;AACA,SAAO;AACL3I,IAAAA,KAAK,EAAE2I,IAAI,CAACU,yBADP;AAELgC,IAAAA,KAAK,EAAE1C,IAAI,CAACW;AAFP,GAAP;AAID;;AAED,SAAS1E,kBAAT,GAA8B;AAC5B;AACA,SAAO,KAAK0G,WAAL,CAAiB1G,kBAAjB,MAAyC,CAAC,CAAC,KAAKO,UAAL,CAAgB,WAAhB,CAAlD;AACD;;AAED,SAASsE,oBAAT,CAA8Bd,IAA9B,EAAoCjG,UAApC,EAAgD;AAC9CiG,EAAAA,IAAI,CAAC4C,GAAL,CAAS,UAAT,EAAqBA,GAArB,CAAyB,QAAzB;AACA,MAAI1E,KAAK,GAAGnE,UAAU,CAAC+C,WAAX,CAAuBwB,KAAvB,EAAZ;AACAvE,EAAAA,UAAU,CAACuC,cAAX,IAA6B0D,IAAI,CAACiB,EAAL,CAAQ,UAAR,EAAoB,YAAY;AAC3D,SAAK4B,SAAL,CAAe;AACb3E,MAAAA,KAAK,EAAE,CAACA,KAAK,CAAC,CAAD,CAAL,GAAW,GAAZ,EAAiBA,KAAK,CAAC,CAAD,CAAL,GAAW,GAA5B;AADM,KAAf,EAEG,GAFH,EAEQ,YAFR;AAGD,GAJ4B,EAI1B+C,EAJ0B,CAIvB,QAJuB,EAIb,YAAY;AAC1B,SAAK4B,SAAL,CAAe;AACb3E,MAAAA,KAAK,EAAEA,KAAK,CAACI,KAAN;AADM,KAAf,EAEG,GAFH,EAEQ,YAFR;AAGD,GAR4B,CAA7B;AASD;;AAED,SAASpE,SAAT,CAAmBjC,IAAnB,EAAyBY,GAAzB,EAA8BkB,UAA9B,EAA0CsG,QAA1C,EAAoD;AAClD;AACA,MAAIpG,GAAG,GAAG,IAAIxD,OAAO,CAACqM,KAAZ,EAAV,CAFkD,CAEnB;;AAE/B,MAAIxC,MAAM,GAAG,IAAI7J,OAAO,CAACqM,KAAZ,EAAb;AACA7I,EAAAA,GAAG,CAACP,GAAJ,CAAQ4G,MAAR;AACArG,EAAAA,GAAG,CAACsG,iBAAJ,GAAwBD,MAAxB;AACAA,EAAAA,MAAM,CAAC/B,IAAP,CAAY,UAAZ,EAAwBxE,UAAU,CAAC4F,cAAX,CAA0BrB,KAA1B,EAAxB;;AAEA,MAAIvE,UAAU,CAAC0B,YAAf,EAA6B;AAC3B2E,IAAAA,2BAA2B,CAACnG,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,CAA3B;AACD,GAFD,MAEO;AACLuH,IAAAA,0BAA0B,CAACrH,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,CAA1B;AACD;;AAED0H,EAAAA,qBAAqB,CAACxH,GAAD,EAAMF,UAAN,EAAkBsG,QAAlB,CAArB;AACA+B,EAAAA,kBAAkB,CAACnI,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,EAAuBsG,QAAvB,CAAlB;AACApG,EAAAA,GAAG,CAACW,mBAAJ,GAA0BD,WAAW,CAAC1C,IAAD,EAAO8B,UAAP,CAArC;AACAE,EAAAA,GAAG,CAACa,qBAAJ,GAA4Bf,UAA5B;AACA,SAAOE,GAAP;AACD;;AAED,SAASY,SAAT,CAAmBZ,GAAnB,EAAwBpB,GAAxB,EAA6BkB,UAA7B,EAAyC;AACvC,MAAIiB,cAAc,GAAGjB,UAAU,CAACiB,cAAhC;AACA,MAAIrB,SAAS,GAAGI,UAAU,CAACJ,SAA3B;AACA,MAAI2G,MAAM,GAAGrG,GAAG,CAACsG,iBAAjB;AACA9J,EAAAA,OAAO,CAAC8L,WAAR,CAAoBjC,MAApB,EAA4B;AAC1BU,IAAAA,QAAQ,EAAEjH,UAAU,CAAC4F,cAAX,CAA0BrB,KAA1B;AADgB,GAA5B,EAEGtD,cAFH,EAEmBrB,SAFnB;;AAIA,MAAII,UAAU,CAAC0B,YAAf,EAA6B;AAC3B2E,IAAAA,2BAA2B,CAACnG,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,EAAuB,IAAvB,CAA3B;AACD,GAFD,MAEO;AACLuH,IAAAA,0BAA0B,CAACrH,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,EAAuB,IAAvB,CAA1B;AACD;;AAED0H,EAAAA,qBAAqB,CAACxH,GAAD,EAAMF,UAAN,EAAkB,IAAlB,CAArB;AACAqI,EAAAA,kBAAkB,CAACnI,GAAD,EAAMpB,GAAN,EAAWkB,UAAX,EAAuB,IAAvB,CAAlB;AACD;;AAED,SAASgB,SAAT,CAAmB9C,IAAnB,EAAyB0B,SAAzB,EAAoCqB,cAApC,EAAoDf,GAApD,EAAyD;AACvD;AACA,MAAI8I,SAAS,GAAG9I,GAAG,CAAC2H,kBAApB;AACAmB,EAAAA,SAAS,KAAKA,SAAS,CAACf,KAAV,CAAgBgB,IAAhB,GAAuB,IAA5B,CAAT;AACA,MAAIC,MAAM,GAAG,EAAb;AACAxC,EAAAA,QAAQ,CAACxG,GAAD,EAAM,UAAU+F,IAAV,EAAgB;AAC5BiD,IAAAA,MAAM,CAACC,IAAP,CAAYlD,IAAZ;AACD,GAFO,CAAR;AAGA/F,EAAAA,GAAG,CAACuH,mBAAJ,IAA2ByB,MAAM,CAACC,IAAP,CAAYjJ,GAAG,CAACuH,mBAAhB,CAA3B,CARuD,CAQU;;AAEjEvH,EAAAA,GAAG,CAACqI,mBAAJ,KAA4BtH,cAAc,GAAG,IAA7C;AACAxE,EAAAA,MAAM,CAAC2M,IAAP,CAAYF,MAAZ,EAAoB,UAAUjD,IAAV,EAAgB;AAClCvJ,IAAAA,OAAO,CAAC8L,WAAR,CAAoBvC,IAApB,EAA0B;AACxB9B,MAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ;AADiB,KAA1B,EAEGlD,cAFH,EAEmBrB,SAFnB,EAE8B,YAAY;AACxCM,MAAAA,GAAG,CAACmJ,MAAJ,IAAcnJ,GAAG,CAACmJ,MAAJ,CAAW3I,MAAX,CAAkBR,GAAlB,CAAd;AACD,KAJD;AAKD,GAND;AAOAhC,EAAAA,IAAI,CAACkC,gBAAL,CAAsBR,SAAtB,EAAiC,IAAjC;AACD;;AAED,SAASgB,WAAT,CAAqB1C,IAArB,EAA2B8B,UAA3B,EAAuC;AACrC,SAAO,CAAC9B,IAAI,CAACkE,aAAL,CAAmBpC,UAAU,CAACJ,SAA9B,EAAyC,QAAzC,KAAsD,MAAvD,EAA+D,CAAC,CAACI,UAAU,CAAC0B,YAA5E,EAA0F,CAAC,CAAC1B,UAAU,CAAC2B,UAAvG,EAAmH2H,IAAnH,CAAwH,GAAxH,CAAP;AACD;;AAED,SAAS5C,QAAT,CAAkBxG,GAAlB,EAAuBqJ,EAAvB,EAA2BC,OAA3B,EAAoC;AAClC;AACA/M,EAAAA,MAAM,CAAC2M,IAAP,CAAYlJ,GAAG,CAACsG,iBAAJ,CAAsBiD,QAAtB,EAAZ,EAA8C,UAAUC,EAAV,EAAc;AAC1DA,IAAAA,EAAE,KAAKxJ,GAAG,CAAC2H,kBAAX,IAAiC0B,EAAE,CAACI,IAAH,CAAQH,OAAR,EAAiBE,EAAjB,CAAjC;AACD,GAFD;AAGD;;AAED,SAAS7C,UAAT,CAAoB6C,EAApB,EAAwBE,cAAxB,EAAwCC,cAAxC,EAAwD7J,UAAxD,EAAoEsG,QAApE,EAA8EiD,EAA9E,EAAkF;AAChFK,EAAAA,cAAc,IAAIF,EAAE,CAAClF,IAAH,CAAQoF,cAAR,CAAlB,CADgF,CACrC;;AAE3C,MAAI5J,UAAU,CAAC2B,UAAX,IAAyB,CAAC2E,QAA9B,EAAwC;AACtCuD,IAAAA,cAAc,IAAIH,EAAE,CAAClF,IAAH,CAAQqF,cAAR,CAAlB;AACD,GAFD,MAEO;AACLA,IAAAA,cAAc,IAAInN,OAAO,CAAC4J,QAAQ,GAAG,aAAH,GAAmB,WAA5B,CAAP,CAAgDoD,EAAhD,EAAoDG,cAApD,EAAoE7J,UAAU,CAACiB,cAA/E,EAA+FjB,UAAU,CAACJ,SAA1G,EAAqH2J,EAArH,CAAlB;AACD;AACF;;AAED,SAASlJ,YAAT,CAAsBH,GAAtB,EAA2BpB,GAA3B,EAAgCkB,UAAhC,EAA4C;AAC1C,MAAIqC,KAAK,GAAGrC,UAAU,CAACqC,KAAvB;AACA,MAAIzC,SAAS,GAAGI,UAAU,CAACJ,SAA3B;AACA,MAAIE,SAAS,GAAGE,UAAU,CAACF,SAA3B,CAH0C,CAGJ;AACtC;;AAEA,MAAIgK,WAAW,GAAGhK,SAAS,CAACiK,QAAV,CAAmB,WAAnB,EAAgCC,YAAhC,CAA6C,CAAC,OAAD,CAA7C,CAAlB;AACA,MAAIC,UAAU,GAAGnK,SAAS,CAACiK,QAAV,CAAmB,oBAAnB,EAAyCC,YAAzC,EAAjB;AACA,MAAIE,WAAW,GAAGpK,SAAS,CAAC2C,UAAV,CAAqB,QAArB,CAAlB;AACAiE,EAAAA,QAAQ,CAACxG,GAAD,EAAM,UAAU+F,IAAV,EAAgB;AAC5B;AACAA,IAAAA,IAAI,CAACkE,QAAL,CAAc9H,KAAd;AACA4D,IAAAA,IAAI,CAACE,QAAL,CAAc1J,MAAM,CAAC2N,QAAP,CAAgB;AAC5BjC,MAAAA,IAAI,EAAE9F,KADsB;AAE5BgI,MAAAA,OAAO,EAAErK,UAAU,CAACqK;AAFQ,KAAhB,EAGXP,WAHW,CAAd;AAIApN,IAAAA,OAAO,CAAC4N,aAAR,CAAsBrE,IAAtB,EAA4BgE,UAA5B;AACAC,IAAAA,WAAW,KAAKjE,IAAI,CAACsE,MAAL,GAAcL,WAAnB,CAAX;AACAjE,IAAAA,IAAI,CAACzD,EAAL,GAAUxC,UAAU,CAACwC,EAArB;AACD,GAVO,CAAR;AAWA,MAAIgI,iBAAiB,GAAG,EAAxB;AACA,MAAIC,kBAAkB,GAAG3L,GAAG,CAACU,QAAJ,CAAajC,OAAb,CAAqB,EAAEyC,UAAU,CAAC4C,cAAX,GAA4B,CAA9B,CAArB,CAAzB;AACA,MAAIgF,OAAO,GAAG1H,GAAG,CAAC2H,kBAAlB;AACA5K,EAAAA,QAAQ,CAAC2K,OAAO,CAACK,KAAT,EAAgBuC,iBAAhB,EAAmC1K,SAAnC,EAA8CuC,KAA9C,EAAqDvD,GAAG,CAAChB,WAAzD,EAAsE8B,SAAtE,EAAiF6K,kBAAjF,CAAR;AACA/N,EAAAA,OAAO,CAAC4N,aAAR,CAAsB1C,OAAtB,EAA+B4C,iBAA/B;AACD;;AAED,SAAShF,UAAT,CAAoBkF,KAApB,EAA2B;AACzB,MAAIC,YAAY,GAAG5I,IAAI,CAAC6I,KAAL,CAAWF,KAAX,CAAnB,CADyB,CACa;;AAEtC,SAAO3I,IAAI,CAACuC,GAAL,CAASoG,KAAK,GAAGC,YAAjB,IAAiC,IAAjC,GAAwCA,YAAxC,GAAuD5I,IAAI,CAAC8I,IAAL,CAAUH,KAAV,CAA9D;AACD;;AAED,IAAII,QAAQ,GAAGpN,OAAf;AACAqN,MAAM,CAACC,OAAP,GAAiBF,QAAjB","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar isNumeric = _number.isNumeric;\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar BarView = echarts.extendChartView({\n  type: 'pictorialBar',\n  render: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = !!baseAxis.isHorizontal();\n    var coordSysRect = cartesian.grid.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  },\n  dispose: zrUtil.noop,\n  remove: function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, bar.dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  }\n}); // Set or calculate default value about symbol, and calculate layout info.\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    color: data.getItemVisual(dataIndex, 'color'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverAnimation: isAnimationEnabled && itemModel.get('hoverAnimation'),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = itemModel.get('symbolOffset');\n\n  if (zrUtil.isArray(symbolOffset)) {\n    symbolOffset = [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])];\n  }\n\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, output) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  output.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    output.repeatCutLength = layout[valueDim.wh];\n  }\n\n  output.pxSign = boundingLength > 0 ? 1 : boundingLength < 0 ? -1 : 0;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, output) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n\n  if (zrUtil.isArray(symbolSize)) {\n    symbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      symbolSize = '100%';\n    }\n\n    symbolSize = [symbolSize, symbolSize];\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  symbolSize[categoryDim.index] = parsePercent(symbolSize[categoryDim.index], categorySize);\n  symbolSize[valueDim.index] = parsePercent(symbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  output.symbolSize = symbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = output.symbolScale = [symbolSize[0] / symbolPatternSize, symbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, output) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scale: symbolScale.slice(),\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  output.valueLineWidth = valueLineWidth;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, output) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = output.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    symbolMargin = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMargin * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMargin * 2; // Both final repeatTimes and final symbolMargin area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMargin = mDiff / 2 / (hasEndGap ? repeatTimes : repeatTimes - 1);\n    uLenWithMargin = unitLength + symbolMargin * 2;\n    endFix = hasEndGap ? 0 : symbolMargin * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    output.repeatTimes = repeatTimes;\n    output.symbolMargin = symbolMargin;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = output.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = output.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = output.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = output.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize, symbolMeta.color);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scale: [0, 0]\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n\n    updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      position: target.position,\n      scale: [0, 0]\n    }, {\n      scale: target.scale,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate); // FIXME\n    // If all emphasis/normal through action.\n\n    path.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n    updateHoverAnimation(path, symbolMeta);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      position: position,\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    };\n  }\n\n  function onMouseOver() {\n    eachPath(bar, function (path) {\n      path.trigger('emphasis');\n    });\n  }\n\n  function onMouseOut() {\n    eachPath(bar, function (path) {\n      path.trigger('normal');\n    });\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: [0, 0],\n      rotation: symbolMeta.rotation\n    }, {\n      scale: symbolMeta.symbolScale.slice()\n    }, symbolMeta, isUpdate);\n    mainPath.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n  } else {\n    updateAttr(mainPath, null, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  updateHoverAnimation(mainPath, symbolMeta);\n\n  function onMouseOver() {\n    this.trigger('emphasis');\n  }\n\n  function onMouseOut() {\n    this.trigger('normal');\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction updateHoverAnimation(path, symbolMeta) {\n  path.off('emphasis').off('normal');\n  var scale = symbolMeta.symbolScale.slice();\n  symbolMeta.hoverAnimation && path.on('emphasis', function () {\n    this.animateTo({\n      scale: [scale[0] * 1.1, scale[1] * 1.1]\n    }, 400, 'elasticOut');\n  }).on('normal', function () {\n    this.animateTo({\n      scale: scale.slice()\n    }, 400, 'elasticOut');\n  });\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.attr('position', symbolMeta.bundlePosition.slice());\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    position: symbolMeta.bundlePosition.slice()\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && (labelRect.style.text = null);\n  var pathes = [];\n  eachPath(bar, function (path) {\n    pathes.push(path);\n  });\n  bar.__pictorialMainPath && pathes.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(pathes, function (path) {\n    graphic.updateProps(path, {\n      scale: [0, 0]\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var color = symbolMeta.color;\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var normalStyle = itemModel.getModel('itemStyle').getItemStyle(['color']);\n  var hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  eachPath(bar, function (path) {\n    // PENDING setColor should be before setStyle!!!\n    path.setColor(color);\n    path.setStyle(zrUtil.defaults({\n      fill: color,\n      opacity: symbolMeta.opacity\n    }, normalStyle));\n    graphic.setHoverStyle(path, hoverStyle);\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barRectHoverStyle = {};\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabel(barRect.style, barRectHoverStyle, itemModel, color, opt.seriesModel, dataIndex, barPositionOutside);\n  graphic.setHoverStyle(barRect, barRectHoverStyle);\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nvar _default = BarView;\nmodule.exports = _default;"]}]}