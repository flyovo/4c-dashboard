{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/ts-loader/index.js??ref--14-2!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js??ref--13-0!/Users/id-repair/Documents/SEOL/4c-dashboard/src/utils/request.ts","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/src/utils/request.ts","mtime":1618208154000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvaWQtcmVwYWlyL0RvY3VtZW50cy9TRU9MLzRjLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKdmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiYXhpb3MiKSk7Cgp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKCnZhciBfbWVzc2FnZVNlcnZpY2UgPSByZXF1aXJlKCJAL3V0aWxzL21lc3NhZ2Utc2VydmljZSIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfcm91dGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3JvdXRlciIpKTsKCnZhciBzZXJ2aWNlID0gX2F4aW9zLmRlZmF1bHQuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICB0aW1lb3V0OiAxMDAwMDAKfSk7Cgp2YXIgbG9hZGluZzsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkgewogICAgKDAsIF9sb2Rhc2guc2V0KShjb25maWcuaGVhZGVycywgJ3Rva2VuJywgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpOwogIH0KCiAgdmFyIHJlcVR5cGUgPSBjb25maWcubWV0aG9kOwoKICBzd2l0Y2ggKHJlcVR5cGUpIHsKICAgIGNhc2UgJ3Bvc3QnOgogICAgICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpIHsKICAgICAgLy8gICBjb25maWcuZGF0YS50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpCiAgICAgIC8vIH0KICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgYnJlYWs7CiAgfQoKICBsb2FkaW5nID0gX2VsZW1lbnRVaS5Mb2FkaW5nLnNlcnZpY2UoewogICAgZnVsbHNjcmVlbjogdHJ1ZSwKICAgIHRleHQ6ICdMb2FkaW5nJywKICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICB9KTsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBsb2FkaW5nLmNsb3NlKCk7CiAgUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGxvYWRpbmcuY2xvc2UoKTsKCiAgaWYgKHJlc3BvbnNlLmhlYWRlcnMudG9rZW4gPT09ICcnIHx8ICFyZXNwb25zZS5oZWFkZXJzLnRva2VuKSB7CiAgICBfbWVzc2FnZVNlcnZpY2UuTWVzc2FnZVNlcnZpY2UuTXNnRXJyb3IoJ+2GoO2BsCDrtojsnbzsuZgg65iQ64qUIOunjOujjCcpOwoKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwoKICAgIF9yb3V0ZXIuZGVmYXVsdC5wdXNoKCIvbG9naW4iKTsKICB9IGVsc2UgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzcG9uc2UuaGVhZGVycy50b2tlbik7CiAgfQoKICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHsKICAgIF9tZXNzYWdlU2VydmljZS5NZXNzYWdlU2VydmljZS5Nc2dFcnJvcign64K067aAIOyLnOyKpO2FnCDsmKTrpZgg6rSA66as7J6Q7JeQ6rKMIOusuOydmO2VmOyEuOyalC4nKTsKICB9CgogIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdENkID09PSAzMDApIHsKICAgIF9tZXNzYWdlU2VydmljZS5NZXNzYWdlU2VydmljZS5Nc2dFcnJvcign7JWE7J2065SUIOuwjyDruYTrsIDrsojtmLjrpbwg7ZmV7J247ZW0IOyjvOyEuOyalC4nKTsKICB9CgogIHJldHVybiByZXNwb25zZS5kYXRhOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBfbWVzc2FnZVNlcnZpY2UuTWVzc2FnZVNlcnZpY2UuTXNnRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnZW1wdHkgZXJyb3IgbWVzc2FnZScpOwoKICBsb2FkaW5nLmNsb3NlKCk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CnZhciBfZGVmYXVsdCA9IHNlcnZpY2U7CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js??ref--13-0!/Users/id-repair/Documents/SEOL/4c-dashboard/src/utils/request.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AAcA,IAAM,OAAO,GAAG,eAAM,MAAN,CAAa;AAC3B,EAAA,OAAO,EAAE,OAAO,CAAC,GAAR,CAAY,gBADM;AAE3B,EAAA,eAAe,EAAE,IAFU;AAG3B,EAAA,OAAO,EAAE;AAHkB,CAAb,CAAhB;;AAMA,IAAI,OAAJ;AACA,OAAO,CAAC,YAAR,CAAqB,OAArB,CAA6B,GAA7B,CACE,UAAA,MAAM,EAAG;AACP,MAAI,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjC,qBAAI,MAAM,CAAC,OAAX,EAAoB,OAApB,EAA6B,YAAY,CAAC,OAAb,CAAqB,OAArB,CAA7B;AACD;;AACD,MAAM,OAAO,GAAG,MAAM,CAAC,MAAvB;;AACA,UAAQ,OAAR;AACE,SAAK,MAAL;AACE;AACA;AACA;AACA;;AAEF;AACE;AARJ;;AAUA,EAAA,OAAO,GAAG,mBAAQ,OAAR,CAAgB;AACxB,IAAA,UAAU,EAAE,IADY;AAExB,IAAA,IAAI,EAAE,SAFkB;AAGxB,IAAA,OAAO,EAAE,iBAHe;AAIxB,IAAA,UAAU,EAAE;AAJY,GAAhB,CAAV;AAMA,SAAO,MAAP;AACD,CAvBH,EAwBE,UAAA,KAAK,EAAG;AACN,EAAA,OAAO,CAAC,KAAR;AACA,EAAA,OAAO,CAAC,MAAR,CAAe,KAAf;AACD,CA3BH;AA8BA,OAAO,CAAC,YAAR,CAAqB,QAArB,CAA8B,GAA9B,CACE,UAAA,QAAQ,EAAG;AACT,EAAA,OAAO,CAAC,KAAR;;AACA,MAAI,QAAQ,CAAC,OAAT,CAAiB,KAAjB,KAA2B,EAA3B,IAAiC,CAAC,QAAQ,CAAC,OAAT,CAAiB,KAAvD,EAA8D;AAC5D,mCAAe,QAAf,CAAwB,cAAxB;;AACA,IAAA,YAAY,CAAC,UAAb,CAAwB,QAAxB;AACA,IAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;;AACA,oBAAO,IAAP;AACD,GALD,MAKO;AACL,IAAA,YAAY,CAAC,OAAb,CAAqB,OAArB,EAA8B,QAAQ,CAAC,OAAT,CAAiB,KAA/C;AACD;;AACD,MAAI,QAAQ,CAAC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,mCAAe,QAAf,CAAwB,wBAAxB;AACD;;AACD,MAAI,QAAQ,CAAC,IAAT,CAAc,QAAd,KAA2B,GAA/B,EAAoC;AAClC,mCAAe,QAAf,CAAwB,sBAAxB;AACD;;AAED,SAAO,QAAQ,CAAC,IAAhB;AACD,CAnBH,EAoBE,UAAA,KAAK,EAAG;AACN,iCAAe,QAAf,CAAwB,KAAK,CAAC,OAAN,IAAiB,qBAAzC;;AACA,EAAA,OAAO,CAAC,KAAR;AACA,SAAO,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP;AACD,CAxBH;eA2Be,O","sourcesContent":["import axios from 'axios'\n\nimport { Loading } from 'element-ui'\nimport { MessageService } from '@/utils/message-service'\nimport { set } from 'lodash'\nimport router from '@/router'\n\ndeclare module 'axios' {\n  export interface AxiosResponse<T = any> extends Promise<T> {\n    data: T\n    resultCd: number\n    status: number\n    statusText: string\n    headers: any\n    config: AxiosRequestConfig\n    request?: any\n  }\n}\n\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  withCredentials: true,\n  timeout: 100000\n})\n\nlet loading: any\nservice.interceptors.request.use(\n  config => {\n    if (localStorage.getItem('token')) {\n      set(config.headers, 'token', localStorage.getItem('token'))\n    }\n    const reqType = config.method\n    switch (reqType) {\n      case 'post':\n        // if (localStorage.getItem('token')) {\n        //   config.data.token = localStorage.getItem('token')\n        // }\n        break\n\n      default:\n        break\n    }\n    loading = Loading.service({\n      fullscreen: true,\n      text: 'Loading',\n      spinner: 'el-icon-loading',\n      background: 'rgba(0, 0, 0, 0.7)'\n    })\n    return config\n  },\n  error => {\n    loading.close()\n    Promise.reject(error)\n  }\n)\n\nservice.interceptors.response.use(\n  response => {\n    loading.close()\n    if (response.headers.token === '' || !response.headers.token) {\n      MessageService.MsgError('토큰 불일치 또는 만료')\n      localStorage.removeItem('userId')\n      localStorage.removeItem('token')\n      router.push(`/login`)\n    } else {\n      localStorage.setItem('token', response.headers.token)\n    }\n    if (response.status === 500) {\n      MessageService.MsgError('내부 시스템 오류 관리자에게 문의하세요.')\n    }\n    if (response.data.resultCd === 300) {\n      MessageService.MsgError('아이디 및 비밀번호를 확인해 주세요.')\n    }\n\n    return response.data\n  },\n  error => {\n    MessageService.MsgError(error.message || 'empty error message')\n    loading.close()\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"],"sourceRoot":""}]}