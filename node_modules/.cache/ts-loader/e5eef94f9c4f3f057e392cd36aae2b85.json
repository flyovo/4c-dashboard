{"remainingRequest":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/ts-loader/index.js??ref--14-2!/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js??ref--13-0!/Users/id-repair/Documents/SEOL/4c-dashboard/src/store/modules/permission/store.ts","dependencies":[{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/src/store/modules/permission/store.ts","mtime":1618208154000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvaWQtcmVwYWlyL0RvY3VtZW50cy9TRU9MLzRjLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBlcm1pc3Npb25Nb2R1bGUgPSBleHBvcnRzLmZpbHRlckFzeW5jUm91dGVzID0gdm9pZCAwOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9pZC1yZXBhaXIvRG9jdW1lbnRzL1NFT0wvNGMtZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIikpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9pZC1yZXBhaXIvRG9jdW1lbnRzL1NFT0wvNGMtZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIikpOwoKdmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9pZC1yZXBhaXIvRG9jdW1lbnRzL1NFT0wvNGMtZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIikpOwoKdmFyIF9jcmVhdGVTdXBlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9Vc2Vycy9pZC1yZXBhaXIvRG9jdW1lbnRzL1NFT0wvNGMtZGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZVN1cGVyIikpOwoKdmFyIF9vYmplY3RTcHJlYWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvVXNlcnMvaWQtcmVwYWlyL0RvY3VtZW50cy9TRU9MLzRjLWRhc2hib2FyZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyIikpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKdmFyIF90c2xpYiA9IHJlcXVpcmUoInRzbGliIik7Cgp2YXIgX3N0b3JlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3N0b3JlIikpOwoKdmFyIF9yb3V0ZXIgPSByZXF1aXJlKCJAL3JvdXRlciIpOwoKdmFyIF9zdG9yZTIgPSByZXF1aXJlKCJAL3N0b3JlL21vZHVsZXMvdXNlci9zdG9yZSIpOwoKdmFyIF92dWV4TW9kdWxlRGVjb3JhdG9ycyA9IHJlcXVpcmUoInZ1ZXgtbW9kdWxlLWRlY29yYXRvcnMiKTsKCnZhciBoYXNQZXJtaXNzaW9uID0gZnVuY3Rpb24gaGFzUGVybWlzc2lvbihyb2xlcywgcm91dGUpIHsKICBpZiAocm91dGUubWV0YSAmJiByb3V0ZS5tZXRhLnJvbGVzKSB7CiAgICByZXR1cm4gcm9sZXMuc29tZShmdW5jdGlvbiAocm9sZSkgewogICAgICByZXR1cm4gcm91dGUubWV0YS5yb2xlcy5pbmNsdWRlcyhyb2xlKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn07Cgp2YXIgZmlsdGVyQXN5bmNSb3V0ZXMgPSBmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcyhyb3V0ZXMsIHJvbGVzKSB7CiAgdmFyIHJlcyA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIHIgPSAoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoe30sIHJvdXRlKTsKCiAgICBpZiAoaGFzUGVybWlzc2lvbihyb2xlcywgcikpIHsKICAgICAgaWYgKHIuY2hpbGRyZW4pIHsKICAgICAgICByLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXMoci5jaGlsZHJlbiwgcm9sZXMpOwogICAgICB9CgogICAgICByZXMucHVzaChyKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9OwoKZXhwb3J0cy5maWx0ZXJBc3luY1JvdXRlcyA9IGZpbHRlckFzeW5jUm91dGVzOwoKdmFyIFBlcm1pc3Npb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWV4TW9kdWxlKSB7CiAgKDAsIF9pbmhlcml0czIuZGVmYXVsdCkoUGVybWlzc2lvbiwgX1Z1ZXhNb2R1bGUpOwoKICB2YXIgX3N1cGVyID0gKDAsIF9jcmVhdGVTdXBlcjIuZGVmYXVsdCkoUGVybWlzc2lvbik7CgogIGZ1bmN0aW9uIFBlcm1pc3Npb24oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgKDAsIF9jbGFzc0NhbGxDaGVjazIuZGVmYXVsdCkodGhpcywgUGVybWlzc2lvbik7CiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMucm91dGVzID0gW107CiAgICBfdGhpcy5keW5hbWljUm91dGVzID0gW107CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShQZXJtaXNzaW9uLCBbewogICAga2V5OiAiU0VUX1JPVVRFUyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX1JPVVRFUyhyb3V0ZXMpIHsKICAgICAgdGhpcy5yb3V0ZXMgPSBfcm91dGVyLmNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogICAgICB0aGlzLmR5bmFtaWNSb3V0ZXMgPSByb3V0ZXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiU0VUX0NMRUFSX1JPVVRFUiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gU0VUX0NMRUFSX1JPVVRFUigpIHsKICAgICAgdGhpcy5yb3V0ZXMgPSBbXTsKICAgICAgdGhpcy5keW5hbWljUm91dGVzID0gW107CiAgICB9CiAgfSwgewogICAga2V5OiAiQ2xlYXJSb3V0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIENsZWFyUm91dGVyKCkgewogICAgICB0aGlzLlNFVF9DTEVBUl9ST1VURVIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJHZW5lcmF0ZVJvdXRlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMocm9sZXMpIHsKICAgICAgdmFyIGFjY2Vzc2VkUm91dGVzOwoKICAgICAgaWYgKHJvbGVzLmluY2x1ZGVzKCdhZG1pbicpKSB7CiAgICAgICAgYWNjZXNzZWRSb3V0ZXMgPSBfcm91dGVyLmFzeW5jUm91dGVzOwoKICAgICAgICBfc3RvcmUyLlVzZXJTdG9yZU1vZHVsZS5yb3V0ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGFjY2Vzc2VkUm91dGVzLnB1c2goaXRlbSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcyhfcm91dGVyLmFzeW5jUm91dGVzLCByb2xlcyk7CiAgICAgIH0KCiAgICAgIHRoaXMuU0VUX1JPVVRFUyhhY2Nlc3NlZFJvdXRlcyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBQZXJtaXNzaW9uOwp9KF92dWV4TW9kdWxlRGVjb3JhdG9ycy5WdWV4TW9kdWxlKTsKCigwLCBfdHNsaWIuX19kZWNvcmF0ZSkoW192dWV4TW9kdWxlRGVjb3JhdG9ycy5NdXRhdGlvbl0sIFBlcm1pc3Npb24ucHJvdG90eXBlLCAiU0VUX1JPVVRFUyIsIG51bGwpOwooMCwgX3RzbGliLl9fZGVjb3JhdGUpKFtfdnVleE1vZHVsZURlY29yYXRvcnMuTXV0YXRpb25dLCBQZXJtaXNzaW9uLnByb3RvdHlwZSwgIlNFVF9DTEVBUl9ST1VURVIiLCBudWxsKTsKKDAsIF90c2xpYi5fX2RlY29yYXRlKShbKDAsIF92dWV4TW9kdWxlRGVjb3JhdG9ycy5BY3Rpb24pKHsKICByYXdFcnJvcjogdHJ1ZQp9KV0sIFBlcm1pc3Npb24ucHJvdG90eXBlLCAiQ2xlYXJSb3V0ZXIiLCBudWxsKTsKKDAsIF90c2xpYi5fX2RlY29yYXRlKShbKDAsIF92dWV4TW9kdWxlRGVjb3JhdG9ycy5BY3Rpb24pKHsKICByYXdFcnJvcjogdHJ1ZQp9KV0sIFBlcm1pc3Npb24ucHJvdG90eXBlLCAiR2VuZXJhdGVSb3V0ZXMiLCBudWxsKTsKUGVybWlzc2lvbiA9ICgwLCBfdHNsaWIuX19kZWNvcmF0ZSkoWygwLCBfdnVleE1vZHVsZURlY29yYXRvcnMuTW9kdWxlKSh7CiAgZHluYW1pYzogdHJ1ZSwKICBzdG9yZTogX3N0b3JlLmRlZmF1bHQsCiAgbmFtZTogJ3Blcm1pc3Npb24nLAogIG5hbWVzcGFjZWQ6IHRydWUKfSldLCBQZXJtaXNzaW9uKTsKdmFyIFBlcm1pc3Npb25Nb2R1bGUgPSAoMCwgX3Z1ZXhNb2R1bGVEZWNvcmF0b3JzLmdldE1vZHVsZSkoUGVybWlzc2lvbik7CmV4cG9ydHMuUGVybWlzc2lvbk1vZHVsZSA9IFBlcm1pc3Npb25Nb2R1bGU7"},{"version":3,"sources":["/Users/id-repair/Documents/SEOL/4c-dashboard/node_modules/eslint-loader/index.js??ref--13-0!/Users/id-repair/Documents/SEOL/4c-dashboard/src/store/modules/permission/store.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AAIA;;AAEA,IAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,KAAD,EAAkB,KAAlB,EAAwC;AAC5D,MAAI,KAAK,CAAC,IAAN,IAAc,KAAK,CAAC,IAAN,CAAW,KAA7B,EAAoC;AAClC,WAAO,KAAK,CAAC,IAAN,CAAW,UAAA,IAAI;AAAA,aAAI,KAAK,CAAC,IAAN,CAAW,KAAX,CAAiB,QAAjB,CAA0B,IAA1B,CAAJ;AAAA,KAAf,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF,CAND;;AAQO,IAAM,iBAAiB,GAAG,SAApB,iBAAoB,CAAC,MAAD,EAAwB,KAAxB,EAA2C;AAC1E,MAAM,GAAG,GAAkB,EAA3B;AACA,EAAA,MAAM,CAAC,OAAP,CAAe,UAAA,KAAK,EAAG;AACrB,QAAM,CAAC,mCAAQ,KAAR,CAAP;;AACA,QAAI,aAAa,CAAC,KAAD,EAAQ,CAAR,CAAjB,EAA6B;AAC3B,UAAI,CAAC,CAAC,QAAN,EAAgB;AACd,QAAA,CAAC,CAAC,QAAF,GAAa,iBAAiB,CAAC,CAAC,CAAC,QAAH,EAAa,KAAb,CAA9B;AACD;;AACD,MAAA,GAAG,CAAC,IAAJ,CAAS,CAAT;AACD;AACF,GARD;AASA,SAAO,GAAP;AACD,CAZM;;;;AAeP,IAAM,UAAN;AAAA;;AAAA;;AAAA,wBAAA;AAAA;;AAAA;;AACS,UAAA,MAAA,GAAwB,EAAxB;AACA,UAAA,aAAA,GAA+B,EAA/B;AAFT;AAkCC;;AAlCD;AAAA;AAAA,WAKU,oBAAW,MAAX,EAAgC;AACtC,WAAK,MAAL,GAAc,uBAAe,MAAf,CAAsB,MAAtB,CAAd;AACA,WAAK,aAAL,GAAqB,MAArB;AACD;AARH;AAAA;AAAA,WAWU,4BAAgB;AACtB,WAAK,MAAL,GAAc,EAAd;AACA,WAAK,aAAL,GAAqB,EAArB;AACD;AAdH;AAAA;AAAA,WAiBS,uBAAW;AAChB,WAAK,gBAAL;AACD;AAnBH;AAAA;AAAA,WAsBS,wBAAe,KAAf,EAA8B;AACnC,UAAI,cAAJ;;AACA,UAAI,KAAK,CAAC,QAAN,CAAe,OAAf,CAAJ,EAA6B;AAC3B,QAAA,cAAc,GAAG,mBAAjB;;AACA,gCAAgB,UAAhB,CAA2B,OAA3B,CAAmC,UAAA,IAAI,EAAG;AACxC,UAAA,cAAc,CAAC,IAAf,CAAoB,IAApB;AACD,SAFD;AAGD,OALD,MAKO;AACL,QAAA,cAAc,GAAG,iBAAiB,CAAC,mBAAD,EAAc,KAAd,CAAlC;AACD;;AACD,WAAK,UAAL,CAAgB,cAAhB;AACD;AAjCH;AAAA;AAAA,EAAyB,gCAAzB,CAAA;;AAKE,uBAAA,CADC,8BACD,CAAA,E,oBAAA,E,YAAA,EAGC,IAHD;AAMA,uBAAA,CADC,8BACD,CAAA,E,oBAAA,E,kBAAA,EAGC,IAHD;AAMA,uBAAA,CADC,kCAAO;AAAE,EAAA,QAAQ,EAAE;AAAZ,CAAP,CACD,CAAA,E,oBAAA,E,aAAA,EAEC,IAFD;AAKA,uBAAA,CADC,kCAAO;AAAE,EAAA,QAAQ,EAAE;AAAZ,CAAP,CACD,CAAA,E,oBAAA,E,gBAAA,EAWC,IAXD;AAtBI,UAAU,GAAA,uBAAA,CADf,kCAAO;AAAE,EAAA,OAAO,EAAE,IAAX;AAAiB,EAAA,KAAK,EAAL,cAAjB;AAAwB,EAAA,IAAI,EAAE,YAA9B;AAA4C,EAAA,UAAU,EAAE;AAAxD,CAAP,CACe,CAAA,EAAV,UAAU,CAAV;AAoCC,IAAM,gBAAgB,GAAG,qCAAU,UAAV,CAAzB","sourcesContent":["import store from '@/store'\nimport { asyncRoutes, constantRoutes } from '@/router'\n\nimport { UserStoreModule } from '@/store/modules/user/store'\n\nimport { PermissionState } from './type'\nimport { RouteConfig } from 'vue-router'\nimport { VuexModule, Module, Mutation, Action, getModule } from 'vuex-module-decorators'\n\nconst hasPermission = (roles: string[], route: RouteConfig) => {\n  if (route.meta && route.meta.roles) {\n    return roles.some(role => route.meta.roles.includes(role))\n  } else {\n    return true\n  }\n}\n\nexport const filterAsyncRoutes = (routes: RouteConfig[], roles: string[]) => {\n  const res: RouteConfig[] = []\n  routes.forEach(route => {\n    const r = { ...route }\n    if (hasPermission(roles, r)) {\n      if (r.children) {\n        r.children = filterAsyncRoutes(r.children, roles)\n      }\n      res.push(r)\n    }\n  })\n  return res\n}\n\n@Module({ dynamic: true, store, name: 'permission', namespaced: true })\nclass Permission extends VuexModule implements PermissionState {\n  public routes: RouteConfig[] = []\n  public dynamicRoutes: RouteConfig[] = []\n\n  @Mutation\n  private SET_ROUTES(routes: RouteConfig[]) {\n    this.routes = constantRoutes.concat(routes)\n    this.dynamicRoutes = routes\n  }\n\n  @Mutation\n  private SET_CLEAR_ROUTER() {\n    this.routes = []\n    this.dynamicRoutes = []\n  }\n\n  @Action({ rawError: true })\n  public ClearRouter() {\n    this.SET_CLEAR_ROUTER()\n  }\n\n  @Action({ rawError: true })\n  public GenerateRoutes(roles: string[]) {\n    let accessedRoutes: any\n    if (roles.includes('admin')) {\n      accessedRoutes = asyncRoutes\n      UserStoreModule.routerList.forEach(item => {\n        accessedRoutes.push(item)\n      })\n    } else {\n      accessedRoutes = filterAsyncRoutes(asyncRoutes, roles)\n    }\n    this.SET_ROUTES(accessedRoutes)\n  }\n}\n\nexport const PermissionModule = getModule(Permission)\n"],"sourceRoot":""}]}